diff -ru joe-2.8/Makefile joe-2.8-patched/Makefile
--- joe-2.8/Makefile	Sun Mar  5 20:50:28 1995
+++ joe-2.8-patched/Makefile	Wed Dec 20 12:29:14 2000
@@ -9,9 +9,9 @@
 # to go and where you want the man page
 # to go:
 
-WHEREJOE = /usr/local/bin
-WHERERC = /usr/local/lib
-WHEREMAN = /usr/local/man/man1
+WHEREJOE = $(basepath)/stow/joe-2.8/bin
+WHERERC = $(basepath)/stow/joe-2.8/lib/joe
+WHEREMAN = $(basepath)/stow/joe-2.8/man/man1
 
 # If you want to use TERMINFO, you have to set
 # the following variable to 1.  Also you have to
@@ -94,10 +94,10 @@
 	if [ ! -d $(WHEREJOE) ]; then mkdir $(WHEREJOE); chmod a+rx $(WHEREJOE); fi
 	rm -f $(WHEREJOE)/joe $(WHEREJOE)/jmacs $(WHEREJOE)/jstar $(WHEREJOE)/jpico $(WHEREJOE)/rjoe $(WHEREJOE)/termidx
 	mv joe $(WHEREJOE)
-	ln joe $(WHEREJOE)/jmacs
-	ln joe $(WHEREJOE)/jstar
-	ln joe $(WHEREJOE)/rjoe
-	ln joe $(WHEREJOE)/jpico
+	ln -s joe $(WHEREJOE)/jmacs
+	ln -s joe $(WHEREJOE)/jstar
+	ln -s joe $(WHEREJOE)/rjoe
+	ln -s joe $(WHEREJOE)/jpico
 	mv termidx $(WHEREJOE)
 	if [ ! -d $(WHERERC) ]; then mkdir $(WHERERC); chmod a+rx $(WHERERC); fi
 	rm -f $(WHERERC)/joerc $(WHERERC)/jmacsrc $(WHERERC)/jstarrc $(WHERERC)/jpicorc $(WHERERC)/rjoerc $(WHEREMAN)/joe.1
diff -ru joe-2.8/b.c joe-2.8-patched/b.c
--- joe-2.8/b.c	Fri Jan 20 09:38:25 1995
+++ joe-2.8-patched/b.c	Wed Dec 20 12:05:57 2000
@@ -121,7 +121,7 @@
  if(qempty(H,link,&ohdrs))
   {
   h=(H *)alitem(&nhdrs,sizeof(H));
-  h->seg=valloc(vmem,(long)SEGSIZ);
+  h->seg=jvalloc(vmem,(long)SEGSIZ);
   }
  else h=deque(H,link,ohdrs.link.next);
  h->hole=0;
diff -ru joe-2.8/termidx.c joe-2.8-patched/termidx.c
--- joe-2.8/termidx.c	Thu Oct  6 07:20:35 1994
+++ joe-2.8-patched/termidx.c	Wed Dec 20 12:35:17 2000
@@ -66,4 +66,5 @@
 {
 char array[65536];
 gen(array,stdin);
+return 0;
 }
diff -ru joe-2.8/vfile.c joe-2.8-patched/vfile.c
--- joe-2.8/vfile.c	Thu Oct  6 07:20:35 1994
+++ joe-2.8-patched/vfile.c	Wed Dec 20 12:07:09 2000
@@ -351,7 +351,7 @@
 }
 #endif
 
-long valloc(vfile,size)
+long jvalloc(vfile,size)
 VFILE *vfile;
 long size;
 {
@@ -471,7 +471,7 @@
 long addr;
 char c;
 {
-if(addr+1>vsize(vfile)) valloc(vfile,addr+1-vsize(vfile));
+if(addr+1>vsize(vfile)) jvalloc(vfile,addr+1-vsize(vfile));
 if(vfile->vpage1) vunlock(vfile->vpage1);
 vfile->vpage1=vlock(vfile,vfile->addr=(addr&~(long)(PGSIZE-1)));
 return wc(vfile,addr,c);
@@ -493,7 +493,7 @@
 long addr;
 short c;
 {
-if(addr+2>vsize(vfile)) valloc(vfile,addr+2-vsize(vfile));
+if(addr+2>vsize(vfile)) jvalloc(vfile,addr+2-vsize(vfile));
 wc(vfile,addr,c);
 wc(vfile,addr+1,c>>8);
 return c;
@@ -517,7 +517,7 @@
 long addr;
 long c;
 {
-if(addr+4>vsize(vfile)) valloc(vfile,addr+4-vsize(vfile));
+if(addr+4>vsize(vfile)) jvalloc(vfile,addr+4-vsize(vfile));
 wc(vfile,addr,c);
 wc(vfile,addr+1,c>>8);
 wc(vfile,addr+2,c>>16);
@@ -561,7 +561,7 @@
 long addr=vtell(v);
 char *src;
 int x;
-if(addr+size>vsize(v)) valloc(v,addr+size-vsize(v));
+if(addr+size>vsize(v)) jvalloc(v,addr+size-vsize(v));
 while(size)
  {
  src=vlock(v,addr);
diff -ru joe-2.8/vfile.h joe-2.8-patched/vfile.h
--- joe-2.8/vfile.h	Thu Oct  6 07:20:35 1994
+++ joe-2.8-patched/vfile.h	Wed Dec 20 12:05:17 2000
@@ -206,14 +206,14 @@
 
 #define vupcount(vpage) ( ++vheader(vpage)->count )
 
-/* long valloc(VFILE *vfile,long size);
+/* long jvalloc(VFILE *vfile,long size);
  *
  * Allocate space at end of file
  *
  * Returns file address of beginning of allocated space
  */
 
-long valloc();
+long jvalloc();
 
 #ifdef junk
 /******************************************************************************
