diff -ru tiff-v3.4/config.site tiff-v3.4-patched/config.site
--- tiff-v3.4/config.site	Tue Apr 30 00:16:18 1996
+++ tiff-v3.4-patched/config.site	Mon Jan 15 12:38:51 2001
@@ -37,22 +37,25 @@
 # interactive prompting done by the configure script.
 #
 
+PREFIX=@PREFIX@
+STOWDIR=@STOWDIR@
+
 #
 # Package controls.
 #
-#DSO="auto"			# auto|IRIX|IRIX52 enable DSO support for system
-#JPEG="no"			# yes|no configure JPEG support (see below)
-#ZIP="no"			# yes|no configure Deflate support (see below)
+DSO="auto"			# auto|IRIX|IRIX52 enable DSO support for system
+JPEG="yes"			# yes|no configure JPEG support (see below)
+ZIP="yes"			# yes|no configure Deflate support (see below)
 #LIBGL="auto"			# yes|no|auto configure IRIS GL-based tools
 #LIBIMAGE="auto"		# yes|no|auto configure SGI RGB image tools
 
 #
 # Directory parameters.
 #
-#DIR_BIN="/usr/local/bin"		# directory for tools
-#DIR_LIB="/usr/local/lib"		# directory for libraries
-#DIR_INC="/usr/local/include"		# directory for include files
-#DIR_MAN="/usr/local/man"		# directory for manual pages
+DIR_BIN="$STOWDIR/bin"		# directory for tools
+DIR_LIB="$STOWDIR/lib"		# directory for libraries
+DIR_INC="$STOWDIR/include"		# directory for include files
+DIR_MAN="$STOWDIR/man"		# directory for manual pages
 
 #
 # Configuring supporting libraries.
@@ -93,7 +96,9 @@
 # which you can find on the Internet at ftp.uu.net:/graphics/jpeg/.
 #
 #DIRS_LIBINC="$DIRS_LIBINC ../src/jpeg-5a" # directory for jpeg include files
+DIRS_LIBINC="$DIRS_LIBINC $PREFIX/include"
 #DIR_JPEGLIB=../src/jpeg-5a		# directory for libjpeg
+DIR_JPEGLIB="$PREFIX/lib"
 
 #
 # Deflate-specific parameters; used when Deflate support is enabled (see above).
@@ -108,7 +113,9 @@
 #     Look for it also at ftp://ftp.uu.net/pub/archiving/zip/zlib.
 #
 #DIRS_LIBINC="$DIRS_LIBINC ../zlib"	# directory for zlib include files
+DIRS_LIBINC="$DIRS_LIBINC $PREFIX/include"
 #DIR_GZLIB="../zlib"			# directory for libz
+DIR_GZLIB="$PREFIX/lib"
 
 #
 # Miscellaneous parameters.
@@ -131,7 +138,7 @@
 #ENVOPTS="-Aa"				# options for getting ANSI C
 #GCOPTS="-g"				# options to pass C compiler
 #LIBPORT='${PORT}/libport.a'		# library with emulation code
-#MACHDEPLIBS=""				# extra libraries for linking
+MACHDEPLIBS=""				# extra libraries for linking
 #PORTFUNCS=""				# non-standard functions to emulate
 #RANLIB=":"				# pathname of suitable ranlib program
 #DSOSUF="so"				# DSO filename suffix
diff -ru tiff-v3.4/configure tiff-v3.4-patched/configure
--- tiff-v3.4/configure	Tue Apr 30 00:16:17 1996
+++ tiff-v3.4-patched/configure	Mon Jan 15 12:43:12 2001
@@ -1140,6 +1140,12 @@
 	DSOOPTS='-shared'
 	DSO=OSF
 	;;
+    *-darwin*)
+        DSOSUF=dylib
+        DSOOPTS='-dynamiclib -undefined suppress'
+        LIBCOPTS="-fno-common"
+        DSO=DARWIN
+	;;
     *)  DSO=no;;
     esac
     test -z "$DSOSUF_VERSION" && DSOSUF_VERSION=${DSOSUF}
diff -ru tiff-v3.4/libtiff/Makefile.in tiff-v3.4-patched/libtiff/Makefile.in
--- tiff-v3.4/libtiff/Makefile.in	Tue Apr 30 00:16:21 1996
+++ tiff-v3.4-patched/libtiff/Makefile.in	Mon Jan 15 12:39:33 2001
@@ -199,6 +199,10 @@
 # OSF/1 3.2 shared lib rule
 OSFdso: ${OBJS}
 	${LD} -o libtiff.@DSOSUF@ -shared -error_unresolved ${OBJS} @LIBJPEG@ @LIBGZ@ -lc -lm
+# Darwin 1.2 shared libs
+DARWINdso: ${OBJS}
+	${CC} -dynamiclib -undefined suppress -install_name @DIR_LIB@/libtiff.@DSOSUF@ -o libtiff.@DSOSUF@ ${OBJS} @LIBJPEG@ @LIBGZ@
+	touch $@
 
 
 ${OBJS}: ${SRCDIR}/tiffio.h ${SRCDIR}/tiff.h ${SRCDIR}/tif_dir.h
