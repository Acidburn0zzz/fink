diff -ru zlib-1.1.3/Makefile.in zlib-1.1.3-patched/Makefile.in
--- zlib-1.1.3/Makefile.in	Thu Jul  9 18:07:18 1998
+++ zlib-1.1.3-patched/Makefile.in	Mon Mar 26 21:43:06 2001
@@ -85,6 +85,12 @@
 	ln -s $@ $(SHAREDLIB)
 	ln -s $@ $(SHAREDLIB).1
 
+libz.$(VER).dylib: $(OBJS)
+	$(LDSHARED) -o $@ $(OBJS)
+	rm -f libz.dylib libz.1.dylib
+	ln -s $@ libz.dylib
+	ln -s $@ libz.1.dylib
+
 example: example.o $(LIBS)
 	$(CC) $(CFLAGS) -o $@ example.o $(LDFLAGS)
 
@@ -104,6 +110,11 @@
 	  ln -s $(SHAREDLIB).$(VER) $(SHAREDLIB); \
 	  ln -s $(SHAREDLIB).$(VER) $(SHAREDLIB).1; \
 	  (ldconfig || true)  >/dev/null 2>&1; \
+	fi
+	cd $(libdir); if test -f libz.$(VER).dylib; then \
+	  rm -f libz.dylib libz.1.dylib; \
+	  ln -s libz.$(VER).dylib libz.dylib; \
+	  ln -s libz.$(VER).dylib libz.1.dylib; \
 	fi
 # The ranlib in install is needed on NeXTSTEP which checks file times
 # ldconfig is for Linux
diff -ru zlib-1.1.3/configure zlib-1.1.3-patched/configure
--- zlib-1.1.3/configure	Wed Jul  8 20:19:35 1998
+++ zlib-1.1.3-patched/configure	Mon Mar 26 21:44:41 2001
@@ -116,6 +116,11 @@
 	     SFLAGS=${CFLAGS-"-Kconform_pic -O"}
 	     CFLAGS=${CFLAGS-"-O"}
 	     LDSHARED=${LDSHARED-"cc -G"};;
+  Darwin*)   SFLAGS=${CFLAGS-"-O2 -fno-common"}
+             CFLAGS=${CFLAGS-"-O2"}
+	     LDSHARED=${LDSHARED-"cc -dynamiclib -undefined suppress -install_name $libdir/libz.1.dylib -compatibility_version 1.0 -current_version $VER"}
+	     shared_ext='.dylib'
+	     SHAREDLIB='libz.dylib';;
   # send working options for other systems to support@gzip.org
   *)         SFLAGS=${CFLAGS-"-O"}
 	     CFLAGS=${CFLAGS-"-O"}
@@ -129,8 +134,12 @@
   if test "`($CC -c $SFLAGS $test.c) 2>&1`" = "" &&
      test "`($LDSHARED -o $test$shared_ext $test.o) 2>&1`" = ""; then
     CFLAGS="$SFLAGS"
-    LIBS="$SHAREDLIB.$VER"
-    echo Building shared library $SHAREDLIB.$VER with $CC.
+    if test "$shared_ext" = ".dylib"; then
+      LIBS="libz.$VER$shared_ext"
+    else
+      LIBS="$SHAREDLIB.$VER"
+    fi
+    echo Building shared library $LIBS with $CC.
   elif test -z "$old_cc" -a -z "$old_cflags"; then
     echo No shared library suppport.
     shared=0;
