2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Remove special meaning of "".  'Type:
	foo (boolean)' now gives 'Type: foo (foo .)'. The %type_pkg has
	periods removed so still can get null for Package: substitution.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Added missing support for %type_raw[] in Package
	field.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Full multivariant support. 'Type:
	foo, bar' allowed (means package is of both types). 'Type: foo
	thing' allowed for arbitrary type and subtype (no longer limited
	to languages and lang-versions; any strings of \S+ will do (but no parens or commas).
	Subtype "" means null string. If no subtype is given, the type is
	used ('Type: foo' means 'Type: foo foo'). 'Type: foo (thing1
	thing2)' allowed (autogenerates two packages, one with 'Type: foo
	thing1' one with 'Type: foo thing2'). 'Type foo (boolean)' is a
	synonym for 'Type: foo (foo "")'. Subtype list expansion is
	recursive ('Type: foo (a b), bar (c d)' gives all 4 combinations).
	All subtypes (as entered and with periods removed) are available
	for percent expansion: 'Type: perl 5.8.1' gives
	%type_raw[perl]=5.8.1 and %type_pkg[perl]=581 using %type[foo].
	* FinkVersion.pm: Bumped InfoN -> N=2 so can handle %-expansion in
	Package and multiple Type values.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: stash InfoN value as 'infon' not '_info_level' since
	elements with leading _ are lost during new_from_properties().

2004-02-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: expand_percent: protect regex metachars in % keys.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm,Package.pm,PkgVersion.pm: convert all checking of
	package type from directly comparing {_type} to using a new
	PkgVersion::is_type() accessor.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: rm_f now succeeds if try to remove non-existent
	file. symlink_f now uses native rm_f to remove a pre-existing
	target (so doesn't fail if it doesn't exist). Fixed doc about
	$dest being a full filename.
	* PkgVersion.pm: fixed usage of symlink_f to include filename in
	$dest.
	* SelfUpdate.pm: fixed accidental hardlink/softlink swap from last
	commit.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: finish gaborit's patch from 841381 to cat().
	* Bootstrap.pm,Engine.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	use Fink::Command calls instead of system() or &execute whenever
	possible (based on 841381).

2004-02-24  David HÃ¶hn  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: changed the rsync command to
	explicitly preserve the timestamps using -t
	For more information see:
		1.) http://article.gmane.org/gmane.os.apple.fink.devel/7592
		2.) http://article.gmane.org/gmane.os.apple.fink.devel/7597
		3.) http://article.gmane.org/gmane.os.apple.fink.devel/7598
	All credit goes to Rob Braun.

2004-02-24  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Enable warning for RFC-822 multiline format.

2004-02-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.2 when
	the new Developer Tools are not installed (i.e., no more non-gcc3.3
	10.2 tree).

2004-02-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Changed conditional depends syntax for "equals"
	to "=" (like Debian version dependency syntax).
	* PkgVersion.pm: Activated conditional depends parsing (during
	indexing). Fixed to use accessor methods.
	* PkgVersion.pm: Moved removal-of-self-from-Conflicts/Replaces
	code into a new clear_self_from_list method. Fixed to use accessor
	methods. Switch to calling it during indexing instead of .deb
	construction (dependency engine may need Conflicts info).
	* PkgVersion.pm: Remove more remnants of my _source_item stuff.
	* Services.pm: Revert accidental commit of debugging code.
	
2004-02-18  Rob Braun  <bbraun@opendarwin.org>

	* Bootstrap.pm: Update the i386 distribution detection code to
	understand i386-apple-darwin 7.0.1 as 10.3 distribution.

2004-02-17  Daniel Macks  <dmacks@netspace.org>

	* all: add emacs tags to get perl-mode (even for .pm.in) and set
	tab-width to 4 chars (in accord with fink coding style).

2004-02-16  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: *Script parsing improvements for non-#!-specified
	scripts: fix removal of leading whitespace, implement use of \ at
	end of line to allow wrapping of long lines. (by Rohan Lloyd; see
	"Folding long lines in scripts" on fink-devel)

2004-02-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Added "debug" mode to show what's going on while
	searching for various virtual bits.  (Good idea, Martin!)

2004-02-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: conditional_pkg_list: optimized initial field
	parsing and fixed consecutive puctuation replacement. Remembered
	to save value back to hash. Changed syntax to:
	  Depends: (string1 op string2) foo
	where op is one of (<< >> <= >= == !=) for string comparison or:
	  Depends: (string) foo
	where string must be non-null.
	
2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Wrote conditional_pkg_list which processes
	conditionals in Depends (and similarly formatted fields) according
	to 'Depends: (a b) foo', where foo is only a dependency if a and b
	are stringwise equal. Will probably need to bump max_info_level.
	Tested and seems to work, but not actually calling it from main
	code yet.

2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* Services.pm, Packages.pm, Validation.pm: Changed handle_infon_block
	from being a function in Services to being a class method in Packages.

2004-02-10  Daniel Macks  <dmacks@netspace.org>

	* FinkVersion.pm.in: Implemented max_info_level(): returns largest
	.info version this fink can handle. Initial value is 1 (same
	format as non-InfoN file).
	* Services.pm: Implemented handle_infon_block: Reprocess .info to
	account for it consisting entirely of a InfoN: multiline field. If
	N larger than max_info_level, warn and scrap the file.
	* Package.pm, Validation.pm: Call handle_infon_block after reading
	.info.
	
2004-02-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.1, and
	warn users that support will soon cease for non-gcc3.3 10.2.

2004-02-03  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: Only choose a splitoff if the candidates contain
	only one splitoff. Fixes bug reported by chris01 on irc.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implemented print_breaking_stderr, a wrapper around
	print_breaking that causes output to go to STDERR.
	* Package.pm: For all diagnostic/status messages from 'fink list',
	send to STDERR. For all that are not critical, don't output unless
	output is a  terminal (i.e., hide if a Unix pipeline).
	
2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Resuscitated RangerRick's idea from CVS r1.95 of
	adding line numbers to parser error messages.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm, Validation.pm: finished implementing
	splittoffN (etc.) passing to read_properties_var() and fixed
	quotation mark placement in its messages.

2004-01-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added second parameter to add_splitoff() for
	splitoff #, and pass it as part of $file to read_properties_var()
	so parsing-error error messages note which splitoff is broken.

2004-01-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if Version or Revision contain forbidden
	characters (according to Debian docs).

2004-01-26  Rob Braun  <bbraun@users.sourceforge.net>

	* Selfupdate.pm: rsync with the -r flag instead of the -a flag.
	the difference is that -r will not preserve ownership/groups,
	permissions, links, times, and device files.  None of this 
	matters for .info and .patch files, since there are no links
	or device files, and the ownership, permissions, and times
	on the server don't matter to the client.  However, we will
	continue using -a on the TIMESTAMP file to preserve the time
	on that.

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: If a package lists itself in its own Conflicts or
	Replaces, remove it from that list (needed for writing mutually
	exclusive variants).

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Added new $err_info parameter to expand_percent that
	will be printed if there's an expansion error. Remembered \n in
	that die to prevent stack backtrace. Doc-cleanup expand_percent.
	* PkgVersion.pm: Implemented new get_param_with_expansion and
	get_info_filename methods.
	* Package.pm, PkgVersion.pm: added $err_info to expand_percent calls.
	
2004-01-19  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Treat typo of %n in SplitOff:Package: as %N. Remove
	debugging.
	* PkgVersion.pm: Remove remnants of my _source_item stuff.

2004-01-16  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Consolidated common code for
	instantiating a package into a new Package->setup_package_object
	function. Moved Type inheiritance and %-expansion in Package there
	also. Evaluate SplitOff Package in SplitOff scope instead of
	parent scope. Added support for multiple language versions: 'Type:
	perl (5.6.1 5.8.1)' gives a clone of the .info that has
	each (single) Type.

2004-01-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Empirically determined that 79 chars is the
	maximum safe line length for DescDetail.
	* Package.pm: Dumb hack to keep emacs paren balancing happy (was
	interpretting # in a few lines before as comment symbol).

2004-01-13  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix for regex /$file/ not do what we want if
	$file is the literal filename when it contains regex
	metacharacters. (bugs #875876).

2004-01-12  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: params_matching() now defaults to case-insensitive.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* PkgConfig.pm: Improved get_source_items_count(). Improved
	construction of _source_items. Disabled construction of
	_source_items for now.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Removed antiquated prompt_selection(). Improved
	fink-code error checking by use of Carp::confess.

2004-01-10  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added get_source_items_count() and
	sanity-checking for get_source_items_list().

2004-01-10  Daniel Macks  <dmacks@netpace.org>

	* Base.pm: Added params_matching, a method to return the names of
	all parameters that match a passed regex.
	* PkgVersion.pm: Added _source_items, a ref to a list of refs to
	uniformly-keyed hashes of all info pertaining to each source for a
	package. Added accessor method get_source_items_list() to return a
	(deep) copy of this list.

2004-01-09  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: get_source: Do not return the default source name
	if there exists no source. Instead return 'none' as expected
	elsewhere. get_source_list and get_tarball_list return an empty
	list if there are no sources.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* CLI.pm: Fixed a bug in print_breaking: was treating an embedded
	newline as an ordinary entity (printable character), not adjusting
	the wrapping for starting a new line.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* Bootstrap.pm, SelfUpdate.pm: Swiched `cat` to Fink::Command::cat.
	* PkgVersion.pm: Improved check for failure when creating
	seg_addr_table file. Switched one system("mkdir") to &execute.

2004-01-08  Daniel Macks  <dmacks@netpace.org>

	* Validation.pm: Warning for DescDetail and DescUsage that will
	look bad in Terminal window (long lines and non-ASCII chars).
	Warning for oddly formatted Maintainer.

2004-01-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed resolve_depends code.
	* Engine.pm: Do not use BuildConflicts for packages which are not going to
	  be built!

2004-01-06  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Left this file out of the giant CLI commit.

2004-01-06  Max Horn  <max@quendi.de>

	* Engine.pm: Partially undid Justin's change from Dec 23 (revision 1.144).
	  Relatives of a package can't (and mustn't) be build dependencies of the
	  package, since they are built at *exactly the same time*.

	* Engine.pm: Fixed a case where fink would rebuild a package twice. Also
	  clarified some comments.

	* Validation.pm: BuildDepends and BuildConflicts are actually not valid in
	  splitoffs.

2004-01-05  Daniel Macks  <dmacks@netspace.org>

	* all: Moved CLI functions from Services.pm into a new CLI.pm package.

2004-01-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm:  Use eval{} instead of a subroutine to implement the 
	timeout  (and remove superfluous function stdin_timeout.)

2004-01-04  David HÃ¶hn <dmalloc@users.sourceforge.net>

	* Package.pm: Changed Storable method from store() to lock_store()
	This should help use phase out problems when a fink index tries to write
	almost at the same time

2004-01-03  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: Add a (non-exported) function stdin_timeout to
	prompt for input but timeout if no answer.  Use this to construct
	a (new) optional third argument to prompt_boolean which specifies
	a timeout interval.

	* Configure.pm: Use a 60 sec. timeout in the question being asked in
	choose_mirrors, when called from the fink-mirrors postinstall script.

2004-01-02  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Modified method get_splitoffs to return list of
	splitoff packages, not just names. No need for passing package
	name to method belonging to a package. Moved method to other
	accessor methods.
	* Engine.pm: Modification to use changed get_splitoffs method.

2004-01-01  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Added two methods to access lists of sources and 
	tarballs used by given package

2004-01-01  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* all: updated Copyright notice

2003-12-30  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm,Engine.pm,Mirror.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	Completed prompt_selection -> prompt_selection_new migration.
	* Services.pm: prompt_selection deprecated in favor of ..._new so
	don't export.
	
2003-12-29  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: prompt_selection_new(): forgot to deal with
	unspecified or invalid default choice.
	* Configure.pm: Switch from using prompt_selection to
	prompt_selection_new.
	
2003-12-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Type:splitoff is redundant: switch to checking
	for presence of parent link. Now okay to use Type in splitoffs
	(else inherits from parent). Added Type:none to clear.
	* Validation.pm: Allow Type:none. Allow Type and UpdatePOD in
	splitoffs.
	
2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: *don't* export "read_properties_lines".
	Instead, introduce new subroutines "read_properties_multival_var"
	and "read_properties_multival_lines", the first of which is exported.
	* Mirror.pm: use "read_properties_multival_var" when setting 
	default values for mirrors.

2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Mirror.pm: setting default values for rsync and sourceforge 
	mirror sets, as well as master mirror set, in case the mirror
	directory is absent or damaged.

2003-12-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: export "read_properties_lines"
	* Mirror.pm: set a default value for Master mirror, if config file 
	not present

2003-12-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Configure.pm: export "choose_mirrors", and enlarge the dialogue
	with users at the beginning of choosing the mirrors.  (This will 
	be used in the 	postinstall script of the fink-mirrors package.)
	Also check for the existence of mirror/_keys and mirror/_list,
	and bail with a warning to install fink-mirrors if these are not
	found.

	* Bootstrap.pm: don't install the mirror directory (or its files)
	in the fink package (this is being moved to the fink-mirrors
	package)

2003-12-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed fink list --help output since some of it was wrong.
	* Engine.pm: Fixed fink build only checking builddepends: this can't
	happen since -shlibs are needed at build time as well as other things.

2003-12-23  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Support %lV and %lv as raw and punctionation-free
	values of Type version string (if provided).
	* Package.pm: Support %lv in Package.
	* Validation.pm: Allow %lv in Package (for info filename check).
	
2003-12-23  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type java (version mandatory).

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type python, guile, ruby
	(version optional, except mandatory for python).

2003-12-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: move inject.pl code into Bootstrap.pm, and
	separate out the common code from inject.pl and bootstrap.pl
	into subroutines that can be used by both

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: All patch file tests now also applied to files
	used in PatchScript. Hardcoded /sw test fixed to skip diff
	context- and being-replaced lines.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Was only checking first line of .patch. Fixed.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Check for hardcoded /sw in patch file (as loaded
	by Patch, not as by PatchScript).

2003-12-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Gave prompt_selection_new more flexible default-
	choice behavior. Not gonna change API any more so okay to use.

2003-12-20  Remi Mommsen  <remigius.mommsen@cern.ch>

	* Engine.pm: Extended MatchPackageRegEx which resorts the
	candidate list so that packages matching the regex are at the top
	in case that multiple packages match the regex. 

2003-12-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Detect Java3D and Java Advanced Imaging

2003-12-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.2.0.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* PkgVersion,Validation.pm: Support for "Source: none" as synonym
	for "Type: NoSource".

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added error if there is a source or MD5 for type
	Bundle.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added errors if there is an MD5 without a
	corresponding source, if no MD5 and using the implicit/default
	source, or if there is a source or MD5 for type NoSource.
	
2003-12-17  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Added prompt_selection_new (like prompt_selection
	except parameters are less redundant and more logical). Rewrote
	prompt_selection to be just a wrapper around prompt_selection_new.
	
2003-12-16  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Remembered that Type doesn't always exist

2003-12-16  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Change to a more generic way of parsing perl
	version info from Type
	* Validation.pm: Change to a more structured definition of allowed
	Type values

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the warning about missing packages in multi
	depends line to still display but only at verbose 4

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Stop warning about missing packages in depends line
	if an other pkg in the expression is found to statisfy it.

2003-12-15  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Changed expand_percent to do the automatic %% => %
	with regexps instead of the @PERCENT@ sentinel

2003-12-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Made BuildConflicts effective, it doesn't just tell you
	 now, it's acctually remove and reinstall after the build.

2003-12-10  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed a problem in the dep engine where if a dep was
	installed but it's deb file was missing, fink would fail.

2003-12-10  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: If the package name is being truncated in list/apropos
	print an ellipses ("...") so that the user knows about it.

	* Selfupdate.pm: Don't try to su or chown to an undefined $username.
	
2003-12-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Rearranged the list of allowed fields and added
	some comments to make it easier to compare this list to the
	packaging manual.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding "fink splitoffs", shows parent and splitoffs in a
	package. Adding "fink showparent" which will return the parent package
	 of a package.
	* PkgVersion.pm: Adding sub get_splitoffs() has two switches, to
	include self in list and include parent.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Properly fixed essential and builddependsonly checks in
	cmd_remove.

2003-12-07  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added force switch to resolve_depends so duplicate
	WARNINGS for the same depend won't show twice on sub depend checks.
	* Engine.pm: Added $forceoff switch to resolve_depends calls.

2003-12-04  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Fixed latest_version to continue past (and ignore)
	undef values rather than ignoring the rest of the passed list.
	* Services.pm: Finished PODifying the docs.

2003-12-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Add file-spec-pm, test-harness-pm, and test-simple-pm
	when bootstrapping under perl 5.6.x.

2003-12-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed double building issue in my dep check code. And
	removed a few more prints on secondary builds.

2003-12-03  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: made it so fink can't remove or purge essential pkgs
	and added warnings for it and not installed packages.
	Also made it so if the pkgs to be removed are the same as the ones
	in ARGV then don't ask first.  And added a print_breaking for long
	package listings. Disabled parent essential params on splitoffs.
	Changed BuildDependsOnly and Essential checks from has_param to
	param_boolean, in case it's there and set to false. Fixed the not
	installed warning, and prints and exits if nothing to do instead of
	dieing. Enabled the check each depend's depends before build.
	VERY EXPERIMENTAL please test.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Initial go at PODifying the docs.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Shuffled @EXPORT_OK to be in same order as the subs
	appear in the file.

2003-12-02  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Added --buildonly to fink list command, to list all
	packages that have a BuildDependsOnly tag. Added --buildonly to
	remove and purge as well. And Fixed fink list with virtuals, so
	if is_virtual returns 2 treat like normal pkg in listing. Added
	initial BuildConflicts code.
	* Package.pm: Fixed is_virtual so new virtuals (as of
	VirtPackage.pm) now work again, but since they have descriptions
	and version, they return 2.
	* PkgVersion.pm: Changed resolve_depends in order to enable
	proper BuildConflicts, now requires a second param "field".
	* validator.pm: Added BuildConflicts as a valid field.

2003-12-01  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Actually, my entry would fail (fink crash) if there
	were no map, not if no expanding was needed. Fixed. thesin's
	modification is a nice optimization, but seems orthogonal to the
	actual problem.

2003-11-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: With Daniel Macks entry on 11-26 expand_percent would
	fail if no expanding was needed.  Added a check to identify
	if it was needed to continue and if not just return the original
	string.

2003-11-27  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: test to see if the package being currently built
	violates any "BuildDependsOnly: true" directives, and if so,
	issue a warning.
	
2003-11-26  Daniel Macks <dmacks@netspace.org>

	* Services.pm, PkgVersion.pm: expand_percent handles %% using a
	temporary sentinel value, but that was defined in two different
	places (in expand_percent itself and in the caller of
	it). Consolidated into expand_percent.
	* Services.pm: Factored definition of a constant string out of a
	tight loop.

2003-11-25  Michael G Schwern <schwern@pobox.com

	* Config.pm: new_with_path() now takes default parameters.
	* Services.pm: read_config() now takes default parameters to pass
	through to Config->new_with_path().

2003-11-25  Michael G Schwern <schwern@pobox.com

	* Config.pm: Error message wrong when Basepath not in config file
	or config file missing entirely.  Tested.
	
2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Re-improved early-escape from recursive percent
	expansion. The main regex isn't much heavier than this check, so
	we lose in the case where multiple passes are needed but avoid
	loop overhead in the more common one-pass-needed case. May as well
	leave my "|| last" (helps sometimes, doesn't hurt, will avoid
	wheel spinning if we go to higher pass-count limit and have
	unknown %vars).

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* Command.pm: rm_rf() not returning false when it deletes some 
	directories but fails to delete another.  Tests were incorrect.

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Fixed ":ALL" target.  Changed from using
	/bin/cat to Fink::Command::cat().  Tested.

2003-11-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed conffiles with new expansion code, needed to
	move the trailing new line to be added after calling expand_percent.

2003-11-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Changed the X11 tracking to return major.minor.mini
	if using an XFree86 snapshot (ie, if the version has more than 3
	components)

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Improved early-escape from recursive percent
	expansion.

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Conversion to using only print_breaking
	(removal of print_breaking_prefix/print_breaking_twoprefix)
	changed the meaning of $prefix1 and $prefix2 (defined
	vs. logically true). Changed it back.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Removing hard coded @BASEPATH@.  Using Fink::Config
	instead.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Documenting Fink::FinkVersion.  Removing module
	template cruft.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* Config.pm: Document exported variables.  Document that you need
	a Fink::Config object for them to work and that its a Bad Idea
	to have two Fink::Config objects.

2003-11-20  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Service.pm: Make is so expand_percent ignores commented line so
	we can have % in comments.  Also added the ability to have escaped
	%, e.g. when trying to patch using perl -pi on a sprintf string that
	uses %s or such.
	* PkgVersion.pm: Added expansion for %%.

2003-11-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Don't generate prebinding references if the package
	is forcibly not prebound. (and some general cleanup and whitespace
	fixes)
	* Validation.pm: Added some missing Set* flags to the validation,
	related to LD and prebinding.

2003-11-19  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Adding initial code to add 'Installed-Size' to
	CONTROL, should be converted to a perl code instead of using du.

2003-11-19  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Package.pm (is_any_present): Add new subroutine, returns 1 if a deb
	is available locally, 0 if not.
	* Engine.pm (real_install): Allow use of a regex in fink.conf to auto-
	choose which package to install. When asking the user to make a choice
	set the selection to an available deb, if there is only one.

2003-11-18  Michael G Schwern  <schwern@pobox.com>

	* Package.pm: Write the new index atomicly to avoid a corrupted
	index should fink be killed in the middle of reindexing.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Fix a problem with syncing the crypto/ directory,
	  since it doesn't have subdirectories like main/ does.

2003-11-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: When installing into a pre-release darwin 7.x, say
	that it "should work".

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More changes, split up system-xfree86 into
	  system-xfree86, system-xfree86-shlibs, and system-xfree86-dev.

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Totally reworked the provides of the system-xfree86
	  virtual packages, so that "x11" is provided when the shared libraries
	  and an X server are present, and "x11-dev" is provided when headers
	  and development libraries are present.  This will require changes to
	  the BuildDepends: of all x11-using packages.  This is a major change
	  (considering how many files it will end up touching) so this change
	  is going into HEAD.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add --delete since it is not implied by 
	  --delete-after on older versions of rsync (10.2).

2003-11-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: reverted the "Simplified code" changes from 11-12,
	since they were apparently causing extra carriage returns in
	prompts to the user.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More checks for X version for system-xfree86.
	  this will find 4.3.99 cvs without having to run -version.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Change the thread test to use grep -a, so as not to
	  depend on nm from the dev tools.

2003-11-14  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Adding insufficient argument checks to cp and mv
	(from Paul Gaborit, see 841381).  Tested.

2003-11-14  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Fixed typo in my previous change.

2003-11-13  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Small tweak to UpdatePOD in case two files are
	being catted together
	* PkgVersion.pm: Revise get_perl_dir_arch() and the places where it
	is used, correcting some errors in UpdatePOD in case of Type: perl,
	and guaranteeing that the correct perl command is used when needed.

2003-11-13  Max Horn  <max@quendi.de>

	* Services.pm: Improve the caching of version_cmp in Fink::Services; 
	some cleanup (Patch #841031).

2003-11-13  Justin F. Hallett  <thesin@users.sourceforge.net

	* PkgVersion.pm: Fix UpdatePOD when using a Custom build/installscript
	as it may not be installing into the normal $perlarch dir.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Make sure functions fail quietly and with the
	proper return value and errno setting.  Tested.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Created to replace execute() of common shell commands
	like rm -rf and mkdir -p.  Tested.

2003-11-12  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Clarified "unable to parse..." warning message.

2003-11-12  Michael G Schwern <schwern@pobox.com>

	* Package.pm: Does not use execute() so don't import it from
	Fink::Services.

2003-11-12  Max Horn  <max@quendi.de>

	* Services.pm: Simplified code a bit.

2003-11-12  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add rsync mirroring fallback with prompting, similar
	  to distfiles mirroring/fetching.

2003-11-12  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Changed warnings about fields in splitoffs to say
	in which splitoff they occurred (could be multiple splitoffs, and
	some warnings could occur in the parent as well).

2003-11-11  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: "uninitialized value in chomp" warning below
	  because get_perl_dir_arch()'s attempt at reading the system perl's
	  Config.pm wasn't working.  Forgot a print.  chomp() now unnecessary.

2003-11-11  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Recurse down multiple directories, to get 
	  libs/perlmods

2003-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Validation.pm: Allow 'Homepage' field in splitoffs. 
	  This actually matches what our packaging docs say.

2003-11-11  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Selfupdate.pm: Minor bugfix. Now properly does su to the user.
	* PkgVersion.pm: Fix "uninitialized value in chomp" Seems to be popular
	  these days.
	
2003-11-10  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add a TIMESTAMP check when using rsync.
	* SelfUpdate.pm: Remove support for a Distribution in Trees.
	* SelfUpdate.pm: Do rsync updates with a single rsync command.

2003-11-10  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: Change below broke get_perl_dir_arch(), didn't
	  parse the output from -V:archname.  Fixed by using Config.pm
	  instead.  Tested.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage: fall back to XFree86 -version if we can't figure
	  it out from man pages.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: No point in continuing to search through the path if
	  we have a match.
	* Package.pm: Fix version spec checking to allow epochs.
	* PkgVersion.pm: Ask perl what it's arch directory is, rather than
	  assuming based on version.

2003-11-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Make the check for package-name in Description:
	case-insensitive.

2003-11-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Warn when Files: entries have / at the end (messes
	  up panther mv sometimes)

2003-11-09  Max Horn  <max@quendi.de>

	* Validation.pm: Minimal validation of splitoffs. This definitely should be
	  improved ASAP, though.
	* PkgVersion.pm: Propagate epoch to splitoffs.
	* Validation.pm: Improved validation of splitoffs. Check more fields for
	  hardcoded /sw.
	* PkgVersion.pm: Factored out duplicated perl handling code into a new
	  method get_perl_version_dir_arch().
	* Validation.pm: Allow type "perl 5.8.1". Allow "License" in splitoffs.
	* Package.pm, PkgVersion.pm, SelfUpdate.pm: Invoke 'find' as /usr/bin/find;
	  fixed potential data loss issue when volume/directory names contains
	  whitespaces.

2003-11-08  Max Horn  <max@quendi.de>

	* Services.pm: Remove trailing empty lines in heredocs (Bug #670712). Also
	  made .info parsing stricter, which discovers more illegal .info files.
	* Validation.pm: When checking whether a field contains the package name
	  or version, only report a warning if they occur as full words (and not
	  just as substring of a longer name/version).

2003-11-07  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Moved fink-prebinding environment-setting stuff
	  to the fink runtime so it doesn't sit in the users' environments.

2003-11-07  Max Horn  <max@quendi.de>

	* Engine.pm: Fix bug causing incorrect installation of 'relatives' when
	  rebuilding splitoff packages (Bug #645841).
	* Package.pm: Fink::Package %package_hash -> $packages (Patch #831573).
	* Base.pm, Config.pm: Fink::Config cleanup & documentation (Patch #832063).
	* Validation.pm: Validate emacs packages (Patch #748665).
	* Base.pm: Fink::Base docs and cleanup (Patch #832828).

2003-11-06  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support Mac OS X 10.3 / Darwin 7.0.0

2003-11-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* SelfUpdate.pm: Make this work with rsync-hfs.

2003-11-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Always regenerate the index on a
	"fink selfupdate".

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, FinkVersion.pm.in, NetAccess.pm,
	PkgVersion.pm, SelfUpdate.pm: just being pedantic, updating
	our external calls to system versions, for safety.

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: Bomb if Distribution isn't set.

2003-11-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Add polite feedback if a .deb is okay in analogy
	to behavior for .info (cf. exiting silently). (Patch #822456)

2003-10-31  Michael G Schwern <schwern@pobox.com>

	* Mirror.pm: Mirror doesn't have fetch_url or fetch_url_to_file
	functions, yet was exporting them.

2003-10-29  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: check for threaded X, and check for the file
	before trying to read the xterm man page.

2003-10-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: make system-xfree86 virtual complain if you're
	missing important SDK bits.  =)
    
2003-10-25  Mohammad A. Haque  <batmanppc@users.sourceforge.net>

	* Engine.pm: Patch 828653 fix fink cleanup and improve user feedback
    
2003-10-25  Justin F. Hallett  <thesin@users.sourceforge.net

	* Service.pm: Added an get_path function that is a perl version
	of the command util which, you give it a file name and it returns
	the first match in the path of that file with it's full path.
	* PkgVersion.pm: Changed which call in for perl$version to use
	new get_path function.

2003-10-24  Benjamin Reed  <rangerrick@users.sourceforge.net

	* SelfUpdate.pm: Modify the rsync command to only remove
	CVS directories in trees that are updated through rsync.

2003-10-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the "point" selfupdate method so that the
	version number information which it retrieves from the Fink
	website is specific to which distribution is the current one
	(e.g., whether we are running 10.2 or 10.2-gcc3.3).

2003-10-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed a problem with perlmodules where when
	PERL=<perlbinary> it would try and run ../<perlbinary> this is
	fixed by using the full path to <perlbinary>.

2003-10-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Test for the presence of gcc 3.3, and the correct
	version of gcc 3.3, in order to decide between the 10.2 and
	10.2-gcc3.3 distributions.

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm, Shlibs.pm:
	The shlibs code is giving trouble, so we move it to its own branch 
	again.  New branch is called "shlibs-20031018".

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Add an automatic dependency on the current version 
	of darwin, whenever building a package.  (This is so that packages
	which have MACSOX_DEPLOYMENT_TARGET set by default in 10.3, don't
	get built in 10.3 but then installed in 10.2 by accident.)

2003-10-18  Peter O'Gorman <ogorman@users.sourceforge.net>
	
	* VirtPackage.pm: New virtual package for gcc2 (needed for 10.3)

2003-10-17  Michael G Schwern <schwern@users.sourceforge.net>

	* Package.pm, Services.pm: Optimizations to speed up
	some common operations.

2003-10-17  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: Change default rsync host from 
	rsync://fink.opendarwin.org/finkinfo/ to
	rsync://master.us.finkmirrors.net/finkinfo/

2003-10-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, Configure.pm: Change the default verbosity level from
	"3" (high) to "1" (low)
	* Shlibs.pm: change the DEBUG output from the Shlibs package, to 
	output which is only shown at verbosity level 3

2003-10-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: make sure Trees line doesn't have absolute paths
	or ../'s in it.

2003-10-11  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* ChangeLog, Bootstrap.pm, Engine.pm, Package.pm, PkgVersion.pm, 
	SelfUpdate.pm, Shlibs.pm: merge in the "shlibs" branch from July
	
2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: make the gcc_select error a bit more user
	friendly.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Enable the Trees: hack for rsync'ing multiple
	dists inside a fink dists tree.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Check that a directory exists on the server
	before trying to rsync it.  Also some more quoting to make
	things a bit more sane.

2003-10-10  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm: PATH paranoia. Always use full paths here.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm, PkgVersion.pm, VirtPackage.pm: move the system
	  perl stuff from PkgVersion.pm to Services.pm so it can be used
	  by other things (and then use it in VirtPackage.pm to make a
	  system-perl virtual)

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: make sure get_sw_vers() is EXPORT_OK.
	* PkgVersion.pm: make sure we know what the system perl
	  version is on unversioned Type: perl info files.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: handle panther 5.8.1 perl modules properly.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Added some bounds-checking to paths in the
	dists tree and such for rsync, also changed all mkdir's to
	mkdir -p, and change ownership of files so that rsync can pass.

2003-10-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change for the 0.14.1 beta release:
	enables the 10.2-gcc3.3 and 10.3 trees

2003-10-05  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, SelfUpdate.pm: Further tweaks to the user interface 
	for selfupdate commands.  Also, ensure that the SelfUpdateMethod 
	conf option is properly reset when selfupdate-rsync is invoked.

2003-10-04  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* FinkVersion.pm.in, Selfupdate.pm: Give the user some choice of 
	update method; use a stamp-rsync-live file when using the rsync 
	method.
	
2003-10-02  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add updating of the VERSION file when using
	selfupdate-rsync.

2003-10-01  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm, Engine.pm:  Add selfupdate-rsync option for 
	updating via rsync instead of cvs.

2003-09-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Package.pm: reformat a few fields so that they can have
	carriage returns and such without confusing things

	* Services.pm: cleaned up some rare cases where uninitialized
	values can show up.

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: don't do update-prebinding on files that are
	actually linking to things in /usr/lib!

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm, VirtPackage.pm: Refactored the
	sw_vers code so it can be used for setting
	MACOSX_DEPLOYMENT_TARGET as well as making the virtual macosx
	package.  Also, set MACOSX_DEPLOYMENT_TARGET in packages that
	don't specify SetMACOSX_DEPLOYMENT_TARGET to the target arch
	unless it's 10.2 (special-cased to set to 10.1 for compatibility
	purposes).

2003-09-23  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: die if no md5 specified. You were warned!

2003-09-22  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support 10.2.8.

2003-09-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Fix regex parsing when unusual characters are
	in the filename.

2003-09-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement java virtuals.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement system-xfree86 as a list of provides,
	instead of the system-xfree86-foo packages.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Some cleanup/performance updates to the X11 detect.

2003-09-08  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* VirtPackage.pm: Autodetect X11 (I hope, maybe, Please test/fix)

2003-09-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Allow prebinding whenever the distribution is
	greater than or equal to 10.2-gcc3.3 .

2003-09-06  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change on the "test_10_3" branch: if
	this is run on 10.2, it will set up the 10.2-gcc3.3 distribution.

2003-09-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the way Type: perl works, it now can use
	ConfigureParams and makes ue of %c like normal builds, this will
	standarize how perlmodules and normal packages are packaged.

2003-08-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: fix regex for detecting OS X version

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: fix my mistake of using has_param instead of
	param_boolean like I should have the first time
	* Validate.pm: Added NoPerlType to valid field list and boolean list

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added NoPerlTests field to info file for Type: perl
	this will make it easier fo rthe maintainers to keep the pkgs compat
	since you will nolonger need to manually type the configure params to
	remove the make test proceedure.

2003-08-20  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: Print the expected an actual checksums when comparison
	fails. Saves me typing "md5 /sw/src".

2003-08-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Check gcc_select when the GCC field is present,
	and exit with an error if the wrong version of gcc has been selected.

2003-08-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Disable the prebinding code unless the distribution
	is > 10.2.
	* Bootstrap.pm, SelfUpdate.pm: Add gettext-bin to the bootstrap and
	update lists (in preparation for making it non-essential)
	* Bootstrap.pm: Move the code which enables the 10.3 distribution to
	a new branch, "test_10_3"
	
2003-07-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added second option to resolve_depends call to specify
	  the operation
	* PkgVersion.pm: enabled the second option checking in resolve_depends
	  to force dep reading from the info if rebuild is the operation

2003-07-17  Justin F. Hallett  <thesin@users.sourceforge.net>

	* shlibs.pm: removed my debug line, left RangerRick's for now
	* shlibs.pm: added more space filtering in the inject_shlibs sub
	* PkgVersion.pm: added verbosity level for output in 'resolve_depends'

2003-07-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Don't print the output of linking the
	-single_module test we only care about pass/fail.

2003-07-16  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added verbosity level for output for 'fink depends'

2003-07-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding 'fink depends' to give a list of expanded depends
	  good for maintainers since it'sll expand ${SHLIB_DEPS} if the pkg
	  is built.

2003-07-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, SelfUpdate.pm: Add bzip2-dev, gettext-dev, 
	libiconv-dev, ncurses-dev to the bootstrap and update lists

2003-07-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Shlibs.pm: Evil, scary voodoo to remove duplicates in dependency
	  specifications.  I tried to document the heck out of it, but it's
	  still pretty freakish.  Handle with care.  :)

2003-07-14  Max Horn  <max@quendi.de>

	* VirtPackage.pm: Explicitly check for the existence of 'what' and 'cc'
	before invoking them. This is necessary for the PDB, which runs on a
	non-darwin system currently, but also for any system which has no compiler.

2003-07-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Added new file to deal with all the shlibs functions
	* Bootstrap.pm: Added call to require_shlibs
	* Selfupdate.pm Added call to forget_shlibs and require_shlibs (in case
	  we use selfupdate to populate override.shlibs)
	* Engine.pm: added forget, and require for shlibs to enable auto index
	* Package.pm: removed a \n to clean up the output since the shlibs
	  index code is always called after the pkg index code
	* PkgVersion.pm: adding ${SHLIB_DEPS} replace code, had to ignore
	  ${SHLIB_DEPS} in resolve_depends
	* PkgVersion.pm: added check in resolve_depends for deb file, if deb
	  file call get_debdeps
	* PkgVersion.pm: added get_debdeps function to read the deps from a
	  deb file and return the comma delimited string

2003-07-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: switch from BSD tar to /bin/pax for the
	implementation of TarFilesRename.

2003-07-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm, Config.pm, Engine.pm, Package.pm, PkgVersion.pm, 
	Bootstrap.pm, Status.pm:
	Move all virtual package stuff to one file, add fink-virtual-pkgs file.

2003-07-05  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Revision of "Type: perl" to handle changes in 5.8.0
	(thanks to JF Mertens)

2003-07-04  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Check for hardcoded /sw in the scripts and set fields.

2003-07-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Removed some unnecessary debug stuff

2003-07-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm, Status.pm: added cctools-single-module
	  (cctools-<version>-1 is deprecated)
	  It is better to test capabilities than versions

2003-06-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm: Added checks for 10.3 tree
	* PkgVersion.pm: Adding RangerRick's patch for prebinding for 10.3 only

2003-06-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Bootstrapping with perl 5.6.1 also requires 
	storable-pm561.

2003-06-14  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Allow bootstrapping with perl 5.6.1; cleaned up code; show
	  more user friendly error message in case of an unknown perl version.

2003-06-13  Ben Hines <benh57@users.sourceforge.net>

	* NetAccess.pm: Support file:// and bare tarball names without choking
	
2003-06-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with perl 5.8.1 too

2003-06-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Clarify nesting too deep error.

2003-06-11  Justin F. Hallett <thesin@users.sourceforge.net>

	* Selfupdate.pm: added -q to cvs commands based on verbosity level
	from the config file and/or command line.

2003-06-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with either perl 5.6.0 or 
	perl 5.8.0

2003-06-07  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm:  Allow an essential package to have a 
	splitoff which is not essential.  (However, the parent of an 
	essential package must be essential.)  Uses a new virtual field 
	_ParentEssential.

2003-06-04  Chris Zubrzycki <beren12@users.sourceforge.net>

	* Engine.pm: Add fink list limit by maintainer or tree.

2003-05-26  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Fix alternate depends on splitoffs.

2003-05-23  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use full path to uname to prevent build problems.
	
2003-05-23  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Bootstrap.pm: Handle (Open)Darwin 6.6.

2003-05-23  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Allow <package>.info.

2003-05-16  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Cache arch to minimize uname calls.
	
2003-05-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check the .deb file for the presence of a .bundle
	in a non-versioned subdirectory of /sw/lib/perl5; if present, warn
	about a possible perl XS module installed incorrectly.

2003-05-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: Introduce new versioned variants
	of "Type: perl".  (Patch #725425)

2003-05-10  Max Horn  <max@quendi.de>

	* NetAccess.pm: Don't default to MasterFirst, but rather to MasterLast 
	  (using MasterFirst as long as the master mirror has not all files is
	  causing more pain than it helps).

2003-05-10  Rob Braun <bbraun@users.sourceforge.net>

	* PkgVersion.pm: When doing a fetch-* --dry-run, and the source
	  doesn't have a URL, ignore the entry.

2003-05-07  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: support 10.2.6
	
2003-05-07  Rob Braun <bbraun@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm,
	  Services.pm, Validation.pm: Remove hard coded references
	  to 'powerpc'.  (Patch #732058)

	* PkgVersion.pm, Validation.pm: Add %m for machine architecture
	  string expansion.

2003-05-04  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Added check_host and check_files, used by bootstrap.pl and
	  postinstall.pl (Patch #731980).

	* PkgVersion.pm: Explicitly invoke get_bsbase with its full qualified name,
	  Fink::Bootstrap::get_bsbase (Patch #731980).

2003-05-03  Max Horn  <max@quendi.de>

	* Validation.pm: Check for bad (DOS or Mac) line endings in .info / .patch
	  files, and also check for empty .patch files (Patch #731791).

2003-05-02  Max Horn  <max@quendi.de>

	* Validation.pm: Do not allow arbitrary license combinations, rather only a
	  fixed set (which we can extend as needed). See bug #670788. 

	* Services.pm: Warn if an .info file uses a field more than once (will soon
	  be turned into an error).

2003-04-26  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fix multi line Depends/BuildDepends fields, and slightly
	  improve detection of malformed dependencies. 

2003-04-15	Ben Hines <benh57@users.sourceforge.net>

    * SelfUpdate.pm: Allow distribution upgrades to work (append fake revision)
    
2003-04-08	Ben Hines <benh57@users.sourceforge.net>

    * Services.pm: Allow comments (#) in fink Script fields
    
2003-04-05	Ben Hines <benh57@users.sourceforge.net>

	* Many Files: Implement fink master mirroring (Patch #700260).
	  
2003-04-04  Max Horn  <max@quendi.de>

	* PkgVersion.pm (set_env): Fix for environment variables that contain a '='
	  in their value (fix by Daphne Pfister).

2003-03-30  Max Horn  <max@quendi.de>

	* Validation.pm: There are no NoSourceNDirectory fields (i.e. with a
	  number).

2003-03-20  Max Horn  <max@quendi.de>

	* PkgVersion.pm (run_script): Backup the environment before clearing it
	  via set_env; then after running the script, restore it.

2003-03-07	Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Add 'ignore-restrictive' option to "fetch-missing", 
	  to support creating fink mirrors.
	
2003-03-05	Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Add section to dpkg control file (should prevent "unknown
	  section" for unstable locally built binaries in dselect) and correct root
	  dir error typo.
	
2003-02-28  Max Horn  <max@quendi.de>

	* Package.pm: Reverting a "fix" from 2003-01-27 (no ChangeLog entry was
	  made) which causes the package DB file to grow ad infinitum (unless a
	  manual "fink index" is performed). A proper fix for the issue this was
	  meant to fix has yet to be added.

2003-02-27  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink list" output (some whitespaces were converted to
	  tabs but shouldn't have been).

	* All files: Changed from indent/tab style 2/8 (strange emacs style) to
	  the more common 4/4 style.

	* Engine.pm: Seperated the help texts for "fink list" and "fink apropos".
	  Also clarified and unified their wording.

2003-02-17  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm, Status.pm: provide virtual package for cctools (Patch #687178).

2003-02-16  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use /sbin/md5 for md5sums if present (Patch #675893).
	  
2003-02-16  Max Horn  <max@quendi.de>

	* Package.pm, PkgVersion.pm, SelfUpdate.pm, Services.pm: Added Ben Hines
	  patch for epoch support (Patch #607742).
	  
	* Validation.pm: Make package validator recognize the new Epoch field.

2003-01-29 Ben Hines <benh57@users.sourceforge.net>

	* Package.pm: Do not require storable to create index (Bug #676512).
	  
2003-01-28  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Engine.pm: Adjust dependencies when working with multiple
	splitoffs at the same time (Bug #641462).

2003-01-24  Max Horn  <max@quendi.de>

	* Package.pm: Carsten Klapp's patch to speed up search_comparedb and
	  update_db, which speeds up many fink commands a bit (Patch #674313).
	
	* Services.pm: Tiny optimization in expand_percent.
	
	* Validation.pm: Fix validation if not BuildPath is specified in fink.conf.

2003-01-23  Max Horn  <max@quendi.de>

	* Services.pm: Added Paul Gaborit's patch to speed up expand_percent and 
	  hence index building.

2003-01-22  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm, Package.pm: Match "fink list" & "install/remove/etc"
	  items case-insensitively (Patch #622663).
	  
2003-01-22  Max Horn  <max@quendi.de>

	* Various files: Applied Chris Zubrzycki's build directory patch which
	  allows the use of an alternate build dir (Patch #658682).

2003-01-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Allow a new license "Restrictive/Distributable"
	  to indicate that distribution of binaries is allowed even though
	  the license is restrictive.
	
2003-01-15  Max Horn  <max@quendi.de>

	* Validation.pm: Putting stuff inside /sw/src is illegal for a .deb,
	  but just containing /sw/src is fine (as long as it is empty).

2003-01-14  Max Horn  <max@quendi.de>

	* Engine.pm, Services.pm: Fixing problems with exit codes (Patch #662894).

	* Engine.pm: 'fink apropos' command now also matches the package name,
	  not just the package description (Patch #661169).

	* Services.pm: Added terminal width fix from patch #598402.

2003-01-13  Finlay Dobbie <finlay@users.sourceforge.net>

	* PkgVersion.pm (merge): Added warning to if we try to merge a 
	non-dummy package.
	
2003-01-12  Dave Morrison <dmrrsn@users.sourceforge.net>

	* all files: updated copyright notice to include 2003

2003-01-12  Finlay Dobbie <finlayd@users.sourceforge.net>

	* PkgVersion.pm: Fix splitoff dependency problem (Bug #641466).
	Also removed the really old "pkg <blah> version ###" text, finally.
	
	* Package.pm: Moved to custom find code for scan_packages. Hopefully
	safer, possibly slightly faster, but I doubt it.
	
2003-01-07  Max Horn  <max@quendi.de>

	* Validation.pm: Warn if MD5 field(s) is/are missing.

2003-01-05  Justin F. Hallett <thesin@users.sourceforge.net>

	* Engine.pm:  Added sub phase_purge

	* PkgVersion.pm:  Added sub cmd_purge and change fink purge to
	acctually do a dpkg purge

2003-01-02  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Services.pm:  One-liner fix to get rid of an undefined warning

2002-12-24  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Perl syntax fixes (thanks to Randal Schwartz)

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm:  Back out the proposed changes to default values
	for the environment variables CPPFLAGS, LDFLAGS, LIBRARY_PATH, and
	DYLD_LIBRARY_PATH, which have been moved to the CVS branch "isystem"
	for further testing.

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm:  Allow the MACOSX_DEPLOYMENT_TARGET
	environment variable to be set in Fink. (Patch # 652716).

2002-12-22  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Fix bootstrapping problem caused by giving full
	path-name to install-info.

2002-12-19  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Allow whitespace after here-document separators.
	
2002-12-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: Pass filename to read_properties_var to 
	  clarify here-document error.
	
2002-12-11  Benjamin Reed <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Added a key to the package object to track the
	"siblings" of a package.

	* Engine.pm: Added some code to check for sibling packages that are
	already installed or due to be installed, so that the user does not
	get asked to install something unless necessary (ie, if libungif-shlibs
	is already installed, it won't ask to choose between giflib and libungif).
	Also changed some of the other code to use the new "sibling" attribute
	from the PkgVersion.pm change above.

2002-12-04  Dave Morrison <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the test used during the non-CVS version of 
	fink selfupdate to check CURRENT_VERSION and download the file named 
	dists-###.tar.gz (rather than LATEST_VERSION and 
	packages-###.tar.gz)

2002-11-18  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Patch #608920: Add --keep-root-dir and --keep-build-dir.

2002-11-14  Justin Hallett <thesin@users.sourceforge.net>

	* Engine.pm: fixed scanpackage default section to use proper value.

2002-11-13  Max Horn  <max@quendi.de>

	* Engine.pm: Install build dependencies when doing a rebuild (bug #637689).

2002-11-13  Chris Zubrzycki <beren12@users.sourceforge.net>

	* PkgVersion.pm: Fix the path of install-info. It is in %p/sbin, not %p/bin

2002-11-12  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Apparently the install-info of texinfo is incompatible with
	 the dpkg one. Hence we reverse the previous change and instead harcode the
	 location of our install-info.

2002-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Use "--info-dir" instead of "--infodir" as argument to 
	  the install-info command (this should prevent problems with texinfo
	  version of install-info).

2002-10-31  Max Horn  <max@quendi.de>

	* Engine.pm: When we we build a package which we are not going to install
	  (e.g. as consequence of a 'fink build foo'), only resolve the build time
	  dependencies, not install-time deps (currently this only affects splitoffs
	  which depends on a sibling).

	* PkgVersion.pm: Build deps of a splitoff are equivalent to the parent's.
	
	* PkgVersion.pm: Fixed typos, clarified/extended some comments.

	* PkgVersion.pm: Set DYLD_LIBRARY_PATH, too. This  allows libtool to find
	  its *.la files in /sw/lib again.

2002-10-27  Max Horn  <max@quendi.de>

	* Mirror.pm: Never use "retry same mirror" as initial default choice if 
	  there are other mirrors.
	
	* PkgVersion.pm: CPPFLAGS=-no-cpp-precomp + CPATH doesn't work correctly
	  with tar and probably many other packages. With -isystem, everything seems
	  fine now.

2002-10-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed bootstrap (my last change broke it).

	* PkgVersion.pm: Instead of the old default values for CPPFLAGS and LDFLAGS,
	  we now set CPATH and LIBRARY_PATH to point to the Fink include/lib dirs.
	  This should avoid many problem encountered in the past. However, it may
	  also break a few existing packages.
	  Since the Apple C preprocessor seems to ignore CPATH, we also set 
	  by default -no-cpp-precomp (many packages need this anyway).

	* Validation.pm: recognize (No)SetCPATH and (No)SetLIBRARY_PATH fields.

2002-10-21  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Fix typo in nesting too deep error.
	
2002-10-15  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed a wrong 'circular dependencies' error caused by my 
	  recent changes.

2002-10-14  Max Horn  <max@quendi.de>

	* Validation.pm: Recognize Tar??FilesRename field

	* Engine.pm: Once more install all splitoffs with a single call to dpkg
	  (this is done to avoid certain update troubles with splitoffs).

	* PkgVersion.pm: Allow percent expansion in CustomMirror field
	 (patch #621175, thanks to Ben Hines)

	* Engine.pm: Rewrote parts of real_install to hopefully make it cleaner,
	  easier to understand, and less buggy when it comes to splitoffs.

2002-10-12 Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When a Shlibs field is present, write its contents 
	into DEBIAN/shlibs when building the deb

	* Validation.pm: Added Shlibs field
	
2002-10-10  Max Horn  <max@quendi.de>

	* Validation.pm: Added RunTimeVars field; warn if description ends with "."

2002-10-04  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: Another small patch to the splitoff code.  This patch
	  changes the checking for flags (reinstall, rebuild, etc.) to match
	  the code used for installing the primary package, and it makes
	  sure that the parent splitoff is the last one installed on the
	  dpkg command-line to fix goofy dpkg ordering issues.

2002-09-28  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm, NetAccess.pm: Patch 612681: Allow "continue" 
	  for bad MD5 during "fink install... "

	* PkgVersion.pm: Fix Axel problem with partial downloads

	* PkgVersion.pm: Change some tarballs to "file"s

2002-09-28  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: small patch to fix 'fink rebuild' and possibly some other
	  buglets that could sneak through.  If a package has splitoffs, it was
	  sometimes getting marked as "already activated" even if it was set to
	  be explicitly reinstalled.

2002-09-25  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: fixed so that the rest of a splitoff doesn't get
	  reinstalled if just one package from the splitoff is being installed

	* PkgVersion.pm: fixes the get_fullname bug when a dependency
	  doesn't exist

	* PkgVersion.pm: moved the code that checks for existing versions
	  in the package tree when resolving dependencies -- in some cases
	  it could die because a package that wasn't supposed to exist was
	  getting marked as being there

2002-09-25  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Patch #614133: fix gnome mirror

2002-09-19  Max Horn  <max@quendi.de>

	* Engine.pm, Package.pm, PkgVersion.pm: Patch #610249: fix for the 'node 
	  exists' bug (bug #60016)

2002-09-08  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm: adds $distribution (read from the config file) as
	  an exported item

	* SelfUpdate.pm: now checks out the "dists" CVS module rather
	  than the "packages" one (still as the "fink" directory).  
	  This contains a "10.2" subdirectory.  Users using 10.1 also 
	  get a second checkout: "packages/dists" is checked out as 
	  "fink/10.1".

	* Validation.pm: added the new "gcc" field
	
2002-08-21  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink remove" command

2002-08-19  Max Horn  <max@quendi.de>

	* Engine.pm, PkgVersion.pm: Changed the data path for "fink remove" a bit

	* Engine.pm, PkgVersion.pm: Patch #596239 (fink splitoff install changes)
	  incorporated, improves splitoff handling

	* Validation.pm: Added JarFiles and TarFilesRename fields.

2002-08-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Enhanced how the Files field (in splitoffs) is handled:
	  if the given path starts with a slash, we treat it as relative to %d/%D
	  otherwise as relative to %i/%I (as we do currently anyway).
	
	* Services.pm: Fix for bug #545155 (it was possible to cause infinite
	  recursion during percent expansion).

2002-08-10  Max Horn  <max@quendi.de>

	* SelfUpdate.pm: Only force a second rebuild of the package database, and 
	  also only restart Fink if the package manager is being updated.

2002-08-05  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Improved the "fink cleanup" command to also clean
	  files in /sw/src (only files not directories - removing directories in 
	  /sw/src is dangerous as it can interupt running builds etc.)

	* Mirror.pm: Don't use mirror timestamp as a mirror (Bug #563182).

2002-08-04  Max Horn  <max@quendi.de>

	* Config.pm, Configure.pm: Fixed verbosity level selection.

	* PkgVersion.pm: Patch #588476 (Java support) by Sylvain Cuaz.

	* Fixed bug #548373 (package DB read thrice). It is not only read twice
	  (the new package manager may support new features, and thus must rebuild
	  the database once more)

	* Engine.pm: Patch #588705: Automates passing on the options
	  (by Sylvain Cuaz)

2002-08-03  Max Horn  <max@quendi.de>

	* Services.pm: Fixed read_properties_multival, it was broken by the
	  RuntimeVars patch.

	* PkgVersion.pm, Services.pm: Patch #579210: RuntimeVars field added
	  (thanks to Sylvain Cuaz for this)

2002-07-31  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Small fix to Configure.pm for the verbosity level selection,
	  which was reported not working. Should be fine now.

2002-07-28  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Added /sbin and /usr/sbin to the clean env since some pkgs need
	  stuff like chown or chmod to install properly.

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Changed spacing in fink list easier to use with awk or cut
	* added a space before pkg list for better seperation of info

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  But COLUMNS needs to bet exported in init.{csh, sh}

2002-07-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Temp Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  Need better fix in future, maybe read $ENV{COLUMNS}

2002-07-25  Max Horn  <max@quendi.de>
	
	* PkgVersion.pm: Fixed Bootstrap (use /usr/bin/gnutar if %p/bin/tar is missing)

	* Engine.pm: Little fix that ensures Fink runs even if not on a terminal.
	
2002-07-24  Max Horn  <max@quendi.de>

	* Incorporated patch #504498 by Justin F. Hallett which adds the
	  TarFilesRename and TarNFilesRename field.

	* Incorporated patch #577882 by Sylvain Cuaz which cleans the environment 
	before building packages.

2002-07-22  Max Horn  <max@quendi.de>

	* Various files: Applied Justin's multi-level verbosity patch.

2002-07-06  Max Horn  <max@quendi.de>

	* Package.pm (scan_all, update_db): Fixed index'ing bug.

2002-06-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Added a "fink cleanup" command, still unfinished,
	but already usable to clean up .deb files.

2002-06-08  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Added apt-shlibs to the list of packages that are
	automatically installed during bootstrap.
	
	* Engine.pm (cmd_scanpackages): Made apt-shlibs an "important" package.

	* Package.pm: Implemented use_cache flag - can later be used to add an
	option to turn off the package cacher temporarily.
	
	* SelfUpdate.pm (finish): Include apt-shlibs in the list of packags that are
	updated upon a selfupdate.

2002-05-28  Max Horn  <max@quendi.de>

	* Services.pm (file_MD5_checksum): Fixed bug caused by certain special
	characters occuring in filenames passed to this function.

2002-05-28  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_patch, phase_compile, phase_install): Now use the new
	run_script method; single-shell scripts are now actually usable inside
	InstallScript and PatchScript.

	* PkgVersion.pm: New method run_script that encapsulates running a script.

2002-05-27  Max Horn  <max@quendi.de>

	* Validation.pm: Accept Source-MD5/SourceN-MD5 as legal fields.

2002-05-26  Max Horn  <max@quendi.de>

	* Engine.pm (do_real_list): Fixed bug that occured when output of 'fink list'
	was not going to a terminal and --width=auto was specified.

2002-05-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added Source-MD5/SourceN-MD5 fields.

	* Services.pm: Added file_MD5_checksum function.

	* PkgVersion.pm: Make use of the new execute_script function.

	* Services.pm: Added execute_script function (based on patch #534121 by
	Benjamin Reed).

2002-05-25  Alexander Strange <MrVacBob@mac.com>

	* SelfUpdate.pm (setup_direct_cvs): The hardlink-support test works now.

2002-05-23  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Under certain condition, splitoffs could have 
	been activated more than once. This problem fixes this.

2002-05-16  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed 'fink rebuild' to honor BuildDepends.

2002-05-16  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Fixed bootstraping (YASB).

2002-05-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_scanpackages): Fixed very stupid bug.

	* Validation.pm (validate_info_file): missing description field now is an
	error instead of a warning.

2002-05-05  Max Horn  <max@quendi.de>

	* PkgVersion.pm (enable_bootstrap, disable_bootstrap): fixed for splitoffs
	(thanks to Sylvain Cuaz for this patch).

2002-05-04  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_tarball): Replaced prdownloads URL with mirror 'sourceforge'.

2002-05-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm (resolve_depends): Fixed bug that made building splitoffs that 
	depend on their master impossible (affects kdebase package).

2002-05-01  Max Horn  <max@quendi.de>

	* PkgVersion.pm (get_description): Don't display DescPort and DescPackaging,
	they are unimportant for the avarage user and developers must look at the
	.info file anyway.

2002-04-25  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed bug #546315

2002-04-19  Max Horn  <max@quendi.de>

	* Bootstrap.pm, Engine.pm, SelfUpdate.pm: Made storable-pm an "important"
	package like apt, i.e it will be installed during bootstrap and updated on
	on selfupdate.

2002-04-15  Max Horn  <max@quendi.de>

	* all: updated copyright notice.

2002-03-31  Max Horn  <max@quendi.de>

	* Package.pm: Now works again if the Storable perl module is not installed.

2002-03-31  Finlay Dobbie <finlayd@users.sourceforge.net>

	* Package.pm: Added support for caching of info files.
	
	* Engine.pm: Added an index command to update the cache.
	
	* SelfUpdate.pm (do_finish): added hook to update package cache.
	
2002-03-26  Justin F. Hallett <thesin@southofheaven.net>

	* PkgVersion.pm: Fixed Type: perl to install the execs into
	the proper dir and not directly into BASEPATH.

2002-03-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm: added get_tree function
	
	* NetAccess.pm (download_cmd): Added another download method, "axel"
	(thanks to Alexander Strange)

2002-03-19  Max Horn  <max@quendi.de>

	* Config.pm (initialize): No macosx pseudo package if we are not on
	Mac OS X!

	* Status.pm (initialize): Fixed macosx version detection on Darwin
	(obviously there is no Mac OS X version on a pure Darwin system)

2002-03-16  Max Horn  <max@quendi.de>
	
	* PkgVersion.pm (resolve_depends): Yet another attempt to fix splitoff
	build dependencies, hopefully more succesful this time.

2002-03-16 Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm: Added "SplitOff" to the list of known fields, and 
	parsing for SplitOff2-SplitOff9

	* Engine.pm: When fink prompts users for a decision about a
	dependency, it now displays the Descriptions of the packages involved
	in the decision.

2002-03-16  Max Horn  <max@quendi.de>
	
	* Validation.pm: Added "BuildDependsOnly" to the list of known fields
	
	* PkgVersion.pm (resolve_depends): Fixed this so that splitoffs and
	splitoff masters always return the same (correct) build dependencies.
	
	* PkgVersion.pm (add_splitoff): Removed annoying debug output ("Found a
	splitoff")

	* Services.pm (read_properties_lines): Handle nested heredocs
	correctly, and if errors are encountered, once more output the
	affected filename.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm (do_real_list): Don't read package info first, wait and
	see if it is needed. Fixed a mistake in the help text.

2002-03-13  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_build): Fix so that root-dirs of splitoffs are
	properly removed again.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm: Support for options in apropos and list commands.

	* Services.pm: Added a get_term_width function.

2002-03-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_apropos): Fixed apropos commands for strings like "gtk+"

2002-03-07  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fix to make rebuilding splitoffs and splitoff
	master packages work correctly.

	* PkgVersion.pm (initialize): Expand percents in even more fields now:
	Suggests, Enhances, Recommends and Pre-Depends.
	(expand_percent_if_available): First converts field parameter to lower case.
	(phase_install): Fixed some issues with the Files field, and changed the
	order in which it is processed (now comes before DocFiles, not after)

2002-03-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Multitude of changes, implementing initial splitoff 
	support. Percent expansion is now done in all dependency related fields.

	* Package.pm (inject_description): Return the created PkgVersion object
	to the called. Used by splitoff code

	* Services.pm (read_properties): Split this function, creating two new
	called read_properties_var and read_properties_lines, which take a text
	variable / a list of strings, instead of a file. Used by splitoff code.

2002-02-23  Max Horn  <max@quendi.de>

	* NetAccess.pm (fetch_url_to_file, download_cmd): Allow the user to
	resume partial downloads.
	
	* NetAccess.pm (download_cmd): Added 'DownloadMethod' field to fink.conf
	(thanks to Christian Swinehart).

	* NetAccess.pm (download_cmd): If we use curl, make sure it treats 
	error 404 properly, i.e. fail instead of downloading the error page
	(thanks to Joseph Bauer).

	* Engine.pm (, cmd_fetch_allcmd_fetch_all_missing): keep going even if a
	single file could not be downloaded. (thanks to Randal L. Schwartz). 

2002-02-01  Max Horn  <max@quendi.de>

	* Validation.pm: deb file validator now warns if files are installed
	outside of /sw.

2002-01-27  Max Horn  <max@quendi.de>

	* Validation.pm: Warn on unknown licenses.

2002-01-26  Max Horn  <max@quendi.de>

	* Validation.pm: Many more problems are detected now

	* Engine.pm (restart_as_root): Pass on more options to new instance

	* *.pm: Changed to use new is_verbose() function to determine verbosity
	
	* Config.pm (is_verbose): New function, returns true if verbose mode is on

	* Validation.pm: Only be verbose in verbose mode

	* Validation.pm: Warn on missing license field

2002-01-11  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: If /sw/fink/VERSION is missing, now tries to look
	at the old /sw/etc/fink-release file instead.

2002-01-10  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: moved fink-release from /sw/etc to /sw/fink and
	renamed it to VERSION to match with other modules

	* SelfUpdate.pm: fixed selfupdate, it would hang when trying to
	uncompress the package tar ball.

2002-01-05  Max Horn  <max@quendi.de>

	* Validation.pm: fixed stupid mistake

	* Validation.pm: Added /sw/lib/locale to list of deprecated directories;
	added some new fields to list of allowed fields (not yet used)

2001-12-28  Matthias Neeracher <neeracher@mac.com>

	* Package.pm: Added %package_hash which speeds up some operations
	enormously.

2001-12-27  Max Horn  <max@quendi.de>

	* Config.pm: Added $darwin_version and $macosx_version, reflecting
	the kernel/system versions.

	* Status.pm (initialize): Added pseudo packages 'darwin' and 'macosx'
	which can be used for dependencies on specific kernel/system versions.

2001-12-23  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_install): Fixed bug occuring when removing the
	last 'perl' type package using UpdatePOD.

2001-12-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Package.pm: Allow '+' in package names.

2001-12-20  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_direct_cvs): Fixed CVS updating for core developers
	(CVS_RSH now always is set to 'ssh').

2001-12-12  Justin F. Hallett  <thesin@southofheaven.net>

	* PkgVersion.pm: Added UpdatePOD field, and added value "Perl" for
	the "type" field to better support perl packages

2001-12-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_remove): All packages to be removed are now passed
	at once to dpkg, thus taking advantage of the advanced dependency
	resolving mechanism of dpkg.

2001-12-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added percent expansion for SourceRename fields

2001-11-06  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (process): Get rid of the funky "Done." message.

2001-11-04  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (setup_direct_cvs): Made the File::Find routine
	more robust. Should be able to handle exotic file names now.

2001-11-02  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: Major rewrite. Now gives the user the choice
	between tracking point releases (the usual packages-#.#.#.tar.gz
	procedure) and setting up direct CVS updating.
	* Engine.pm: Added a selfupdate-cvs command.

2001-11-01  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm (new_from_field): Disabled the case for leaving out
	the key in custom mirror lists; it doesn't work anyway because the
	URLs themselves also contain colons. We'll need another separator.

2001-10-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Make "package not found"
	non-fatal if there are alternatives.

2001-10-20  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Let the user pick one alternative when
	resolving dependencies with virtual packages.

2001-10-18  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (restart_as_root): Propagate the "--yes" option when
	restarting as root.

	* Services.pm (prompt, prompt_boolean, prompt_selection): Check
	the "dontask" a.k.a. "--yes" option and use the default value
	instead of prompting the user when set.

	* Config.pm: Added infrastructure to propagate command line
	options: set_options() and get_option().

	* Engine.pm (process): Be more helpful when the user entered an
	unknown command (contributed by Justin Hallett).

2001-10-17  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm: New class that handles both named and package-local
	mirror site lists. Retrying is handled more intelligently.
	* NetAccess.pm: Another major overhaul. Handling of mirrors has
	been moved to the new Mirror class. That greatly simplified the
	fetch_url_to_file routine.
	* PkgVersion.pm: Use the new Mirror class to handle package-local
	mirrors. The mirror list is parsed on the fly when it is needed.

	* Engine.pm (process): Added a "this command needs root
	privileges" flag. Minor restructuring.
	(restart_as_root): New function which re-executes fink as root,
	passing the current command. Now knows about su if configured.

	* FinkVersion.pm.in: Made independent of Fink::Config. The
	installation path is now hardcoded during installation, like with
	fink.in.

2001-10-14  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (version_cmp): Hopefully get it right this
	time. dpkg implicitly separates version and revision before
	comparing them. As a result the change to fink's comparison
	function that should fix openssh's version ordering broke
	openssl's ordering.

2001-10-13  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (filename): More general solution to handle mirror:
	URLs that don't contain a slash.

2001-10-10  Max Horn  <max@quendi.de>

	* Service.pm (filename): Handle fileanames with the mirror: syntax
	correctly (was broken).

	* PkgVersion.pm (initialize): Parse the new CustomMirror field
	(fetch_source): pass the custom mirror list to fetch_url_to_file

	* NetAccess.pm: converted tabs to spaces
	(fetch_url_to_file): some  clean up, now handles "custom" mirrors,
	code that determines the download cmd moved to a separate function
	so that it will be easier to enhance this.

2001-10-09  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm.in (pkginfo_version): New function to evaluate
	the stamp files for package descriptions.
	* SelfUpdate.pm (check): Use the new pkginfo_version() instead of
	distribution_version(). Stop dead when CVS updating is
	detected. Minor text and code fixes.

	* Services.pm (version_cmp): Changed the version comparison to
	match that of dpkg exactly.

	* SelfUpdate.pm (check): Suppress inject.pl's user info message.

2001-10-07  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_tarball): Handle the new SourceRename and
	Source#Rename fields.
	(fetch_source): Use get_tarball and fetch_url_to_file to handle
	on-the-fly renaming. Disabled verbose error messages, failures are
	handled by fetch_url_to_file. Added tries parameter (passed on to
	fetch_url_to_file).
	(phase_unpack): Offer re-downloading when unpacking fails. Let tar
	handle gzip-compressed files to catch more errors (the shell pipe
	apparently only returns the last command's error code).

2001-10-05  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm: Major overhaul. New function fetch_url_to_file
	allows a target file name to be specified. fetch_url calls through
	to the new function. mirror: URL's are handled
	transparently. After obvious failures fetch_url_to_file offers the
	user to retry the same server or a randomly chosen mirror.
	* Services.pm (expand_url): Removed mirror expansion code.
	* PkgVersion.pm (fetch_source): Don't use expand_url, this is now
	handled transparently by fetch_url.

2001-10-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Make sure the directory we're
	scanning does exist.

2001-09-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): New fields UpdateConfigGuessInDirs
	and UpdateLibtoolInDirs to copy the replacement files directly
	into a list of subdirectories.

2001-09-21  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Create a small README for bundle
	packages - dpkg doesn't like empty packages.

2001-09-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: More protection against unexpected white space.

	* Services.pm (collapse_space): New function to collapse all white
	space in a string into a single space. Useful to eliminate
	newlines in fields that shouldn't have any.

2001-09-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_binary_depends): Convert newlines to spaces.

2001-09-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Include build-time dependencies
	when requested (new field BuildDepends).
	* Engine.pm (real_install): Check build-time dependencies if the
	package is going to be built.

2001-09-12  Max Horn  <max@quendi.de>

	* Engine.pm: Added 'apropos' command analog to the Unix 'apropos'
	
2001-09-11  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (check): Adapted to the new structure, check
	against the distribution version.

	* FinkVersion.pm.in: Added functions to retreive package manager
	and distribution versions.

	* Services.pm: Resolved circular dependency between Services and
	Config.

2001-09-09  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (read): Make non-existence of the dpkg status file
	non-fatal.

	* Package.pm (get_matching_versions): Implemented the version
	comparisons supported by dpkg.
	* PkgVersion.pm (initialize): Removed special handling for the
	Depends field.
	(get_depends): Removed, not needed any more.
	(resolve_depends): Rewritten to allow versioned dependencies and
	alternatives.
	(get_binary_depends): New function to generate dependencies for
	the .deb.
	(phase_build): Use get_binary_depends for the Depends field. Added
	Recommends, Suggests, Enhances and Pre-Depends.

2001-09-07  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Create dpkg status area earlier.

2001-09-06  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (list): Added list() method to retreive the whole
	list, independent of installation status.
	* Package.pm (scan_all): Get list of known packages from dpkg and
	merge it into the info read from files.
	(inject_description): New function to centralize creation of
	version objects.
	* PkgVersion.pm: Added checks for dummy packages created from the
	dpkg status file.

2001-09-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Fixes to section and priority
	determination.

	* Config.pm (initialize): Bail out if Basepath is not set in the
	config file.

2001-09-03  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm: Removed obsolete FindBin import.

	* Package.pm: Enable on-demand loading of package descriptions
	through require_packages().
	* Engine.pm: Use require_packages() for on-demand loading of
	package descriptions. Fixed the flag for some commands. Adapted
	the rescan command.
	* Bootstrap.pm: Use require_packages() instead of cmd_rescan().
	* SelfUpdate.pm: Use require_packages() to reload package info
	after update.

	* Engine.pm: Load specialized modules on demand only.

2001-09-03  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Fixed bootstrap by forcing the package descriptions
	to be read in.

2001-08-31  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Let curl follow redirects.

2001-08-29  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Support curl as well as wget.

	* Configure.pm (configure): Passive FTP is now the default.

	* PkgVersion.pm (phase_install): Added DocFiles field to ease
	installation of README files.

2001-08-28  Max Horn  <max@quendi.de>

	* Validation.pm: made sure that validate also works when the
	specified filename contains a path; upped limit for Description
	field to 45 chars, seems to be sufficient for "fink list"

2001-08-26  Max Horn  <max@quendi.de>

	* Validation.pm: New Module. Contains the code for validation of
	both .info and .deb files.
	* Engine.pm: moved validation code to new module.

2001-08-26  Max Horn  <max@quendi.de>

	* Engine.pm: added new command "validate" (alias "check") which
	validates a given package .info file or .deb file. Not finished.

2001-08-24  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added the Maintainer field to
	'fink describe' output.

	* Bootstrap.pm (bootstrap): Added code to install some
	non-essential, but important packages at bootstrap time. Currently
	installs apt.

2001-08-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): Added support for
	UpdatePoMakefile. When set, copy the updated Makefile.in.in to the
	po subdirectory of the source tree.

2001-08-14  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: New module. Contains code to let Fink update
	itself from the Internet.
	* Engine.pm: Added self-update commands to the command list.
	* NetAccess.pm: New module. Encapsulates downloading files from
	the Internet (currently done via wget).
	* PkgVersion.pm (fetch_source): wget invocation code moved to the
	new NetAccess module.

2001-08-08  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm: New module. Parses the dpkg status file to find the
	installation status of packages.
	* PkgVersion.pm: Use Fink::Status to get the installed status of
	packages. Got rid of .../var/fink-stamp.

2001-08-06  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Fixed regular expressions to
	really remove trailing whitespace.
	(read_properties_multival): Likewise.

	* Engine.pm (real_install): Added check to catch endless loops
	caused by circular dependencies.

2001-07-30  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Provide the full path to the build directory in
	the expansion %b.

2001-07-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added new package type 'nosource'.

2001-07-21  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm (bootstrap): Create empty 'diversions' file for
	dpkg-divert during bootstrap.

	* Engine.pm: Added 'desc' and 'info' as aliases for the
	'description' command. Suggested by Max Horn.

2001-07-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added optional style
	parameter.

	* Package.pm: Make sure the PkgVersion.pm module is loaded.

	* PkgVersion.pm (phase_build): Added support to automatically
	install / remove Info documents.

2001-07-07  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Ignore trailing white space.
	(read_properties_multival): Likewise.

	* Engine.pm: Added commands for a human-readable (list) and a
	machine-readable (listpackages) package listing.

	* PkgVersion.pm: Added method get_shortdescription to get just the
	one line description.

2001-07-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Optionally print list of requested
	packages that will actually be installed/built/whatever.
	(cmd_update_all): Always show the list described above.

	* Configure.pm (configure): Added proxy and firewall
	settings. Cosmetic output formatting changes.
	(choose_mirrors): Remember continent and country in the config
	file. Offer the current settings as default values.
	* PkgVersion.pm (fetch_source): Support new proxy and firewall
	settings.

	* Config.pm (set_param): Handle empty values.
	(save): Remove keys that are set to empty values from the file.

2001-06-30  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm (scan): Don't try to scan non-existing directories.

2001-06-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for inline daemonic
	service description file.

2001-06-22  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Use the new dpkg-bootstrap package during
	bootstrap phase two.

	* Engine.pm (cmd_fetch_missing): Fix handling of partially fetched
	packages.

	* PkgVersion.pm: Provide full package name in all error messages.

2001-06-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Automatically create section name from
	path. Search parent directories for .deb files.
	* Engine.pm (cmd_scanpackages): Write section to override file.

	* Engine.pm (real_install): Added preliminary virtual package
	support.
	* Package.pm (scan): Add the right object to the provider list.
	* PkgVersion.pm (initialize): Removed special treatment for x11 in
	dependency list.

2001-06-16  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: New methods to retreive dependency and conflict
	lists. Cache result of is_installed.

2001-06-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Catch pure virtual packages in cmd_fetch_all and
	cmd_fetch_all_missing.

2001-06-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Removed get_onlyversion.

2001-06-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Make some 'rm -rf' failures non-fatal.

2001-06-06  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm: Virtual packages, step 1 - keeping track of the
	Provides in the data structures. Also, ignore files that start
	with a dot (.) or a hash (#).
	* PkgVersion.pm: Pass Provides, Replaces and Conflicts on to
	dpkg.

2001-06-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Make sure only missing tarballs are fetched, not
	whole packages at a time.
	* PkgVersion.pm (phase_fetch): Optionally fetch only missing
	individual tarballs, instead of whole-package or none.

2001-06-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Add symlink to built packages in
	<prefix>/fink/debs to make sure they can be found even after
	moving the descriptions around.

	* Engine.pm (cmd_description): Small formatting change.

2001-06-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Use get_description to get the
	package description for the dpkg control file.
	(get_description): Improved formatting and added new fields.
	* Engine.pm (cmd_description): Improved formatting.

2001-05-26  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Do percent expansion on SourceDirectory and
	Source#ExtractDir.

2001-05-24  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Generate and use an override
	file.

	* PkgVersion.pm (phase_build): Added conffiles handling.

2001-05-23  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: New command 'scanpackages' to generate Packages.gz
	files using dpkg-scanpackages.

	* PkgVersion.pm (phase_build): Apply percent expansions to package
	scripts.
	(match_package): Be more quiet if verbose output is not set.

2001-05-18  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for package scripts.

	* Services.pm (read_config): Removed dead code.
	(read_properties): Added here-document support.

	* Engine.pm (real_install): Fixed the don't-fetch-unless-needed
	check.

2001-05-11  Finlay Dobbie  <finlay.dobbie@btinternet.com>

	* PkgVersion.pm: get_description() implemented, for use in fink
	description <package>
	* Engine.pm: fink description implemented

2001-05-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (initialize): Dependencies must be separated by a
	comma now; a space is no longer sufficient. (Result of merging
	dpkg-branch and HEAD.)
	* Engine.pm (real_install): Added code to add all essential
	packages to the dependency list of non-essential packages. (Result
	of merging dpkg-branch and HEAD.)

2001-05-08  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (find_debfile): Also search <prefix>/fink/debs for
	.deb files.

	* Engine.pm (real_install): Only fetch when we need the tarballs
	later.

2001-05-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Detect dpkg malfunction
	(incomplete extraction) and offer to retry.

2001-05-02  Christoph Pfisterer  <cp@chrisp.de>

	* Base.pm (param_default): Fixed default handling.

2001-04-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Honor verbosity setting during fetch and
	unpack. Provide tips after download failures.
	* Configure.pm: Add interactive configuration for the verboseness
	setting.
	* Services.pm: New function print_breaking_twoprefix. Removed
	obsolete find_stow.

2001-04-24  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Fetch all packages at the beginning of the
	bootstrap.
	* Engine.pm: Renamed cmd_fetch_missing to
	cmd_fetch_all_missing. New routine cmd_fetch_missing that takes a
	package list.

2001-04-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle .zip files. Source files with an unknown
	extension are copied to the unpacking directory. Check build
	directory for existence.

2001-04-20  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Remove dir files in the info
	directories (was removed during the dpkg move).

2001-04-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Changed internals of real_install. The first
	parameter to real_install is now one of the defined constants
	designating an operation. New commands: rebuild, reinstall.

	* PkgVersion.pm: Create DEBIAN directory during install
	phase. Mark essential packages as essential in dpkg control file.

2001-04-12  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Don't deactivate older revisions of a
	package before installing the new revision. dpkg takes care of
	upgrading itself, and refuses to violate dependencies.

2001-04-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle duplicate package descriptions in
	different directories.
	* Package.pm (add_version): Merge info if version is already
	present.

2001-04-10  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Use the new scan_all method.
	* Package.pm: Added method scan_all to scan all trees listed in
	the config file.
	* Config.pm: Added method get_treelist.

2001-04-05  Christoph Pfisterer  <cp@chrisp.de>

	* Config.pm: New variable $libpath, pointing at the directory for
	support files.
	* Configure.pm: Removed umask code. Use $libpath. Fixed wrong
	method call.
	* Engine.pm: Removed umask code. Call Fink::Package->scan on the
	correct directory in the new layout (temporary, hardcoded
	solution).
	* Package.pm (scan): Use File::Find to recursively search
	directories. Read all files with the extension '.info'. Pass the
	filename to the PkgVersion object for processing.
	* PkgVersion.pm: Use $libpath. Use the description file path
	passed by Fink::Package::scan to generate paths to the patch and
	to the binary .deb. New accessors for the .deb path. Other small
	fixes.

	* Services.pm (prompt_boolean): Fixed regular expression
	recognizing 'yes' answers.

2001-04-03  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Removed sudo from dpkg
	invocation command line.

	* Bootstrap.pm: Refined bootstrap.
	* Package.pm: New function list_essential_packages.
	* Services.pm (execute): Added quiet flag.

2001-04-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added accessor for .deb name. Use accessors
	wherever possible instead of direct access. Use $debarch
	variable. Add a dummy Description to the control file.
	* Config.pm: Added $debarch variable.

2001-03-31  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Set version number to "pre-0.2.0".

	* PkgVersion.pm: Major changes to support dpkg and
	bootstrapping. Added qualifiers to import list.
	* Bootstrap.pm: Separated bootstrap from interactive
	configuration. Massive changes to bootstrap with dpkg.
	* Configure.pm: New module for interactive configuration. Only
	minor changes from the old Bootstrap.pm.
	* Engine.pm: Separated bootstrap from interactive
	configuration. Added call to phase_build().

2001-03-30  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.7.

2001-03-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Removes build dir after
	successful build unless KeepBuildDir is set in the configuration.
	* FinkVersion.pm: Set version number to "post-0.1.6".

2001-03-21  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Added check to catch unknown packages
	that are mentioned in a dependency list.

2001-03-08  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.6.

	* Bootstrap.pm (choose_mirrors): Read mirror list from a file
	instead of just using all files in the directory.

2001-03-05  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for bundle packages (no source,
	only dependecies).

2001-03-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added code to disable the defaults for
	environment variables (e.g. NoSetCPPFLAGS: true).

2001-03-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for multiple tarballs per package.

2001-02-24  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: new module for storing the version number.

2001-02-18  Christoph Pfisterer  <cp@chrisp.de>

	* Released version 0.1.5. Started using CVS and ChangeLogs.

