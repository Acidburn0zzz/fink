2005-02-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Validation.pm: added user and group to valid fields

2005-02-26  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: check RuntimeVars for DYLD_LIBRARY_PATH: %p/lib
	and error if it exists.

2005-02-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add DescDetail to the install script failure for
	virtual packages.

2005-02-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Validation.pm: added runtimedepends and addshlibdeps to accepted list
	of fields, and added addshlibdeps to boolean list.
	* PkgVersion.pm, Shlibs.pm: Added some maintainer output

2005-02-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm: Adding maintainer mode, -m|--maintainer,
	which will enable extra output for maintainers and will self validate
	the info and deb files.

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: add return values for validate_*_file

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Make InstallScript output stand out better

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: More-compatible syntax for open().

2005-02-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When a compile fails, point the user at the FAQ
	and mailing lists *before* having them e-mail the maintainer
	directly.

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Added new "intro" param to prompt_selection
	* Configure.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm: use new
	"intro" param to prompt_selection

2005-02-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	*VirtPackage.pm: perl packages now Provide digest-pm (when >= 5.8.0)
	
2005-02-23  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, Package.pm, SelfUpdate.pm, Shlibs.pm: refactored some
	of the code so that there's less duplication.  Shlibs.pm now
	ISA Package.pm.

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* Notify.pm, Notify/Growl.pm, Engine.pm: Canonicalize notification
	event names to /(Passed|Failed)$/

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Test length instead of logical value of strings.
	Overhaul DocFiles handler.

2005-02-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: removed old comments and fixed all print commands to use
	STDERR

2005-02-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Adding changes to Storable calls from Benjamin Reed on
	2005-02-22.

2005-02-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: protect pkgnames when used as regex patterns.

2005-02-22  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: Removed Verbosity:4 (pedantic) level.
	* Engine.pm: Added --(no-)pedantic flag to 'fink validate'.
	* Validation.pm: Use --pedantic flag instead of verbosity level to
	control display of pendantic warnings

2005-02-22  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Package.pm: Lock indexing so multiple indexes don't step on
	each other and/or fail.  If one is indexing, other fink processes
	will wait for it to finish and then just re-load the package
	hash from storable.

2005-02-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Added last two updates to shlibs.db calls

2005-02-21  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: overhaul search_comparedb: stop as soon as find one
	newer file, use piped open() so don't have to wait for `` to
	finish before beginning to process outout.

2005-02-21  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: overhaul update_db, including warning immediately if
	cannot update cache

2005-02-20  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: backing out 'snapshot' until after 0.24

2005-02-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: dpkg script #! test: fix fieldnames, be louder if
	mismatch.

2005-02-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Also store $timestamp in _lockpkg; *always*
	verify timestamp before removing lockpkg.

2005-02-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: if buildlock installation fails, only remove
	residue if it is from the same lock.

2005-02-17  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch %n (and related) in Description

2005-02-17  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: be sure that the pre-expansion of conditionals
	is only applied to ones containing "%{Distribution}"
	* Bootstrap.pm, SelfUpdate.pm: move the list of additional packages 
	to be installed to a new function in Bootstrap.pm, which can be
	shared by both modules.  Add a warning when "fink selfupdate" is
	run with an unsupported version of perl.
	* Bootstrap.pm: update modules needed for bootstrapping in 10.2-gcc3.3
	* Bootstrap.pm: remove "storable-pm" from the list of additional
	packages

2005-02-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: add new general-purpose get_depends method,
	rewrite set_buildlock to use it
	* Engine.pm: rewrite show-deps functions to use get_depends

2005-02-13  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* NetAccess.pm: Remove code whose only obvious purpose is to cause
	breakage.

2005-02-13  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow the creation of several .info
	files from a single .info.in, depending on %{Distribution};
	reorganize some functions to accomodate dist-module.pl

2005-02-12  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm (check_host): We work on 10.3.8.

2005-02-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: moved /usr/local/lib check to the no match from shlib file
	loop.  So that system-package with proper Shlibs fields will still
	work.

2005-02-10  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Add a check and die if something links to something
	in /usr/local/lib and /usr/local isn't the basepath.

2005-02-09  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: no longer read depends from deb files when rebuilding
	or building and a deb is present, that made no sense what was I
	thinking? Changed get_debdeps to use dpkg-deb -f <deb> <field>
	thanks to dmacks, one less loop!

2005-02-09  Chris Dolan <chrisdolan@users.sourceforge.net>

	* Engine.pm: improvements for snapshot command

2005-02-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: lol_remove_self(): skip clusters after removing them

2005-02-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Rewrite show_deps_display_list using lol_remove_self().
	* PkgVersion.pm: Implement lol_remove_self() (also handles Provides).
	* Services.pm: Implement cleanup_lol().

2005-02-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Removed ref to {SHLIB_DEPS} and added RunTimeDepends to
	depends duplication checks (Allows for a maintainer to force a certain
	version of a dep).  Also updated to use new API pkglist_default.
	* PkgVersion.pm: Removed refs to {SHLIB_DEPS}, added check for
	AddShlibDeps to run auto adding of depends for deb file creation. Added
	RunTimeDepends to PkgVersion.pm.

2005-02-08  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix plural in package count msg.
	* Configure.pm: Rework proxy prompting: consolidate whole msg into
	$prompt, add note about value visibility, clean up variable usage.
	Ignore whitespace in answers. Add msg if skipping UseBinaryDist.

2005-02-08  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: don't export obsoleted prompt_selection_new
	* PkgVersion.pm: fixed a prompt*() API-change straggler.

2005-02-08  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Rename prompt_selction_new prompt_selection. Switch
	prompt, prompt_boolean, and prompt_selection to use named
	parameters.
	* *.pm: Adjust prompt*() calls for new API.

2005-02-06  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm: Replacing ncurses with libncurses5 for bootstraping

2005-02-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix .deb-creation error checking.

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: ...which it now does, so reviving it

2005-02-05  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: backing out last change till it's complete and works

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: first arg to process() is ref to original @ARGV not
	scalar concat of canonical getopt flags. First restart_as_root arg
	is no longer handled as specially-preprocessed text.

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Alphabetize and remove duplicates in output of show-deps.

2005-02-04  Chris Dolan <chrisdolan@users.sourceforge.net>

	* Engine.pm: Add snapshot command

2005-02-03  Justin F. Hallett  <thesin@users.sourceforge.net>

	* shilbs branch is now fully working and merged to head.
	* shlibs.pm: added better regex for multi whitespace delim

2005-02-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change set_buildlock so that Depends are not
	included. Implement get_family_parent().

2005-02-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify/Growl.pm: add support for new images, and sticky defaults

2005-02-02  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Only notify on success if Fink has been around for a
	miniumum time period.

2005-02-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if used debconf but no Depends:debconf.

2005-02-02  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Notify.pm: Fixed dmacks' breakage, plus better test for new() failure.
	* Notify.pm, Engine.pm: Add notifications for complete success, failure.

2005-02-02  Daniel Macks  <dmacks@netspace.org>

	* Notify.pm: Improved handling of failures of notifier new().
	* Notify/*.pm: test for file executability/readability, not just
	its existence.

2005-01-31  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify.pm, PkgVersion.pm, Services.pm, Notify/*.pm:
	updated to a more modular notification system, including plugins
	for growl, apple text-to-speech, quicksilver, and syslog.

2005-01-31  Justin F. Hallett  <thesin@users.sourceforge.net>

	* VirtPackage.pm: Added Growl virtual pkg

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: No 64-bit-specific gcc* pkgs exist at this time.

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn for "Provides: foo (versiondata)"

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented --recursive for fetch mode. Implemented
	--dry-run in the engine (only available with fetch --recursive so
	far). Improved pkgspec constants usage in real_install.

2005-01-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm: Changed "growl" to notify.  This
	  will be replaced with something more configurable post-0.24.

2005-01-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* *.pm: Updated POD validation errors.

2005-01-30  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Slightly rearrange order of functions, for clarity;
	expand documentation of inject_package.

2005-01-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Add documentation
	
2005-01-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if %p/lib/charset.alias in .deb other than libgettextN.

2005-01-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Package.pm, Engine.pm: Clean up aptdb (UseBinaryDist)
	stuff:
		- Normal usage of regexes, safe use of 'open', OO usage in
		apt-cache parsing.
		- Moved aptgetable status into regular fink DB.
		- Fixed bug where fink would try to use apt-get to fetch a .deb when
		the apt-cache info comes from dpkg status (not a real repo).
		- Removed Package::is_in_apt and fixed all uses thereof.
		- Make fink complain if two packages have the same fullname.

2005-01-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix conditional_pkg_list whitespace removal again.
	* Services.pm: collapse_whitespace and pkglist2lol now remove
	leading/trailing whitespace.

2005-01-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make sure conditional_pkg_list always removes
	leading/trailing whitespace.

2005-01-25  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: gen_gcc_hash() now includes dpkg status, uses
	%r=0 for absent pkg.

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Remove ncurses-dev from "important" (implied
	dependency) list.

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Extract core of gcc* pkg data into new
	gen_gcc_hash(). All expected gcc* pkgs now always exist in
	pdb (marked "uninstalled" if not present).

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Extract core of cmd_fetch_all() and
	cmd_fetch_all_missing() into a new do_fetch_all(), which uses
	call_queue_*(). Fix spacing on parse_fetch_options() help. Reorder
	some subs. Move BuildConflicts removal to after src/deb download.

2005-01-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* VirtPackage.pm: Don't print messages when not in debug mode (they
	will be seen every time apt/dpkg is run!). Eliminate repetition of
	path to cc1plus.

2005-01-23  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, Services.pm: Replace do_calls() with
	call_queue_clear() and call_queue_add().

2005-01-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Disallow bootstrapping with perl 5.8.4

2005-01-22  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm:  Allow bootstrapping with perl 5.8.6 (maybe).

2005-01-20  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Un-quotemeta std URL chars that aren't shell metas.

2005-01-20  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: quotemeta() Source values when used in shell cmd.

2005-01-19  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: New do_calls() function processes a list of method
	and function calls.
	* Engine.pm: cmd_fetch, cmd_fetch_missing, and real_install now
	use do_calls() to handle phase_fetch*() calls.

2005-01-18  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: add new param to expand_percent() to reduce
	unknown-% from die to warn+ignore or silent+ignore.
	* PkgVersion.pm: param_expanded() silently ignores unknown %-exp.
	* Engine.pm, PkgVersion.pm: allow unknown % in DescDetail and
	DescUsage.

2005-01-17  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Add "system-xfree86-manual-install" as a
	(non-installed) catch-all for all of Apple X11*.pkg

2005-01-17  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: (Re)introduce prompt_selection() with timeout; remove
	timeout from prompt_selection_new().
	* PkgVersion.pm: Fix error msg for buildlock failure.

2005-01-16  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Add $timeout param to prompt() and prompt_selection_new().

2005-01-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Re-add missing \n in get_description.

2005-01-14  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Do percent-expansion in DescDetail and DescUsage.

2005-01-13  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed handling of delete_tempfile flag for execute().

2005-01-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change buildlock to always lock on parent pkg.

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Patch dumpinfo to display "b" if --use-binary and
	.deb is downloadable (based on Patches #1062085).

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Put off variable assignments in loop until after
	checking abort conditions.
	* Package.pm: Add is_provided() method (Patches #1053414).
	* Engine.pm: 'fink list' shows "p" for virtual that is installed;
	'fink listpackages' says YES for provided pkgs (Patches #1053414).

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: rewrite execute() build_as_nobody to use recursive
	wrapper (cuts down on system.log polution and fixes pipelines).
	
2005-01-06  Christian Schaffner  <chris01@users.sourceforge.net>

	* Configure.pm: Add conf_file_compat_version constant to indicate the 
	  current compatibility version of the fink.conf file.
	  Set the ConfFileCompatVersion to that value during configure.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed processing of execute() return-code.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Try not to leave partially-installed buildlock pkg.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Do 'apt-get update' *before* rebuilding aptdb.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Added a delete_tempfile flag for execute().

2005-01-05  Christian Schaffner  <chris01@users.sourceforge.net>

	* PkgVersion.pm: Change wording for failed 'fink remove'.

2005-01-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* all: updated Copyright notice

2004-12-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Don't crash validator when given unknown filetypes.

2004-12-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: rewrote execute() to use sudo to drop to user="nobody"

2004-12-27  Chris Zubrzycki <beren12@users.sf.net>

	* PkgVersion.pm: Better description for removing stuck build locks

2004-12-22  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed prepare_script() removal of blank lines from
	middle of $script. Removed no-longer-needed hack from execute().

2004-12-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: prepare_script() may be leaking blank lines, so
	skip them in execute()'s execution loop.

2004-12-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm: Replace execute_nonroot_okay()
	wrapper around execute() with an %options flag to execute().

2004-12-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: fix error which prevented &enforce_gcc from working
	properly on 10.2.
	* Configure.pm: existing users who run "fink configure" get a default
	answer of "no" for the UseBinaryDist question.

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: unify execute() and execute_script() into execute().
	Scrap execute_script_nonroot_okay().
	* PkgVersion.pm: Adjust run_script() for new execute().

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn is pkgname field of shlibs looks like a
	version-number.

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Add import for POSIX functions. Move parsing of
	scripts from execute_script() into new prepare_script() function.

2004-12-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: recognize 10.3.7

2004-12-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, PkgVersion.pm, Services.pm: Move the code which
	verifies that the gcc version is correct to a new &enforce_gcc
	function in Services.pm.  Make sure that this function does what
	we want it to do for future versions of OS X.

2004-12-15  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Change execute*() to take option=>value hash of
	options instead of parameter-ordered values. Only option is
	'quiet'.
	* Engine.pm: Convert to new Services::execute*() API.

2004-12-09  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: Verbose=1 *is* desired default.

2004-12-07  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Default to Verbose=3.

2004-12-07  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: New Verbose=4 setting.
	* Configure.pm: Default to Verbose=3 (sync with fink.conf manpage).
	* Validation.pm: Require Verbose>3 to do pedantic Description checks.
	
2004-12-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm PkgVersion.pm, SelfUpdate.pm: 
	Refactor 'UseBinaryDist' to use a new binary_requested function
	which takes into account the per-package -b and -c flags as well
	as the global UseBinaryDist option.
	* Bootstrap.pm: Disable 'UseBinaryDist' during bootstrap
	* Configure.pm: Set 'UseBinaryDist' to be false if we are not 
	installed in /sw

2004-12-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Also catch libtool files pointing to %i and %I

2004-12-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix 'entries that end in "/"' msg.
	Fix regex in libtool %b test.

2004-12-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Remove test for Depends:pkgconfig when
	lib/pkgconfig files exist.

2004-12-02  Rob Braun <bbraun@opendarwin.org>

	* Engine.pm: Make 'fetch' support the same arguments as 'fetch-all'.

2004-11-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed &execute() result-code handling when
	--build-as-nobody reverts %i ownership to root.

2004-11-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Implement execute_nonroot_okay and
	execute_script_nonroot_okay as wrappers that obey fink's
	--build-as-nobody flag.
	* PkgVersion.pm: New fourth argument to run_script(): boolean
	whether okay to run as non-root.
	* PkgVersion.pm: --build-as-nobody causes unnpack, patch, compile,
	and install phases to run as user nobody, then install dir is
	chowned back to root before setting up .deb,
	* Engine.pm: Big fat warning if using --build-as-nobody.

2004-11-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Do not include "$epoch:" in buildlock pkgname.

2004-11-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Remove timestamp from buildlock pkgname; use
	lockpkg's dpkg preinst scripts to prevent concurrent builds.

2004-11-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fixed .la check to look for %b/%N not %b/%n

2004-11-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow .deb to have files in %p/Applications

2004-11-22  Christian Schaffner  <chris01@users.sourceforge.net>

	* Validation.pm: Check for overwritten system symlinks (e.g. /var).

2004-11-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check for .la files that point to their build dir.

2004-11-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Refactor .info validation to consolidate
	parent/splitoff common checks.

2004-11-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: nicer formatting for growl

2004-11-19  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if dpkg install-time scripts use %i

2004-11-19  Christian Schaffner  <chris01@users.sourceforge.net>

	* Validation.pm: Check all fields for non-ascii characters.

2004-11-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use uname(0) instead of hardcoding kernel=darwin
	when setting Depends for the kernel pkg.
	* VirtPackage.pm: Use uname(0) instead of hardcoding kernel=darwin
	for kernel pkg, and have this pkg Provides:kernel

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add support for --version in fink-virtual-pkgs

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Fixed some annoyances in growl notification
	and AppBundles: handling

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Make the failure message more friendly

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Apparently gcc4 is *not* binary-compat with
	gcc3.3, even though it's supposed to be.  At least, not right
	now.  :(

2004-11-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use Config option no_buildlock to skip build-locking
	* Bootstrap.pm: no_buildlock during phase 3

2004-11-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: disable UseBinaryDist during bootstrap
	
2004-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm, PkgVersion.pm, Services.pm: Added some hooks to
	allow using bits of the Fink framework with external scripts on
	Linux.

2004-11-15  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Implemented build-time locking
	of dependencies via fink-buildlock-* packages.

2004-11-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Simplify %type test for main, correct it for
	SplitOffs; implement dpkg install-time script interpretter check
	for SplitOffs.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Fix my fix to regex.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if %type_ *anywhere* but not InfoN>=2.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, CLI.pm: More comprehensive trapping of SIGINT.
	* NetAccess.pm, Package.pm, Services.pm, Validation.pm: Use \#
	instead of # and \Z instead of $ in some regex to make emacs paren
	balancer happy.

2004-11-12  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Refactored gathering of user input. All prompt_*() now
	hand off to new get_input() (semi-revival from Services.pm from
	before CLI/Services split), which propagate control-C and other
	exceptions correctly during blocking and non-blocking input.

2004-11-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Don't automatically update gettext-bin
	
2004-11-09  Daniel Macks  <dmacks@netspace.org>

	* Mirror.pm: Re-reworded menu b/c must match /^Custom/
	* CLI.pm: During blocking user input, propagate control-C as die()

2004-11-08  Daniel Macks  <dmacks@netspace.org>

	* Mirror.pm: Clarified menu wording for CustomMirror set.

2004-11-07  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm: We work with 10.3.6.

2004-11-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Corrected regex in dpkg install-time script
	interpretter check.

2004-11-05  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Complain about writing (Pre|Post)(Inst|Rm)Script
	with explicit #! call. Use \Z instead of $ so can remove emacs
	paren balancing hack.

2004-11-04  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Add a '--recursive' option to the remove and purge commands,
	  which makes fink use 'apt-get remove'.
	* PkgVersion.pm: Added two new phases: 'phase_deactivate_recursive'
	  and 'phase_purge_recursive'.

2004-11-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: run SplitForks on AppBundles

2004-11-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, PkgVersion.pm: make gcc 4.0 count as gcc 3.3

2004-11-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: make the AppBundles: stuff be smarter about
	linking things around in a way that people can move them

2004-10-29  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: Implemented AppBundles:
	which does essentially what JarFiles does, copies an application
	bundle to a known directory (%p/Applications)

2004-10-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: support for growl notifications if
	Mac::Growl is available.

2004-10-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use named constants for fink list/apropos option bits.

2004-10-22  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed ignoring of null OR clusters in lol2pkglist.

2004-10-19  David Höhn <dmalloc@users.sourceforge.net>

	* Configure.pm: Use print_breaking for the extremely long
	prompt that used to be the proxy configure prompt. This is more
	readable and looks better.


2004-10-17  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: lol2pkglist code cleanup.

2004-10-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: Fix bug in code for broken gcc warning; also, add pause
	after warning.
	
2004-10-16  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Implemented pkglist2lol and lol2pkglist, to convert
	Depends-like fields between Debian string and a list-of-lists of
	pkgname atoms.
	* PkgVersion.pm: Convert conditional_pkg_list to use the new
	Services functions. Fix check for Depends:darwin to allow pkgnames
	to contain "darwin". Optimize BDO violation check.

2004-10-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: conditional_pkg_list: Fix parsing so no extra whitespace.

2004-10-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: Warn users with the broken gcc, whenever they compile
	something.
	
2004-10-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Add the broken-gcc package, currently detects
	XCode 1.5 build 1666.

2004-10-14  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Introduce new column in the commands matrix indicating if
	  a command needs apt-get or apt-get with the --ignore-breakage option
	  if the UseBinaryDist option is enabled. This requirement is then 
	  checked before the command is executed. 
	  Also use full path to call apt-get and apt-cache.
	* Package.pm: Use full path to call apt-get.
	* PkgVersion.pm, SelfUpdate.pm: Remove obsolete tests for apt-get. 
	  Use the full path to apt-get.

2004-10-12  David Höhn <dmalloc@users.sourceforge.net>

	* Configure.pm: Chnage the prompt for proxy selection slightly.
			Some clean up of phrases. I thinkt his prompt is
			too long, we can easily revert if, should people
			dislike it.

2004-10-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Obey flock when reading db files via Storable

2004-10-12  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Implement 'UseBinaryDist' option that causes fink 
	to download pre-compiled binary packages from the binary distro if
	available and the deb is not yet on the system. The cleanup cmd will
	also call 'apt-get autoclean' if the 'UseBinaryDist' option is enabled.
	* Package.pm: add is_in_apt sub to find a specific package in aptdb.
	Add update_aptdb sub to update the apt-get db file which is called 
	from	update_db
	* PkgVersion.pm: Add is_aptgetable sub that checks if a package is
	available via apt-get. find_debfile now also finds debs in 
	'$basepath/var/cache/apt/archives/' if the 'UseBinaryDist' option
	is enabled. Add subs 'phase_fetch_deb' and 'fetch_deb' to fetch the 
	debs from the binary distro. This uses the '--ignore-breakage' option
	of apt-get added in apt >= 0.5.4-51 (or >= 0.5.4-41 for 10.2-gcc3.3)
	* SelfUpdate.pm: Call 'apt-get update' during finish if the 
	'UseBinaryDist' option is enabled. 
	* Configure.pm: Add configuration for 'UseBinaryDist'.
	* Services.pm: Add new sub 'count_files' to count files in a directory.
	Used in Engine.pm to count how many files were deleted during cleanup.
	Don't output the cmd in execute if quite is set to 1.
	(Patches: #1037296)

2004-10-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check ConfigureParams for hardcoded /sw.

2004-10-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: show-deps: Conflicts are *not* considered BuildConflicts.
	* PkgVersion.pm: resolve_depends(): Documented parameters and most
	internal variables. Improved ordering of variable declarations.

2004-09-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented 'fink show-deps' (cmd_show_deps() and
	show_deps_print_pkglist()).

2004-09-27 Chris Zubrzycki <beren12@users.sourceforge.net> 

	* Engine.pm: Implemented --keep-src for fink cleanup.

2004-09-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implemented Type:bundle and Type:dummy support in
	get_script. Adjusted phase_install to use get_script even for Type:bundle.

2004-09-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Documented all of the tests, did a little
	rearranging to facilitate a sensible order in the docs, and
	added system-java-dev.

2004-09-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fix regex for Package and Version to prohibit commas
	(Patches #1010229)

2004-09-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion,pm, Validation.pm: Add deprecated-feature warning for
	implicit Source to indexing loop and validator.

2004-09-19  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: remove extraneous quotes in read_properties_lines err msg.

2004-09-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Handle xorg in system-xfree86 checks.

2004-09-09  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: only set cctools_single_module version if it exists.

2004-09-06  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, VirtPackage.pm: Some tweaks to the way
	system-java and $JAVA_HOME work.

2004-08-31  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Do not save raw SplitOffN in parent pkg.

2004-08-22  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm, Engine.pm: remove refs to non-existent function.
	* Engine.pm: fix passing of help_list_apropos callback.
	* PkgVersion.pm: fix phase_fetch on splitoff to download parent.

2004-08-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Extract list/apropos help into separate function.
	Pass $cmd through fetch-* to make help cmd-specific.

2004-08-20  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: sync helpscreen and Getopt flag names.

2004-08-19  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Fix Tree matching (revert r1.67->1.68 in part).

2004-08-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Typo in is_fetched() for Type:bundle.

2004-08-16  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Fixed %-expansion on Files.

2004-08-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Unify get_*script() into new get_script().
	* Engine.pm: update dumpinfo for new get_script().

2004-08-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implement conditionals for Files field.
	conditional_space_list: trim leading/trailing whitespace in return
	value.
	* Engine.pm: update dumpinfo for new conditionalized Files.

2004-08-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: support for newer (and 64-bit)  versions of gcc

2004-08-13  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Remove 'fink checksums'.

2004-08-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.5.0.

2004-08-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: disable caching for get_env if in bootstrapping mode.

2004-08-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: catch "%p\/src\/" also, not just "%p/src/".

2004-08-08  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Rename parse_configureparams() to prepare_percent_c()
	and: no longer consider %c cacheable and re-protect % in %c.
	* Engine.pm: fixes for prepare_percent_c().

2004-08-08  Max Horn <max@quendi.de>

	* Engine.pm: Fix list command with regards to virtual packages.

2004-08-05  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm: correct the regex for parsing Trees in write_sources_list

2004-08-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: cleaner form of the existing code for detecting
	the cctools version that doesn't use `strip`  =)

2004-08-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: merge from cond_config_params: Activate
	conditionals in ConfigureParams.
	* Text/DelimMatch.pm: merge from cond_config_params: import
	Text::DelimMatch-1.06 from CPAN into Fink:: package namespace.

2004-08-01  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: eval_conditional: do not proceed if bad syntax

2004-07-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: more modularization, to allow inject.pl in 10.3 
	directory to call some modules; eliminate local/bootstrap; injected 
	packages now go into local/injected
	* Config.pm: new function write_sources_list which writes an 
	appropriate file $basepath/etc/apt/sources.list .  (Called 
	automatically by $config->save().); move the hook to old pre-10.2 
	debs from postinstall script to Config.pm; allow local modifications 
	at both the top and bottom of the sources.list file, and preserve 
	them when the file is re-generated
	* FinkVersion.pm.in: the VERSION file and the stamp-* files will 
	now live in /sw/fink/dists, not /sw/fink
	* SelfUpdate.pm: manipulate stamp-* files in new location; rsync must 
	include DISTRIBUTION and README files; change the VERSION when
	rsyncing to reflect rsync; store the website and cvs-repository 
	addresses in /sw/lib/fink/URL via the fink-mirrors package, and use
	the addresses stored there rather than hard-wired ones
	
2004-07-29  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: switch to perl5.6.x-safe use of constants.
	* Validation.pm: consolidate system calls for reading .deb fields.

2004-07-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Parse .deb control early; make data available in
	$deb_control. For scrollkeeper-update check: make sure it's called
	by *both* control scripts; remove circular dependency requirement
	for scrollkeeper.deb.

2004-07-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: handle newer cctools that don't contain the
	cctools version in the "what" information anymore

2004-07-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: For .deb, check scrollkeeper-update usage: must
	be run by .deb control scripts (Post{Inst,Rm}), not in pkg build
	phase; needs Depends:scrollkeeper

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fixes to my allowed-dirs changes.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Add --prefix to 'fink validate'.
	* Validation.pm: Allow user-speficied alternate prefix (%p other
	than $config->basepath). Added error checking when reading .info
	and .patch.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check that files are in allowed dirs of .deb,
	not just not-in disallowed dirs.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Move @bad_dirs check early so don't miss things
	that get special handling (but not validation) by other matches.
	Replace @bad_dirs explicit loop with grep {}.

2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: _Un_restrict use of %a to PatchScript.

2004-07-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Run CompileScript (if one is explicitly defined)
	for dummy packages instead of just crashing.
	* VirtPackage.pm: Add CompileScript field: crash with with error
	message explaining to RTFDescDetail.

2004-07-18  Max Horn <max@quendi.de>

	* Configure.pm: Fix default value for the master mirror configure option.

2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change get_tarball to return undef (instead of
	"none") if no such suffix. Fix get_checksum to really return undef
	if field not in .info.
	
2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Restrict use of %a to PatchScript.

2004-07-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: make sure a minimum of java versions are filled
	in so we don't get warnings.

2004-07-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm, Status.pm, VirtPackage.pm: import
	branch:virt_always_exists: virtual packages of non-installed
	things now appear as "uninstalled" rather than not even existing.

	* VirtPackage.pm (dmacks): Replaced dpkg "status" strings with
	constants.  Changed query_package to respect "status" (parallel to
	that method in Status.pm) instead of assuming presence of package
	entry is equivalent to it being installed.
	* PkgVersion.pm (rangerrick): Check whether VirtPackage's return
	value is undefined, since "0" is a true version, undefined is a
	non- existent one.
	* Services.pm (rangerrick): Treat undefined values passed to a
	version compare as a false value.
	* Status.pm (rangerrick): Simplify status checking.
	* VirtPackage.pm (rangerrick): Change all virtuals to exist even
	if they're not installed, with status "purge ok not-installed".

2004-07-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add some jdbc stuff to the provides

2004-07-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_source_suffices now omits suffices for which
	value=none.
	* Engine.pm: fix dumpinfo for new get_source_suffices behavior.

2004-07-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change get_checksum to return undef (instead of
	"-") if MD5 for requested suffix is not defined.
	* Services.pm: Make file_MD5_checksum die if checksum pipe
	output could not be parsed.
	* NetAccess.pm: fetch_url_to_file now takes undef instead of "-"
	as $checksum arg meaning "do not check".
	* Engine.pm, PkgVersion.pm: Changes for new get_checksum behavior.

2004-07-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: convert set_env (which alters ENV) to get_env
	(which just returns what env should be); fix run_script	accordingly.
	* Engine.pm: dumpinfo: add 'env' pseudo-field.

2004-07-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: set_env: simplify handling of NoSetENVVAR and
	SetENVVAR; implement caching of results; factor out path (string
	constant) for Type:java.

2004-07-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: system-java
	* PkgVersion.pm: support for Type: java

2004-07-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Allow bootstrapping with perl 5.8.2 and perl 5.8.4.
	
2004-07-02  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Remove redundant variable usage. Replace regex-
	match with string-equality to prevent accidental substring matches.

2004-06-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Just a little rearranging to make things easier.

2004-06-29  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Mention which SourceN failed if missing SourceN-MD5.

2004-06-28  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Add checksum argument to fetch_url_to_file; if it
	doesn't match, consider download a failure and continue through
	mirror list.
	* PkgVersion.pm: Pass $checksum to fetch_url_to_file in phase_fetch.
	
2004-06-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move PatchScript processing into new get_patchscript
	method and enable %default_script (which is blank) in that field.
	* Engine.pm: Use new get_patchscript accessor for dumpinfo.
	
2004-06-26  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: param_boolean now returns undef if field is not present.
	* Engine.pm, PkgVersion.pm: update to use new tristate param_boolean.

2004-06-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Stop ccache from making root-owned files in
	$HOME/.ccache/ of user running fink.

2004-06-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Slurp .deb contents first instead of checking
	line-by-line. Verify presence and execute-flag on daemonicfile
	executable and dependency on daemonic.

2004-06-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check for hardcoded /sw in DaemonicFile.

2004-06-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Very strict check of Shlibs formatting.

2004-06-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: If have %type_*[*] in Package, error if not InfoN>=2.

2004-06-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: One more tweak to BuildDependsOnly:
	we now write out the value "Undefined" to the .deb if it wasn't
	defined in the .info, and test for that value when deciding whether
	or not to warn.

2004-06-22  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use new accessors for CompileScript and InstallScript.
	* PkgVersion.pm: Added parameter to run_script to control whether
	%-expansion should be performed. Moved parsing of CompileScript
	and InstallScript (including defaults) into new get_compilescript
	and get_installscript accessors. Added support for %default_script
	in these fields.

2004-06-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check that BuildDependsOnly is a boolean field.
	* Validation.pm: Fix the validation check for boolean fields.

2004-06-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When writing the contents of the BuildDependsOnly
	field into the .deb file, only write the contents if the field
	exists.
	* Validation.pm: Warn if headers are present (as well as a dylib) 
	but BuildDependsOnly is not set to any value.

2004-06-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Disable Shlibs format check, and all Shlibs
	checks if not in single-pkg format).

2004-06-20  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm Make "NoSetLD_PREBIND:false" not disable prebinding.
	* Validation.pm: Warn if have pkg-config files but not depend on
	pkgconfig package. In .info SplitOff sections, note all problems,
	not just first. Check formatting of Shlibs field.
	
2004-06-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Modify regex so that xemacs-base, xemacs-efs
	and xemacs-sumo are allowed to install .elc files.

2004-06-17  Dainel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Add final newline to generated daemonic .xml file.

2004-06-17  Dainel Macks  <dmacks@netspace.org>

	* Engine.pm: Made 'dumpinfo -fdaemonicfile' use multiline format.

2004-06-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: If BuildDependsOnly is not true, allow the directory
	/sw/include/ or any subdirectory of it, but do not allow *files*
	within that directory.

2004-06-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Don't warn when the xfree86 package installs files
	outside /sw, as long as it installs them in the right place.
	Also, fixed the regex which lets (x)emacs install .elc files without
	the warning.

2004-06-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.4.0.

2004-06-03  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When extracting tarballs, the optional flags
	which cause permissions and ownership not to be preserved
	should not be invoked during bootstrap (because the Apple-supplied 
	gnutar is too old to know about these flags, in 10.2 and earlier).

2004-06-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation,pm: Write the contents of the
	BuildDependsOnly field into the .deb file, and when validating a 
	.deb, verify that BuildDependsOnly is true whenever things are
	installed into /sw/include.

2004-05-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: don't print fields that don't apply to
	splitoffs for splitoff pkgs.
	* PkgVersion.pm: get_source: no default Source for splitoff
	pkgs. get_source_suffices: no sources for splitoff pkgs.

2004-05-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVerison.pm: get_source_suffices: Ignore SourceN for Type "bundle", "nosource", "dummy".

2004-05-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm:  adjust the Provides in the system-perl packages

2004-05-13  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Fixed rm_f to not return failure for non-existent	files.
	Made _expand omit globs that match nothing, undefs, and blanks.

2004-05-13  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Command.pm: Fix Failed: can't symlink package due to perl's -e
	returning false if a file is a dangling symlink. Thanks to Ben Hines.
	
2004-05-11  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed problem where any commented-out line ending
	with "<<" in a heredoc was treated as the beginning of a nested
	heredoc.

2004-05-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: overhauled Source(N) <-> *(N)* correspondence checks.

2004-05-10  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: status, allversions: note if binary avail.

2004-05-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed bug in Depends processing where packages
	with version requirements could get dropped if field had conditionals.

2004-05-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: status: add "have-deb", allversions: add
	"b" if .deb file is present.

2004-05-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: fixed display of SourceN in all-fields
	mode, fixed display of -f sources, added "status" mode (is latest?
	is installed?), added "allversions" mode (list all versions and
	whether installed), all typically multiline fields always
	displayed multiline and indented 1 additional space, all typically
	single-line fields always displayed in-line, documented
	pseudofields.
	* Services.pm: version_cmp: added "<=>" op, added warning for
	unknown op. Implemented sort_versions.

2004-04-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: add Provides to system-perl packages >= 5.8.0

2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: corrected printing of Desc* fields and
	of splitoffs for SplitOff packages, improved handling of -p keys,
	better error message for %-expansion.
	
2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Grr...committed wrong file. Fixing...

2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Pushed processing of ConfigureParams (including
	Type-specific default and setting %c expansion) into a new
	parse_configureparams() method. Disabled ConfigureParams
	conditionals processing. Removed processing of ConfigureParams out
	of indexing loop; now call parse_configureparams at the start of
	phases where %c might conceivably be used (patch/compile/install).
	* Engine.pm: Updated cmd_dumpinfo in accordance with new
	PkgVersion::*_configureparams(). Allow optional leading % in
	dumpinfo -p values.

2004-04-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: New 'dumpinfo' is live (--all, --field, --percent).
	Switched back to using Getopt.
	* CLI,pm: Removed parse_cmd_options b/c it was very slow. Removed
	print_optionlist since it is no longer used.

2004-04-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: New flags for 'fink dumpinfo' (not live yet),
	implemented using parse_cmd_options instead of Getopt (and simple
	print for help).

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: .deb/control Source field corrected to contain
	parent pkg (if there is one) instead of always same as pkg itself.
	See fink-devel "Source field in var/lib/dpkg/available" April 2004

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm: Move eval_conditional() from an
	instance method in PkgVersion to a package function in Services.

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move actual logical evaluation of conditional
	expression (Depends, etc.) into its own eval_conditional() method.
	Implemented get_configureparams() accessor, and enabled
	conditional syntax (same as Depends, etc.). Moved definition of %c
	in _expand later b/c need _expand (at least %type_*[]) for
	get_configureparams() conditionals.
	
2004-04-19  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Use actual screen width in print_breaking(), not
	hardcoded value. Extract option/desc 2-column printing from
	parse_cmd_options() into new print_optionlist(). Display flag
	value type (or optional specified string) in parse_cmd_options().
	Remove stray debugging.

2004-04-19  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implement new parse_cmd_options() to process 'fink'
	subcommand options (handles --help including pretty-printing).

2004-04-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: All Type are now converted to all-lowercase. Make
	sure Type has been parsed into _type_hash during is_type() and
	get_subtype() calls.
	* Engine.pm: Simplified initial command routing.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	Engine.pm: dumpinfo improvements: list parent or splitoff
	packages, indicate which fields are from parent, both parent and
	splitoff InstallScript are displayed, only print field names if
	field is present.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Drop any leading / in Source:mirror: pathname.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Added relevant FAQ entry as Homepage for gcc2
	and the system-* packages.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Perform %-expansion on Description (during indexing).
	* Validation.pm: When constructing allowed .info filenames, clear out
	strings of multiple hyphens or hyphens at the end. Also resolve some
	some "use of uninitialized value" warnings when certain fields are
	missing from the .info.

2004-04-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix dumpinfo so when run on a SplitOff package it
	gives the parent's fields for fields that don't make sense to have
	in a SplitOff.

2004-04-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Remembered to handle %ni and %Ni in $expand map.

2004-04-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fixed parsing of .info that do not have a Type field.

2004-04-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Correctly expand %type_ for single-subtype
	types. For all multi-subtype types, use the single subtype ".".

2004-04-07  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: fix dumpinfo to give Source(N) field, not (renamed) tarball filename.

2004-04-07  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented 'fink dumpinfo'

2004-03-30  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Recognize darwin 7.3.0.

2004-03-30  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Be careful about permissions when creating directories

2004-03-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: When extracting tarballs, do not preserve
	permissions or ownership.

2004-03-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: handle SplitOff(N) in numerical order.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: %ni and %Ni instead of %in and %IN.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: always expand_percent invariant portion of Package.
	* PkgVersion.pm: %in is invariant portion of Package, %IN is
	invariant portion of parent Package; %n reverted to whole Package.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_custom_mirror() now takes $suffix param.

2004-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Allow non-consecutive SourceN (and related
	fields). Renamed get_param_with_expansion => param_expanded to
	fit naming convention, and added param_default_expanded.
	Distinguishing between SourceN fields is now done by suffix,
	using get_source_suffices().
	* Engine.pm: Modified to use suffix-indexed SourceN.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Forgot to include SplitOff (i.e., N=[null]).

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed regex error in params_matching for SplitOffN.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: %p/src isn't reliable (FetchAltDir and Buildpath
	in fink.conf), so warn if it's used.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Prohibit SourceN:none (Source:none still okay).

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Hacks to keep emacs paren balancing from getting
	confused. Changed regex match m#pattern# to /pattern/ so it
	doesn't look like a comment, and added POD line containing a dummy
	closing ")" where a pattern had $) which looks like a variable.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: improve regex to find SplitOffN fields
	* Validation.pm: For *N* fields, improve checking of N to allow
	any number of digits but no N=1 or leading zeros. Consolidate
	Source* vs. Source*-MD5 correspondence checks (all Validation.pm
	and PkgVersion.pm from or based on Comments in Patches #913842)
	* Services.pm: check for `uname` in /bin if not in /usr/bin
	
2004-03-16  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Add get_filename to get the info file name (used by FinkCommander)

2004-03-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Change from pathsetup.command to pathsetup.sh

2004-03-16  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Command.pm, PkgVersion.pm: New &du_sk replacement for 'du -sk'.
	This changes the meaning of Installed-Size in .deb's from bytes to
	KB, in accordance with Debian policy. Apt and dpkg should now
	understand it correctly.

2004-03-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm:  it's now OK to install files directly into
	/sw/share/emacs/site-lisp, so we no longer check for this

2004-03-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Only display the warnings about BuildDependsOnly
	if we are more verbose than the default

2004-03-11  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Pass third param TRUE (more secure, according to
	File::Path docs).

2004-03-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: SplitOff(N) no longer have to be consecutive (now
	use all fields matching /splitoff\d*/), but must still be unique.
	add_splitoff() now returns the PkgVersion objects so that the
	_splitoffs instance variable is handled in fewer different places.

2004-03-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if CVS or RCS directories in a .deb

2004-03-07  Daniel Macks  <dmacks@netspace.org>

	* Service.pm: expand_percent: allow braces to explicitly delimit keys.

2004-03-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move handling of Source(N) and Source(N)Rename
	default-handling and percent-expansion from the initialization
	loop to the accessor methods.
	* Package.pm, PkgVersion.pm: Implement pkglist(), has_pkglist(),
	pkglist_default() that are analogous to the param(), has_param(),
	param_default() methods but also do percent-expansion and
	conditional-clause parsing. Remove this functionality from object
	initialization. Convert all *param*() for package-list fields to
	*pkglist*() calls.

2004-03-05  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Remove needless {...} block syntax from frequently-
	called function.
	* PkgVersion.pm: Streamline handling of Vn for %-expand mapping.

2004-03-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: provide all gcc's in /usr/bin (based on the
	output of foo --version)

2004-03-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: provide system-perlXXX

2004-03-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: typo in get_source_count shortcut for SplitOffs.
	* Package.pm, PkgVersion.pm: %n is now non-variant portion of
	Package (i.e., %type_*[] blanked out). %Vn is full (with %type_*[]
	already expanded) Package. %N is %Vn of parent.
	
2004-03-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: fix error message for missing Package: in
	SplitOffN:. Caching by object ref is not safe so revert to
	_sourcecount internally in get_source_count() (but must not be
	used in other places b/c may not be saved to package db).
	
2004-03-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implement get_source_count() accessor. Remove
	is_multisource() accessor (leftover from long-gone SourceItems).
	* Engine.pm, PkgVersion.pm: abolish _sourcecount instance
	variable; useg get_source_count() instead.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Took out parsing of Type into %type_*[] b/c don't
	have a way to get a single subtype from the subtype list. This
	means %type_*[] will cause an error if used in Patch: value.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Rip out old Type: validation code. Fix other
	checks to use new multivariant Type. This is slightly fragile.
	Remembered to switch _info_level property to infon

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Remove special meaning of "". 'Type:
	foo (boolean)' now gives 'Type: foo (foo .)'. The %type_pkg has
	periods removed so still can get null for Package: substitution.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Added missing support for %type_raw[] in Package
	field.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Full multivariant support. 'Type:
	foo, bar' allowed (means package is of both types). 'Type: foo
	thing' allowed for arbitrary type and subtype (no longer limited
	to languages and lang-versions; any strings of \S+ will do (but no parens or commas).
	Subtype "" means null string. If no subtype is given, the type is
	used ('Type: foo' means 'Type: foo foo'). 'Type: foo (thing1
	thing2)' allowed (autogenerates two packages, one with 'Type: foo
	thing1' one with 'Type: foo thing2'). 'Type foo (boolean)' is a
	synonym for 'Type: foo (foo "")'. Subtype list expansion is
	recursive ('Type: foo (a b), bar (c d)' gives all 4 combinations).
	All subtypes (as entered and with periods removed) are available
	for percent expansion: 'Type: perl 5.8.1' gives
	%type_raw[perl]=5.8.1 and %type_pkg[perl]=581 using %type[foo].
	* FinkVersion.pm: Bumped InfoN -> N=2 so can handle %-expansion in
	Package and multiple Type values.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: stash InfoN value as 'infon' not '_info_level' since
	elements with leading _ are lost during new_from_properties().

2004-02-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: expand_percent: protect regex metachars in % keys.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm,Package.pm,PkgVersion.pm: convert all checking of
	package type from directly comparing {_type} to using a new
	PkgVersion::is_type() accessor.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: rm_f now succeeds if try to remove non-existent
	file. symlink_f now uses native rm_f to remove a pre-existing
	target (so doesn't fail if it doesn't exist). Fixed doc about
	$dest being a full filename.
	* PkgVersion.pm: fixed usage of symlink_f to include filename in
	$dest.
	* SelfUpdate.pm: fixed accidental hardlink/softlink swap from last
	commit.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: finish gaborit's patch from 841381 to cat().
	* Bootstrap.pm,Engine.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	use Fink::Command calls instead of system() or &execute whenever
	possible (based on 841381).

2004-02-24  David Höhn  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: changed the rsync command to
	explicitly preserve the timestamps using -t
	For more information see:
		1.) http://article.gmane.org/gmane.os.apple.fink.devel/7592
		2.) http://article.gmane.org/gmane.os.apple.fink.devel/7597
		3.) http://article.gmane.org/gmane.os.apple.fink.devel/7598
	All credit goes to Rob Braun.

2004-02-24  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Enable warning for RFC-822 multiline format.

2004-02-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.2 when
	the new Developer Tools are not installed (i.e., no more non-gcc3.3
	10.2 tree).

2004-02-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Changed conditional depends syntax for "equals"
	to "=" (like Debian version dependency syntax).
	* PkgVersion.pm: Activated conditional depends parsing (during
	indexing). Fixed to use accessor methods.
	* PkgVersion.pm: Moved removal-of-self-from-Conflicts/Replaces
	code into a new clear_self_from_list method. Fixed to use accessor
	methods. Switch to calling it during indexing instead of .deb
	construction (dependency engine may need Conflicts info).
	* PkgVersion.pm: Remove more remnants of my _source_item stuff.
	* Services.pm: Revert accidental commit of debugging code.
	
2004-02-18  Rob Braun  <bbraun@opendarwin.org>

	* Bootstrap.pm: Update the i386 distribution detection code to
	understand i386-apple-darwin 7.0.1 as 10.3 distribution.

2004-02-17  Daniel Macks  <dmacks@netspace.org>

	* all: add emacs tags to get perl-mode (even for .pm.in) and set
	tab-width to 4 chars (in accord with fink coding style).

2004-02-16  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: *Script parsing improvements for non-#!-specified
	scripts: fix removal of leading whitespace, implement use of \ at
	end of line to allow wrapping of long lines. (by Rohan Lloyd; see
	"Folding long lines in scripts" on fink-devel)

2004-02-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Added "debug" mode to show what's going on while
	searching for various virtual bits.  (Good idea, Martin!)

2004-02-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: conditional_pkg_list: optimized initial field
	parsing and fixed consecutive puctuation replacement. Remembered
	to save value back to hash. Changed syntax to:
	  Depends: (string1 op string2) foo
	where op is one of (<< >> <= >= == !=) for string comparison or:
	  Depends: (string) foo
	where string must be non-null.
	
2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Wrote conditional_pkg_list which processes
	conditionals in Depends (and similarly formatted fields) according
	to 'Depends: (a b) foo', where foo is only a dependency if a and b
	are stringwise equal. Will probably need to bump max_info_level.
	Tested and seems to work, but not actually calling it from main
	code yet.

2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* Services.pm, Packages.pm, Validation.pm: Changed handle_infon_block
	from being a function in Services to being a class method in Packages.

2004-02-10  Daniel Macks  <dmacks@netspace.org>

	* FinkVersion.pm.in: Implemented max_info_level(): returns largest
	.info version this fink can handle. Initial value is 1 (same
	format as non-InfoN file).
	* Services.pm: Implemented handle_infon_block: Reprocess .info to
	account for it consisting entirely of a InfoN: multiline field. If
	N larger than max_info_level, warn and scrap the file.
	* Package.pm, Validation.pm: Call handle_infon_block after reading
	.info.
	
2004-02-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.1, and
	warn users that support will soon cease for non-gcc3.3 10.2.

2004-02-03  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: Only choose a splitoff if the candidates contain
	only one splitoff. Fixes bug reported by chris01 on irc.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implemented print_breaking_stderr, a wrapper around
	print_breaking that causes output to go to STDERR.
	* Package.pm: For all diagnostic/status messages from 'fink list',
	send to STDERR. For all that are not critical, don't output unless
	output is a  terminal (i.e., hide if a Unix pipeline).
	
2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Resuscitated RangerRick's idea from CVS r1.95 of
	adding line numbers to parser error messages.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm, Validation.pm: finished implementing
	splittoffN (etc.) passing to read_properties_var() and fixed
	quotation mark placement in its messages.

2004-01-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added second parameter to add_splitoff() for
	splitoff #, and pass it as part of $file to read_properties_var()
	so parsing-error error messages note which splitoff is broken.

2004-01-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if Version or Revision contain forbidden
	characters (according to Debian docs).

2004-01-26  Rob Braun  <bbraun@users.sourceforge.net>

	* Selfupdate.pm: rsync with the -r flag instead of the -a flag.
	the difference is that -r will not preserve ownership/groups,
	permissions, links, times, and device files.  None of this 
	matters for .info and .patch files, since there are no links
	or device files, and the ownership, permissions, and times
	on the server don't matter to the client.  However, we will
	continue using -a on the TIMESTAMP file to preserve the time
	on that.

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: If a package lists itself in its own Conflicts or
	Replaces, remove it from that list (needed for writing mutually
	exclusive variants).

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Added new $err_info parameter to expand_percent that
	will be printed if there's an expansion error. Remembered \n in
	that die to prevent stack backtrace. Doc-cleanup expand_percent.
	* PkgVersion.pm: Implemented new get_param_with_expansion and
	get_info_filename methods.
	* Package.pm, PkgVersion.pm: added $err_info to expand_percent calls.
	
2004-01-19  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Treat typo of %n in SplitOff:Package: as %N. Remove
	debugging.
	* PkgVersion.pm: Remove remnants of my _source_item stuff.

2004-01-16  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Consolidated common code for
	instantiating a package into a new Package->setup_package_object
	function. Moved Type inheiritance and %-expansion in Package there
	also. Evaluate SplitOff Package in SplitOff scope instead of
	parent scope. Added support for multiple language versions: 'Type:
	perl (5.6.1 5.8.1)' gives a clone of the .info that has
	each (single) Type.

2004-01-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Empirically determined that 79 chars is the
	maximum safe line length for DescDetail.
	* Package.pm: Dumb hack to keep emacs paren balancing happy (was
	interpretting # in a few lines before as comment symbol).

2004-01-13  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix for regex /$file/ not do what we want if
	$file is the literal filename when it contains regex
	metacharacters. (bugs #875876).

2004-01-12  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: params_matching() now defaults to case-insensitive.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* PkgConfig.pm: Improved get_source_items_count(). Improved
	construction of _source_items. Disabled construction of
	_source_items for now.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Removed antiquated prompt_selection(). Improved
	fink-code error checking by use of Carp::confess.

2004-01-10  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added get_source_items_count() and
	sanity-checking for get_source_items_list().

2004-01-10  Daniel Macks  <dmacks@netpace.org>

	* Base.pm: Added params_matching, a method to return the names of
	all parameters that match a passed regex.
	* PkgVersion.pm: Added _source_items, a ref to a list of refs to
	uniformly-keyed hashes of all info pertaining to each source for a
	package. Added accessor method get_source_items_list() to return a
	(deep) copy of this list.

2004-01-09  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: get_source: Do not return the default source name
	if there exists no source. Instead return 'none' as expected
	elsewhere. get_source_list and get_tarball_list return an empty
	list if there are no sources.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* CLI.pm: Fixed a bug in print_breaking: was treating an embedded
	newline as an ordinary entity (printable character), not adjusting
	the wrapping for starting a new line.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* Bootstrap.pm, SelfUpdate.pm: Swiched `cat` to Fink::Command::cat.
	* PkgVersion.pm: Improved check for failure when creating
	seg_addr_table file. Switched one system("mkdir") to &execute.

2004-01-08  Daniel Macks  <dmacks@netpace.org>

	* Validation.pm: Warning for DescDetail and DescUsage that will
	look bad in Terminal window (long lines and non-ASCII chars).
	Warning for oddly formatted Maintainer.

2004-01-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed resolve_depends code.
	* Engine.pm: Do not use BuildConflicts for packages which are not going to
	  be built!

2004-01-06  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Left this file out of the giant CLI commit.

2004-01-06  Max Horn  <max@quendi.de>

	* Engine.pm: Partially undid Justin's change from Dec 23 (revision 1.144).
	  Relatives of a package can't (and mustn't) be build dependencies of the
	  package, since they are built at *exactly the same time*.

	* Engine.pm: Fixed a case where fink would rebuild a package twice. Also
	  clarified some comments.

	* Validation.pm: BuildDepends and BuildConflicts are actually not valid in
	  splitoffs.

2004-01-05  Daniel Macks  <dmacks@netspace.org>

	* all: Moved CLI functions from Services.pm into a new CLI.pm package.

2004-01-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm:  Use eval{} instead of a subroutine to implement the 
	timeout  (and remove superfluous function stdin_timeout.)

2004-01-04  David Höhn <dmalloc@users.sourceforge.net>

	* Package.pm: Changed Storable method from store() to lock_store()
	This should help use phase out problems when a fink index tries to write
	almost at the same time

2004-01-03  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: Add a (non-exported) function stdin_timeout to
	prompt for input but timeout if no answer.  Use this to construct
	a (new) optional third argument to prompt_boolean which specifies
	a timeout interval.

	* Configure.pm: Use a 60 sec. timeout in the question being asked in
	choose_mirrors, when called from the fink-mirrors postinstall script.

2004-01-02  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Modified method get_splitoffs to return list of
	splitoff packages, not just names. No need for passing package
	name to method belonging to a package. Moved method to other
	accessor methods.
	* Engine.pm: Modification to use changed get_splitoffs method.

2004-01-01  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Added two methods to access lists of sources and 
	tarballs used by given package

2004-01-01  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* all: updated Copyright notice

2003-12-30  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm,Engine.pm,Mirror.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	Completed prompt_selection -> prompt_selection_new migration.
	* Services.pm: prompt_selection deprecated in favor of ..._new so
	don't export.
	
2003-12-29  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: prompt_selection_new(): forgot to deal with
	unspecified or invalid default choice.
	* Configure.pm: Switch from using prompt_selection to
	prompt_selection_new.
	
2003-12-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Type:splitoff is redundant: switch to checking
	for presence of parent link. Now okay to use Type in splitoffs
	(else inherits from parent). Added Type:none to clear.
	* Validation.pm: Allow Type:none. Allow Type and UpdatePOD in
	splitoffs.
	
2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: *don't* export "read_properties_lines".
	Instead, introduce new subroutines "read_properties_multival_var"
	and "read_properties_multival_lines", the first of which is exported.
	* Mirror.pm: use "read_properties_multival_var" when setting 
	default values for mirrors.

2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Mirror.pm: setting default values for rsync and sourceforge 
	mirror sets, as well as master mirror set, in case the mirror
	directory is absent or damaged.

2003-12-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: export "read_properties_lines"
	* Mirror.pm: set a default value for Master mirror, if config file 
	not present

2003-12-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Configure.pm: export "choose_mirrors", and enlarge the dialogue
	with users at the beginning of choosing the mirrors.  (This will 
	be used in the 	postinstall script of the fink-mirrors package.)
	Also check for the existence of mirror/_keys and mirror/_list,
	and bail with a warning to install fink-mirrors if these are not
	found.

	* Bootstrap.pm: don't install the mirror directory (or its files)
	in the fink package (this is being moved to the fink-mirrors
	package)

2003-12-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed fink list --help output since some of it was wrong.
	* Engine.pm: Fixed fink build only checking builddepends: this can't
	happen since -shlibs are needed at build time as well as other things.

2003-12-23  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Support %lV and %lv as raw and punctionation-free
	values of Type version string (if provided).
	* Package.pm: Support %lv in Package.
	* Validation.pm: Allow %lv in Package (for info filename check).
	
2003-12-23  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type java (version mandatory).

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type python, guile, ruby
	(version optional, except mandatory for python).

2003-12-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: move inject.pl code into Bootstrap.pm, and
	separate out the common code from inject.pl and bootstrap.pl
	into subroutines that can be used by both

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: All patch file tests now also applied to files
	used in PatchScript. Hardcoded /sw test fixed to skip diff
	context- and being-replaced lines.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Was only checking first line of .patch. Fixed.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Check for hardcoded /sw in patch file (as loaded
	by Patch, not as by PatchScript).

2003-12-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Gave prompt_selection_new more flexible default-
	choice behavior. Not gonna change API any more so okay to use.

2003-12-20  Remi Mommsen  <remigius.mommsen@cern.ch>

	* Engine.pm: Extended MatchPackageRegEx which resorts the
	candidate list so that packages matching the regex are at the top
	in case that multiple packages match the regex. 

2003-12-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Detect Java3D and Java Advanced Imaging

2003-12-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.2.0.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* PkgVersion,Validation.pm: Support for "Source: none" as synonym
	for "Type: NoSource".

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added error if there is a source or MD5 for type
	Bundle.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added errors if there is an MD5 without a
	corresponding source, if no MD5 and using the implicit/default
	source, or if there is a source or MD5 for type NoSource.
	
2003-12-17  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Added prompt_selection_new (like prompt_selection
	except parameters are less redundant and more logical). Rewrote
	prompt_selection to be just a wrapper around prompt_selection_new.
	
2003-12-16  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Remembered that Type doesn't always exist

2003-12-16  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Change to a more generic way of parsing perl
	version info from Type
	* Validation.pm: Change to a more structured definition of allowed
	Type values

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the warning about missing packages in multi
	depends line to still display but only at verbose 4

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Stop warning about missing packages in depends line
	if an other pkg in the expression is found to statisfy it.

2003-12-15  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Changed expand_percent to do the automatic %% => %
	with regexps instead of the @PERCENT@ sentinel

2003-12-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Made BuildConflicts effective, it doesn't just tell you
	 now, it's acctually remove and reinstall after the build.

2003-12-10  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed a problem in the dep engine where if a dep was
	installed but it's deb file was missing, fink would fail.

2003-12-10  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: If the package name is being truncated in list/apropos
	print an ellipses ("...") so that the user knows about it.

	* Selfupdate.pm: Don't try to su or chown to an undefined $username.
	
2003-12-09  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Changed shlibs hash structure a little to deal with
	 multi compat versions of a shlib.  A few various tweaks.

2003-12-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Rearranged the list of allowed fields and added
	some comments to make it easier to compare this list to the
	packaging manual.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Added condition to display Information line on reading
	shlibs.  I will no longer appear between builds. Changed ${SHLIB_DEPS}
	to {SHLIB_DEPS} so perl doesn't think it' s a variable. Lots of changes
	to the core of shlibs.pm, it now won't add to explicits deps on
	the dep line, and will override a shlibs version via the matching dev
	packge on the builddepends line.
	ie: builddepends: readline (>= 4.3-25) would make the depends line
	readline-shlibs (>= 4.3-25) if readline-shlibs is a true depends.
	Also it won't depend on it's self, and various other checks and tweaks.
	

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding "fink splitoffs", shows parent and splitoffs in a
	package. Adding "fink showparent" which will return the parent package
	of a package.
	* PkgVersion.pm: Adding sub get_splitoffs() has two switches, to
	include self in list and include parent.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Properly fixed essential and builddependsonly checks in
	cmd_remove.

2003-12-07  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added force switch to resolve_depends so duplicate
	WARNINGS for the same depend won't show twice on sub depend checks.
	* Engine.pm: Added $forceoff switch to resolve_depends calls.

2003-12-04  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Fixed latest_version to continue past (and ignore)
	undef values rather than ignoring the rest of the passed list.
	* Services.pm: Finished PODifying the docs.

2003-12-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Add file-spec-pm, test-harness-pm, and test-simple-pm
	when bootstrapping under perl 5.6.x.

2003-12-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed double building issue in my dep check code. And
	removed a few more prints on secondary builds.

2003-12-03  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: made it so fink can't remove or purge essential pkgs
	and added warnings for it and not installed packages.
	Also made it so if the pkgs to be removed are the same as the ones
	in ARGV then don't ask first.  And added a print_breaking for long
	package listings. Disabled parent essential params on splitoffs.
	Changed BuildDependsOnly and Essential checks from has_param to
	param_boolean, in case it's there and set to false. Fixed the not
	installed warning, and prints and exits if nothing to do instead of
	dieing. Enabled the check each depend's depends before build.
	VERY EXPERIMENTAL please test.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Initial go at PODifying the docs.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Shuffled @EXPORT_OK to be in same order as the subs
	appear in the file.

2003-12-02  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Added --buildonly to fink list command, to list all
	packages that have a BuildDependsOnly tag. Added --buildonly to
	remove and purge as well. And Fixed fink list with virtuals, so
	if is_virtual returns 2 treat like normal pkg in listing. Added
	initial BuildConflicts code.
	* Package.pm: Fixed is_virtual so new virtuals (as of
	VirtPackage.pm) now work again, but since they have descriptions
	and version, they return 2.
	* PkgVersion.pm: Changed resolve_depends in order to enable
	proper BuildConflicts, now requires a second param "field".
	* validator.pm: Added BuildConflicts as a valid field.

2003-12-01  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Actually, my entry would fail (fink crash) if there
	were no map, not if no expanding was needed. Fixed. thesin's
	modification is a nice optimization, but seems orthogonal to the
	actual problem.

2003-11-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: With Daniel Macks entry on 11-26 expand_percent would
	fail if no expanding was needed.  Added a check to identify
	if it was needed to continue and if not just return the original
	string.

2003-11-27  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: test to see if the package being currently built
	violates any "BuildDependsOnly: true" directives, and if so,
	issue a warning.
	
2003-11-26  Daniel Macks <dmacks@netspace.org>

	* Services.pm, PkgVersion.pm: expand_percent handles %% using a
	temporary sentinel value, but that was defined in two different
	places (in expand_percent itself and in the caller of
	it). Consolidated into expand_percent.
	* Services.pm: Factored definition of a constant string out of a
	tight loop.

2003-11-25  Michael G Schwern <schwern@pobox.com

	* Config.pm: new_with_path() now takes default parameters.
	* Services.pm: read_config() now takes default parameters to pass
	through to Config->new_with_path().

2003-11-25  Michael G Schwern <schwern@pobox.com

	* Config.pm: Error message wrong when Basepath not in config file
	or config file missing entirely.  Tested.
	
2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Re-improved early-escape from recursive percent
	expansion. The main regex isn't much heavier than this check, so
	we lose in the case where multiple passes are needed but avoid
	loop overhead in the more common one-pass-needed case. May as well
	leave my "|| last" (helps sometimes, doesn't hurt, will avoid
	wheel spinning if we go to higher pass-count limit and have
	unknown %vars).

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* Command.pm: rm_rf() not returning false when it deletes some 
	directories but fails to delete another.  Tests were incorrect.

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Fixed ":ALL" target.  Changed from using
	/bin/cat to Fink::Command::cat().  Tested.

2003-11-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed conffiles with new expansion code, needed to
	move the trailing new line to be added after calling expand_percent.

2003-11-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Changed the X11 tracking to return major.minor.mini
	if using an XFree86 snapshot (ie, if the version has more than 3
	components)

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Improved early-escape from recursive percent
	expansion.

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Conversion to using only print_breaking
	(removal of print_breaking_prefix/print_breaking_twoprefix)
	changed the meaning of $prefix1 and $prefix2 (defined
	vs. logically true). Changed it back.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Removing hard coded @BASEPATH@.  Using Fink::Config
	instead.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Documenting Fink::FinkVersion.  Removing module
	template cruft.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* Config.pm: Document exported variables.  Document that you need
	a Fink::Config object for them to work and that its a Bad Idea
	to have two Fink::Config objects.

2003-11-20  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Service.pm: Make is so expand_percent ignores commented line so
	we can have % in comments.  Also added the ability to have escaped
	%, e.g. when trying to patch using perl -pi on a sprintf string that
	uses %s or such.
	* PkgVersion.pm: Added expansion for %%.

2003-11-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Don't generate prebinding references if the package
	is forcibly not prebound. (and some general cleanup and whitespace
	fixes)
	* Validation.pm: Added some missing Set* flags to the validation,
	related to LD and prebinding.

2003-11-19  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Adding initial code to add 'Installed-Size' to
	CONTROL, should be converted to a perl code instead of using du.

2003-11-19  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Package.pm (is_any_present): Add new subroutine, returns 1 if a deb
	is available locally, 0 if not.
	* Engine.pm (real_install): Allow use of a regex in fink.conf to auto-
	choose which package to install. When asking the user to make a choice
	set the selection to an available deb, if there is only one.

2003-11-18  Michael G Schwern  <schwern@pobox.com>

	* Package.pm: Write the new index atomicly to avoid a corrupted
	index should fink be killed in the middle of reindexing.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Fix a problem with syncing the crypto/ directory,
	  since it doesn't have subdirectories like main/ does.

2003-11-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: When installing into a pre-release darwin 7.x, say
	that it "should work".

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More changes, split up system-xfree86 into
	  system-xfree86, system-xfree86-shlibs, and system-xfree86-dev.

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Totally reworked the provides of the system-xfree86
	  virtual packages, so that "x11" is provided when the shared libraries
	  and an X server are present, and "x11-dev" is provided when headers
	  and development libraries are present.  This will require changes to
	  the BuildDepends: of all x11-using packages.  This is a major change
	  (considering how many files it will end up touching) so this change
	  is going into HEAD.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add --delete since it is not implied by 
	  --delete-after on older versions of rsync (10.2).

2003-11-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: reverted the "Simplified code" changes from 11-12,
	since they were apparently causing extra carriage returns in
	prompts to the user.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More checks for X version for system-xfree86.
	  this will find 4.3.99 cvs without having to run -version.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Change the thread test to use grep -a, so as not to
	  depend on nm from the dev tools.

2003-11-14  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Adding insufficient argument checks to cp and mv
	(from Paul Gaborit, see 841381).  Tested.

2003-11-14  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Fixed typo in my previous change.

2003-11-13  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Small tweak to UpdatePOD in case two files are
	being catted together
	* PkgVersion.pm: Revise get_perl_dir_arch() and the places where it
	is used, correcting some errors in UpdatePOD in case of Type: perl,
	and guaranteeing that the correct perl command is used when needed.

2003-11-13  Max Horn  <max@quendi.de>

	* Services.pm: Improve the caching of version_cmp in Fink::Services; 
	some cleanup (Patch #841031).

2003-11-13  Justin F. Hallett  <thesin@users.sourceforge.net

	* PkgVersion.pm: Fix UpdatePOD when using a Custom build/installscript
	as it may not be installing into the normal $perlarch dir.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Make sure functions fail quietly and with the
	proper return value and errno setting.  Tested.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Created to replace execute() of common shell commands
	like rm -rf and mkdir -p.  Tested.

2003-11-12  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Clarified "unable to parse..." warning message.

2003-11-12  Michael G Schwern <schwern@pobox.com>

	* Package.pm: Does not use execute() so don't import it from
	Fink::Services.

2003-11-12  Max Horn  <max@quendi.de>

	* Services.pm: Simplified code a bit.

2003-11-12  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add rsync mirroring fallback with prompting, similar
	  to distfiles mirroring/fetching.

2003-11-12  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Changed warnings about fields in splitoffs to say
	in which splitoff they occurred (could be multiple splitoffs, and
	some warnings could occur in the parent as well).

2003-11-11  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: "uninitialized value in chomp" warning below
	  because get_perl_dir_arch()'s attempt at reading the system perl's
	  Config.pm wasn't working.  Forgot a print.  chomp() now unnecessary.

2003-11-11  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Recurse down multiple directories, to get 
	  libs/perlmods

2003-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Validation.pm: Allow 'Homepage' field in splitoffs. 
	  This actually matches what our packaging docs say.

2003-11-11  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Selfupdate.pm: Minor bugfix. Now properly does su to the user.
	* PkgVersion.pm: Fix "uninitialized value in chomp" Seems to be popular
	  these days.
	
2003-11-10  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add a TIMESTAMP check when using rsync.
	* SelfUpdate.pm: Remove support for a Distribution in Trees.
	* SelfUpdate.pm: Do rsync updates with a single rsync command.

2003-11-10  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: Change below broke get_perl_dir_arch(), didn't
	  parse the output from -V:archname.  Fixed by using Config.pm
	  instead.  Tested.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage: fall back to XFree86 -version if we can't figure
	  it out from man pages.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: No point in continuing to search through the path if
	  we have a match.
	* Package.pm: Fix version spec checking to allow epochs.
	* PkgVersion.pm: Ask perl what it's arch directory is, rather than
	  assuming based on version.

2003-11-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Make the check for package-name in Description:
	case-insensitive.

2003-11-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Warn when Files: entries have / at the end (messes
	  up panther mv sometimes)

2003-11-09  Max Horn  <max@quendi.de>

	* Validation.pm: Minimal validation of splitoffs. This definitely should be
	  improved ASAP, though.
	* PkgVersion.pm: Propagate epoch to splitoffs.
	* Validation.pm: Improved validation of splitoffs. Check more fields for
	  hardcoded /sw.
	* PkgVersion.pm: Factored out duplicated perl handling code into a new
	  method get_perl_version_dir_arch().
	* Validation.pm: Allow type "perl 5.8.1". Allow "License" in splitoffs.
	* Package.pm, PkgVersion.pm, SelfUpdate.pm: Invoke 'find' as /usr/bin/find;
	  fixed potential data loss issue when volume/directory names contains
	  whitespaces.

2003-11-08  Max Horn  <max@quendi.de>

	* Services.pm: Remove trailing empty lines in heredocs (Bug #670712). Also
	  made .info parsing stricter, which discovers more illegal .info files.
	* Validation.pm: When checking whether a field contains the package name
	  or version, only report a warning if they occur as full words (and not
	  just as substring of a longer name/version).

2003-11-07  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Moved fink-prebinding environment-setting stuff
	  to the fink runtime so it doesn't sit in the users' environments.

2003-11-07  Max Horn  <max@quendi.de>

	* Engine.pm: Fix bug causing incorrect installation of 'relatives' when
	  rebuilding splitoff packages (Bug #645841).
	* Package.pm: Fink::Package %package_hash -> $packages (Patch #831573).
	* Base.pm, Config.pm: Fink::Config cleanup & documentation (Patch #832063).
	* Validation.pm: Validate emacs packages (Patch #748665).
	* Base.pm: Fink::Base docs and cleanup (Patch #832828).

2003-11-06  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support Mac OS X 10.3 / Darwin 7.0.0

2003-11-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* SelfUpdate.pm: Make this work with rsync-hfs.

2003-11-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Always regenerate the index on a
	"fink selfupdate".

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, FinkVersion.pm.in, NetAccess.pm,
	PkgVersion.pm, SelfUpdate.pm: just being pedantic, updating
	our external calls to system versions, for safety.

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: Bomb if Distribution isn't set.

2003-11-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Add polite feedback if a .deb is okay in analogy
	to behavior for .info (cf. exiting silently). (Patch #822456)

2003-10-31  Michael G Schwern <schwern@pobox.com>

	* Mirror.pm: Mirror doesn't have fetch_url or fetch_url_to_file
	functions, yet was exporting them.

2003-10-29  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: check for threaded X, and check for the file
	before trying to read the xterm man page.

2003-10-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: make system-xfree86 virtual complain if you're
	missing important SDK bits.  =)
    
2003-10-25  Mohammad A. Haque  <batmanppc@users.sourceforge.net>

	* Engine.pm: Patch 828653 fix fink cleanup and improve user feedback
    
2003-10-25  Justin F. Hallett  <thesin@users.sourceforge.net

	* Service.pm: Added an get_path function that is a perl version
	of the command util which, you give it a file name and it returns
	the first match in the path of that file with it's full path.
	* PkgVersion.pm: Changed which call in for perl$version to use
	new get_path function.

2003-10-24  Benjamin Reed  <rangerrick@users.sourceforge.net

	* SelfUpdate.pm: Modify the rsync command to only remove
	CVS directories in trees that are updated through rsync.

2003-10-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the "point" selfupdate method so that the
	version number information which it retrieves from the Fink
	website is specific to which distribution is the current one
	(e.g., whether we are running 10.2 or 10.2-gcc3.3).

2003-10-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed a problem with perlmodules where when
	PERL=<perlbinary> it would try and run ../<perlbinary> this is
	fixed by using the full path to <perlbinary>.

2003-10-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Test for the presence of gcc 3.3, and the correct
	version of gcc 3.3, in order to decide between the 10.2 and
	10.2-gcc3.3 distributions.

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm, Shlibs.pm:
	The shlibs code is giving trouble, so we move it to its own branch 
	again.  New branch is called "shlibs-20031018".

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Add an automatic dependency on the current version 
	of darwin, whenever building a package.  (This is so that packages
	which have MACSOX_DEPLOYMENT_TARGET set by default in 10.3, don't
	get built in 10.3 but then installed in 10.2 by accident.)

2003-10-18  Peter O'Gorman <ogorman@users.sourceforge.net>
	
	* VirtPackage.pm: New virtual package for gcc2 (needed for 10.3)

2003-10-17  Michael G Schwern <schwern@users.sourceforge.net>

	* Package.pm, Services.pm: Optimizations to speed up
	some common operations.

2003-10-17  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: Change default rsync host from 
	rsync://fink.opendarwin.org/finkinfo/ to
	rsync://master.us.finkmirrors.net/finkinfo/

2003-10-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, Configure.pm: Change the default verbosity level from
	"3" (high) to "1" (low)
	* Shlibs.pm: change the DEBUG output from the Shlibs package, to 
	output which is only shown at verbosity level 3

2003-10-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: make sure Trees line doesn't have absolute paths
	or ../'s in it.

2003-10-11  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* ChangeLog, Bootstrap.pm, Engine.pm, Package.pm, PkgVersion.pm, 
	SelfUpdate.pm, Shlibs.pm: merge in the "shlibs" branch from July
	
2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: make the gcc_select error a bit more user
	friendly.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Enable the Trees: hack for rsync'ing multiple
	dists inside a fink dists tree.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Check that a directory exists on the server
	before trying to rsync it.  Also some more quoting to make
	things a bit more sane.

2003-10-10  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm: PATH paranoia. Always use full paths here.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm, PkgVersion.pm, VirtPackage.pm: move the system
	  perl stuff from PkgVersion.pm to Services.pm so it can be used
	  by other things (and then use it in VirtPackage.pm to make a
	  system-perl virtual)

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: make sure get_sw_vers() is EXPORT_OK.
	* PkgVersion.pm: make sure we know what the system perl
	  version is on unversioned Type: perl info files.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: handle panther 5.8.1 perl modules properly.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Added some bounds-checking to paths in the
	dists tree and such for rsync, also changed all mkdir's to
	mkdir -p, and change ownership of files so that rsync can pass.

2003-10-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change for the 0.14.1 beta release:
	enables the 10.2-gcc3.3 and 10.3 trees

2003-10-05  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, SelfUpdate.pm: Further tweaks to the user interface 
	for selfupdate commands.  Also, ensure that the SelfUpdateMethod 
	conf option is properly reset when selfupdate-rsync is invoked.

2003-10-04  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* FinkVersion.pm.in, Selfupdate.pm: Give the user some choice of 
	update method; use a stamp-rsync-live file when using the rsync 
	method.
	
2003-10-02  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add updating of the VERSION file when using
	selfupdate-rsync.

2003-10-01  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm, Engine.pm:  Add selfupdate-rsync option for 
	updating via rsync instead of cvs.

2003-09-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Package.pm: reformat a few fields so that they can have
	carriage returns and such without confusing things

	* Services.pm: cleaned up some rare cases where uninitialized
	values can show up.

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: don't do update-prebinding on files that are
	actually linking to things in /usr/lib!

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm, VirtPackage.pm: Refactored the
	sw_vers code so it can be used for setting
	MACOSX_DEPLOYMENT_TARGET as well as making the virtual macosx
	package.  Also, set MACOSX_DEPLOYMENT_TARGET in packages that
	don't specify SetMACOSX_DEPLOYMENT_TARGET to the target arch
	unless it's 10.2 (special-cased to set to 10.1 for compatibility
	purposes).

2003-09-23  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: die if no md5 specified. You were warned!

2003-09-22  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support 10.2.8.

2003-09-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Fix regex parsing when unusual characters are
	in the filename.

2003-09-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement java virtuals.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement system-xfree86 as a list of provides,
	instead of the system-xfree86-foo packages.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Some cleanup/performance updates to the X11 detect.

2003-09-08  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* VirtPackage.pm: Autodetect X11 (I hope, maybe, Please test/fix)

2003-09-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Allow prebinding whenever the distribution is
	greater than or equal to 10.2-gcc3.3 .

2003-09-06  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change on the "test_10_3" branch: if
	this is run on 10.2, it will set up the 10.2-gcc3.3 distribution.

2003-09-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the way Type: perl works, it now can use
	ConfigureParams and makes ue of %c like normal builds, this will
	standarize how perlmodules and normal packages are packaged.

2003-08-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: fix regex for detecting OS X version

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: fix my mistake of using has_param instead of
	param_boolean like I should have the first time
	* Validate.pm: Added NoPerlType to valid field list and boolean list

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added NoPerlTests field to info file for Type: perl
	this will make it easier fo rthe maintainers to keep the pkgs compat
	since you will nolonger need to manually type the configure params to
	remove the make test proceedure.

2003-08-20  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: Print the expected an actual checksums when comparison
	fails. Saves me typing "md5 /sw/src".

2003-08-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Check gcc_select when the GCC field is present,
	and exit with an error if the wrong version of gcc has been selected.

2003-08-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Disable the prebinding code unless the distribution
	is > 10.2.
	* Bootstrap.pm, SelfUpdate.pm: Add gettext-bin to the bootstrap and
	update lists (in preparation for making it non-essential)
	* Bootstrap.pm: Move the code which enables the 10.3 distribution to
	a new branch, "test_10_3"

2003-08-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Completly change how we will handle users and groups
	  firstly pkgs that require user/group will depends on user-<user>
	  and group-<group>, which will create and maintain the info for that
	  user and group.
	* User.pm: Made changes to accomadate teh new style of user/group		  handling.

2003-08-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: moved where the scripts are built to top of
	  script processing.
	* User.pm: getting and setting perms should now work, added a few
	  new subs, almost functional now.

2003-08-09  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: added use User.pm and added call to get_perms which	
	  returns a postinstscript to set perms at install.  And to make sure
	  user exists.
	* PkgVersion.pm: check if need to add user and/or group during build
	* User.pm: added a few new subs and completing others.  No longer
	  need a db for this will just use User.pm to check the current
	  stuff and can form a list from that if need be.

2003-08-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* User.pm: adding User.pm for all user/group functions, started
	  template for it, doesn't do anything yet.

2003-07-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added second option to resolve_depends call to specify
	  the operation
	* PkgVersion.pm: enabled the second option checking in resolve_depends
	  to force dep reading from the info if rebuild is the operation

2003-07-17  Justin F. Hallett  <thesin@users.sourceforge.net>

	* shlibs.pm: removed my debug line, left RangerRick's for now
	* shlibs.pm: added more space filtering in the inject_shlibs sub
	* PkgVersion.pm: added verbosity level for output in 'resolve_depends'

2003-07-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Don't print the output of linking the
	-single_module test we only care about pass/fail.

2003-07-16  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added verbosity level for output for 'fink depends'

2003-07-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding 'fink depends' to give a list of expanded depends
	  good for maintainers since it'sll expand ${SHLIB_DEPS} if the pkg
	  is built.

2003-07-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, SelfUpdate.pm: Add bzip2-dev, gettext-dev, 
	libiconv-dev, ncurses-dev to the bootstrap and update lists

2003-07-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Shlibs.pm: Evil, scary voodoo to remove duplicates in dependency
	  specifications.  I tried to document the heck out of it, but it's
	  still pretty freakish.  Handle with care.  :)

2003-07-14  Max Horn  <max@quendi.de>

	* VirtPackage.pm: Explicitly check for the existence of 'what' and 'cc'
	before invoking them. This is necessary for the PDB, which runs on a
	non-darwin system currently, but also for any system which has no compiler.

2003-07-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Added new file to deal with all the shlibs functions
	* Bootstrap.pm: Added call to require_shlibs
	* Selfupdate.pm Added call to forget_shlibs and require_shlibs (in case
	  we use selfupdate to populate override.shlibs)
	* Engine.pm: added forget, and require for shlibs to enable auto index
	* Package.pm: removed a \n to clean up the output since the shlibs
	  index code is always called after the pkg index code
	* PkgVersion.pm: adding ${SHLIB_DEPS} replace code, had to ignore
	  ${SHLIB_DEPS} in resolve_depends
	* PkgVersion.pm: added check in resolve_depends for deb file, if deb
	  file call get_debdeps
	* PkgVersion.pm: added get_debdeps function to read the deps from a
	  deb file and return the comma delimited string

2003-07-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: switch from BSD tar to /bin/pax for the
	implementation of TarFilesRename.

2003-07-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm, Config.pm, Engine.pm, Package.pm, PkgVersion.pm, 
	Bootstrap.pm, Status.pm:
	Move all virtual package stuff to one file, add fink-virtual-pkgs file.

2003-07-05  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Revision of "Type: perl" to handle changes in 5.8.0
	(thanks to JF Mertens)

2003-07-04  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Check for hardcoded /sw in the scripts and set fields.

2003-07-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Removed some unnecessary debug stuff

2003-07-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm, Status.pm: added cctools-single-module
	  (cctools-<version>-1 is deprecated)
	  It is better to test capabilities than versions

2003-06-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm: Added checks for 10.3 tree
	* PkgVersion.pm: Adding RangerRick's patch for prebinding for 10.3 only

2003-06-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Bootstrapping with perl 5.6.1 also requires 
	storable-pm561.

2003-06-14  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Allow bootstrapping with perl 5.6.1; cleaned up code; show
	  more user friendly error message in case of an unknown perl version.

2003-06-13  Ben Hines <benh57@users.sourceforge.net>

	* NetAccess.pm: Support file:// and bare tarball names without choking
	
2003-06-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with perl 5.8.1 too

2003-06-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Clarify nesting too deep error.

2003-06-11  Justin F. Hallett <thesin@users.sourceforge.net>

	* Selfupdate.pm: added -q to cvs commands based on verbosity level
	from the config file and/or command line.

2003-06-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with either perl 5.6.0 or 
	perl 5.8.0

2003-06-07  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm:  Allow an essential package to have a 
	splitoff which is not essential.  (However, the parent of an 
	essential package must be essential.)  Uses a new virtual field 
	_ParentEssential.

2003-06-04  Chris Zubrzycki <beren12@users.sourceforge.net>

	* Engine.pm: Add fink list limit by maintainer or tree.

2003-05-26  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Fix alternate depends on splitoffs.

2003-05-23  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use full path to uname to prevent build problems.
	
2003-05-23  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Bootstrap.pm: Handle (Open)Darwin 6.6.

2003-05-23  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Allow <package>.info.

2003-05-16  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Cache arch to minimize uname calls.
	
2003-05-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check the .deb file for the presence of a .bundle
	in a non-versioned subdirectory of /sw/lib/perl5; if present, warn
	about a possible perl XS module installed incorrectly.

2003-05-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: Introduce new versioned variants
	of "Type: perl".  (Patch #725425)

2003-05-10  Max Horn  <max@quendi.de>

	* NetAccess.pm: Don't default to MasterFirst, but rather to MasterLast 
	  (using MasterFirst as long as the master mirror has not all files is
	  causing more pain than it helps).

2003-05-10  Rob Braun <bbraun@users.sourceforge.net>

	* PkgVersion.pm: When doing a fetch-* --dry-run, and the source
	  doesn't have a URL, ignore the entry.

2003-05-07  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: support 10.2.6
	
2003-05-07  Rob Braun <bbraun@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm,
	  Services.pm, Validation.pm: Remove hard coded references
	  to 'powerpc'.  (Patch #732058)

	* PkgVersion.pm, Validation.pm: Add %m for machine architecture
	  string expansion.

2003-05-04  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Added check_host and check_files, used by bootstrap.pl and
	  postinstall.pl (Patch #731980).

	* PkgVersion.pm: Explicitly invoke get_bsbase with its full qualified name,
	  Fink::Bootstrap::get_bsbase (Patch #731980).

2003-05-03  Max Horn  <max@quendi.de>

	* Validation.pm: Check for bad (DOS or Mac) line endings in .info / .patch
	  files, and also check for empty .patch files (Patch #731791).

2003-05-02  Max Horn  <max@quendi.de>

	* Validation.pm: Do not allow arbitrary license combinations, rather only a
	  fixed set (which we can extend as needed). See bug #670788. 

	* Services.pm: Warn if an .info file uses a field more than once (will soon
	  be turned into an error).

2003-04-26  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fix multi line Depends/BuildDepends fields, and slightly
	  improve detection of malformed dependencies. 

2003-04-15	Ben Hines <benh57@users.sourceforge.net>

    * SelfUpdate.pm: Allow distribution upgrades to work (append fake revision)
    
2003-04-08	Ben Hines <benh57@users.sourceforge.net>

    * Services.pm: Allow comments (#) in fink Script fields
    
2003-04-05	Ben Hines <benh57@users.sourceforge.net>

	* Many Files: Implement fink master mirroring (Patch #700260).
	  
2003-04-04  Max Horn  <max@quendi.de>

	* PkgVersion.pm (set_env): Fix for environment variables that contain a '='
	  in their value (fix by Daphne Pfister).

2003-03-30  Max Horn  <max@quendi.de>

	* Validation.pm: There are no NoSourceNDirectory fields (i.e. with a
	  number).

2003-03-20  Max Horn  <max@quendi.de>

	* PkgVersion.pm (run_script): Backup the environment before clearing it
	  via set_env; then after running the script, restore it.

2003-03-07	Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Add 'ignore-restrictive' option to "fetch-missing", 
	  to support creating fink mirrors.
	
2003-03-05	Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Add section to dpkg control file (should prevent "unknown
	  section" for unstable locally built binaries in dselect) and correct root
	  dir error typo.
	
2003-02-28  Max Horn  <max@quendi.de>

	* Package.pm: Reverting a "fix" from 2003-01-27 (no ChangeLog entry was
	  made) which causes the package DB file to grow ad infinitum (unless a
	  manual "fink index" is performed). A proper fix for the issue this was
	  meant to fix has yet to be added.

2003-02-27  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink list" output (some whitespaces were converted to
	  tabs but shouldn't have been).

	* All files: Changed from indent/tab style 2/8 (strange emacs style) to
	  the more common 4/4 style.

	* Engine.pm: Seperated the help texts for "fink list" and "fink apropos".
	  Also clarified and unified their wording.

2003-02-17  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm, Status.pm: provide virtual package for cctools (Patch #687178).

2003-02-16  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use /sbin/md5 for md5sums if present (Patch #675893).
	  
2003-02-16  Max Horn  <max@quendi.de>

	* Package.pm, PkgVersion.pm, SelfUpdate.pm, Services.pm: Added Ben Hines
	  patch for epoch support (Patch #607742).
	  
	* Validation.pm: Make package validator recognize the new Epoch field.

2003-01-29 Ben Hines <benh57@users.sourceforge.net>

	* Package.pm: Do not require storable to create index (Bug #676512).
	  
2003-01-28  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Engine.pm: Adjust dependencies when working with multiple
	splitoffs at the same time (Bug #641462).

2003-01-24  Max Horn  <max@quendi.de>

	* Package.pm: Carsten Klapp's patch to speed up search_comparedb and
	  update_db, which speeds up many fink commands a bit (Patch #674313).
	
	* Services.pm: Tiny optimization in expand_percent.
	
	* Validation.pm: Fix validation if not BuildPath is specified in fink.conf.

2003-01-23  Max Horn  <max@quendi.de>

	* Services.pm: Added Paul Gaborit's patch to speed up expand_percent and 
	  hence index building.

2003-01-22  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm, Package.pm: Match "fink list" & "install/remove/etc"
	  items case-insensitively (Patch #622663).
	  
2003-01-22  Max Horn  <max@quendi.de>

	* Various files: Applied Chris Zubrzycki's build directory patch which
	  allows the use of an alternate build dir (Patch #658682).

2003-01-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Allow a new license "Restrictive/Distributable"
	  to indicate that distribution of binaries is allowed even though
	  the license is restrictive.
	
2003-01-15  Max Horn  <max@quendi.de>

	* Validation.pm: Putting stuff inside /sw/src is illegal for a .deb,
	  but just containing /sw/src is fine (as long as it is empty).

2003-01-14  Max Horn  <max@quendi.de>

	* Engine.pm, Services.pm: Fixing problems with exit codes (Patch #662894).

	* Engine.pm: 'fink apropos' command now also matches the package name,
	  not just the package description (Patch #661169).

	* Services.pm: Added terminal width fix from patch #598402.

2003-01-13  Finlay Dobbie <finlay@users.sourceforge.net>

	* PkgVersion.pm (merge): Added warning to if we try to merge a 
	non-dummy package.
	
2003-01-12  Dave Morrison <dmrrsn@users.sourceforge.net>

	* all files: updated copyright notice to include 2003

2003-01-12  Finlay Dobbie <finlayd@users.sourceforge.net>

	* PkgVersion.pm: Fix splitoff dependency problem (Bug #641466).
	Also removed the really old "pkg <blah> version ###" text, finally.
	
	* Package.pm: Moved to custom find code for scan_packages. Hopefully
	safer, possibly slightly faster, but I doubt it.
	
2003-01-07  Max Horn  <max@quendi.de>

	* Validation.pm: Warn if MD5 field(s) is/are missing.

2003-01-05  Justin F. Hallett <thesin@users.sourceforge.net>

	* Engine.pm:  Added sub phase_purge

	* PkgVersion.pm:  Added sub cmd_purge and change fink purge to
	acctually do a dpkg purge

2003-01-02  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Services.pm:  One-liner fix to get rid of an undefined warning

2002-12-24  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Perl syntax fixes (thanks to Randal Schwartz)

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm:  Back out the proposed changes to default values
	for the environment variables CPPFLAGS, LDFLAGS, LIBRARY_PATH, and
	DYLD_LIBRARY_PATH, which have been moved to the CVS branch "isystem"
	for further testing.

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm:  Allow the MACOSX_DEPLOYMENT_TARGET
	environment variable to be set in Fink. (Patch # 652716).

2002-12-22  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Fix bootstrapping problem caused by giving full
	path-name to install-info.

2002-12-19  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Allow whitespace after here-document separators.
	
2002-12-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: Pass filename to read_properties_var to 
	  clarify here-document error.
	
2002-12-11  Benjamin Reed <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Added a key to the package object to track the
	"siblings" of a package.

	* Engine.pm: Added some code to check for sibling packages that are
	already installed or due to be installed, so that the user does not
	get asked to install something unless necessary (ie, if libungif-shlibs
	is already installed, it won't ask to choose between giflib and libungif).
	Also changed some of the other code to use the new "sibling" attribute
	from the PkgVersion.pm change above.

2002-12-04  Dave Morrison <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the test used during the non-CVS version of 
	fink selfupdate to check CURRENT_VERSION and download the file named 
	dists-###.tar.gz (rather than LATEST_VERSION and 
	packages-###.tar.gz)

2002-11-18  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Patch #608920: Add --keep-root-dir and --keep-build-dir.

2002-11-14  Justin Hallett <thesin@users.sourceforge.net>

	* Engine.pm: fixed scanpackage default section to use proper value.

2002-11-13  Max Horn  <max@quendi.de>

	* Engine.pm: Install build dependencies when doing a rebuild (bug #637689).

2002-11-13  Chris Zubrzycki <beren12@users.sourceforge.net>

	* PkgVersion.pm: Fix the path of install-info. It is in %p/sbin, not %p/bin

2002-11-12  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Apparently the install-info of texinfo is incompatible with
	 the dpkg one. Hence we reverse the previous change and instead harcode the
	 location of our install-info.

2002-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Use "--info-dir" instead of "--infodir" as argument to 
	  the install-info command (this should prevent problems with texinfo
	  version of install-info).

2002-10-31  Max Horn  <max@quendi.de>

	* Engine.pm: When we we build a package which we are not going to install
	  (e.g. as consequence of a 'fink build foo'), only resolve the build time
	  dependencies, not install-time deps (currently this only affects splitoffs
	  which depends on a sibling).

	* PkgVersion.pm: Build deps of a splitoff are equivalent to the parent's.
	
	* PkgVersion.pm: Fixed typos, clarified/extended some comments.

	* PkgVersion.pm: Set DYLD_LIBRARY_PATH, too. This  allows libtool to find
	  its *.la files in /sw/lib again.

2002-10-27  Max Horn  <max@quendi.de>

	* Mirror.pm: Never use "retry same mirror" as initial default choice if 
	  there are other mirrors.
	
	* PkgVersion.pm: CPPFLAGS=-no-cpp-precomp + CPATH doesn't work correctly
	  with tar and probably many other packages. With -isystem, everything seems
	  fine now.

2002-10-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed bootstrap (my last change broke it).

	* PkgVersion.pm: Instead of the old default values for CPPFLAGS and LDFLAGS,
	  we now set CPATH and LIBRARY_PATH to point to the Fink include/lib dirs.
	  This should avoid many problem encountered in the past. However, it may
	  also break a few existing packages.
	  Since the Apple C preprocessor seems to ignore CPATH, we also set 
	  by default -no-cpp-precomp (many packages need this anyway).

	* Validation.pm: recognize (No)SetCPATH and (No)SetLIBRARY_PATH fields.

2002-10-21  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Fix typo in nesting too deep error.
	
2002-10-15  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed a wrong 'circular dependencies' error caused by my 
	  recent changes.

2002-10-14  Max Horn  <max@quendi.de>

	* Validation.pm: Recognize Tar??FilesRename field

	* Engine.pm: Once more install all splitoffs with a single call to dpkg
	  (this is done to avoid certain update troubles with splitoffs).

	* PkgVersion.pm: Allow percent expansion in CustomMirror field
	 (patch #621175, thanks to Ben Hines)

	* Engine.pm: Rewrote parts of real_install to hopefully make it cleaner,
	  easier to understand, and less buggy when it comes to splitoffs.

2002-10-12 Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When a Shlibs field is present, write its contents 
	into DEBIAN/shlibs when building the deb

	* Validation.pm: Added Shlibs field
	
2002-10-10  Max Horn  <max@quendi.de>

	* Validation.pm: Added RunTimeVars field; warn if description ends with "."

2002-10-04  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: Another small patch to the splitoff code.  This patch
	  changes the checking for flags (reinstall, rebuild, etc.) to match
	  the code used for installing the primary package, and it makes
	  sure that the parent splitoff is the last one installed on the
	  dpkg command-line to fix goofy dpkg ordering issues.

2002-09-28  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm, NetAccess.pm: Patch 612681: Allow "continue" 
	  for bad MD5 during "fink install... "

	* PkgVersion.pm: Fix Axel problem with partial downloads

	* PkgVersion.pm: Change some tarballs to "file"s

2002-09-28  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: small patch to fix 'fink rebuild' and possibly some other
	  buglets that could sneak through.  If a package has splitoffs, it was
	  sometimes getting marked as "already activated" even if it was set to
	  be explicitly reinstalled.

2002-09-25  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: fixed so that the rest of a splitoff doesn't get
	  reinstalled if just one package from the splitoff is being installed

	* PkgVersion.pm: fixes the get_fullname bug when a dependency
	  doesn't exist

	* PkgVersion.pm: moved the code that checks for existing versions
	  in the package tree when resolving dependencies -- in some cases
	  it could die because a package that wasn't supposed to exist was
	  getting marked as being there

2002-09-25  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Patch #614133: fix gnome mirror

2002-09-19  Max Horn  <max@quendi.de>

	* Engine.pm, Package.pm, PkgVersion.pm: Patch #610249: fix for the 'node 
	  exists' bug (bug #60016)

2002-09-08  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm: adds $distribution (read from the config file) as
	  an exported item

	* SelfUpdate.pm: now checks out the "dists" CVS module rather
	  than the "packages" one (still as the "fink" directory).  
	  This contains a "10.2" subdirectory.  Users using 10.1 also 
	  get a second checkout: "packages/dists" is checked out as 
	  "fink/10.1".

	* Validation.pm: added the new "gcc" field
	
2002-08-21  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink remove" command

2002-08-19  Max Horn  <max@quendi.de>

	* Engine.pm, PkgVersion.pm: Changed the data path for "fink remove" a bit

	* Engine.pm, PkgVersion.pm: Patch #596239 (fink splitoff install changes)
	  incorporated, improves splitoff handling

	* Validation.pm: Added JarFiles and TarFilesRename fields.

2002-08-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Enhanced how the Files field (in splitoffs) is handled:
	  if the given path starts with a slash, we treat it as relative to %d/%D
	  otherwise as relative to %i/%I (as we do currently anyway).
	
	* Services.pm: Fix for bug #545155 (it was possible to cause infinite
	  recursion during percent expansion).

2002-08-10  Max Horn  <max@quendi.de>

	* SelfUpdate.pm: Only force a second rebuild of the package database, and 
	  also only restart Fink if the package manager is being updated.

2002-08-05  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Improved the "fink cleanup" command to also clean
	  files in /sw/src (only files not directories - removing directories in 
	  /sw/src is dangerous as it can interupt running builds etc.)

	* Mirror.pm: Don't use mirror timestamp as a mirror (Bug #563182).

2002-08-04  Max Horn  <max@quendi.de>

	* Config.pm, Configure.pm: Fixed verbosity level selection.

	* PkgVersion.pm: Patch #588476 (Java support) by Sylvain Cuaz.

	* Fixed bug #548373 (package DB read thrice). It is not only read twice
	  (the new package manager may support new features, and thus must rebuild
	  the database once more)

	* Engine.pm: Patch #588705: Automates passing on the options
	  (by Sylvain Cuaz)

2002-08-03  Max Horn  <max@quendi.de>

	* Services.pm: Fixed read_properties_multival, it was broken by the
	  RuntimeVars patch.

	* PkgVersion.pm, Services.pm: Patch #579210: RuntimeVars field added
	  (thanks to Sylvain Cuaz for this)

2002-07-31  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Small fix to Configure.pm for the verbosity level selection,
	  which was reported not working. Should be fine now.

2002-07-28  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Added /sbin and /usr/sbin to the clean env since some pkgs need
	  stuff like chown or chmod to install properly.

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Changed spacing in fink list easier to use with awk or cut
	* added a space before pkg list for better seperation of info

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  But COLUMNS needs to bet exported in init.{csh, sh}

2002-07-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Temp Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  Need better fix in future, maybe read $ENV{COLUMNS}

2002-07-25  Max Horn  <max@quendi.de>
	
	* PkgVersion.pm: Fixed Bootstrap (use /usr/bin/gnutar if %p/bin/tar is missing)

	* Engine.pm: Little fix that ensures Fink runs even if not on a terminal.
	
2002-07-24  Max Horn  <max@quendi.de>

	* Incorporated patch #504498 by Justin F. Hallett which adds the
	  TarFilesRename and TarNFilesRename field.

	* Incorporated patch #577882 by Sylvain Cuaz which cleans the environment 
	before building packages.

2002-07-22  Max Horn  <max@quendi.de>

	* Various files: Applied Justin's multi-level verbosity patch.

2002-07-06  Max Horn  <max@quendi.de>

	* Package.pm (scan_all, update_db): Fixed index'ing bug.

2002-06-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Added a "fink cleanup" command, still unfinished,
	but already usable to clean up .deb files.

2002-06-08  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Added apt-shlibs to the list of packages that are
	automatically installed during bootstrap.
	
	* Engine.pm (cmd_scanpackages): Made apt-shlibs an "important" package.

	* Package.pm: Implemented use_cache flag - can later be used to add an
	option to turn off the package cacher temporarily.
	
	* SelfUpdate.pm (finish): Include apt-shlibs in the list of packags that are
	updated upon a selfupdate.

2002-05-28  Max Horn  <max@quendi.de>

	* Services.pm (file_MD5_checksum): Fixed bug caused by certain special
	characters occuring in filenames passed to this function.

2002-05-28  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_patch, phase_compile, phase_install): Now use the new
	run_script method; single-shell scripts are now actually usable inside
	InstallScript and PatchScript.

	* PkgVersion.pm: New method run_script that encapsulates running a script.

2002-05-27  Max Horn  <max@quendi.de>

	* Validation.pm: Accept Source-MD5/SourceN-MD5 as legal fields.

2002-05-26  Max Horn  <max@quendi.de>

	* Engine.pm (do_real_list): Fixed bug that occured when output of 'fink list'
	was not going to a terminal and --width=auto was specified.

2002-05-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added Source-MD5/SourceN-MD5 fields.

	* Services.pm: Added file_MD5_checksum function.

	* PkgVersion.pm: Make use of the new execute_script function.

	* Services.pm: Added execute_script function (based on patch #534121 by
	Benjamin Reed).

2002-05-25  Alexander Strange <MrVacBob@mac.com>

	* SelfUpdate.pm (setup_direct_cvs): The hardlink-support test works now.

2002-05-23  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Under certain condition, splitoffs could have 
	been activated more than once. This problem fixes this.

2002-05-16  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed 'fink rebuild' to honor BuildDepends.

2002-05-16  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Fixed bootstraping (YASB).

2002-05-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_scanpackages): Fixed very stupid bug.

	* Validation.pm (validate_info_file): missing description field now is an
	error instead of a warning.

2002-05-05  Max Horn  <max@quendi.de>

	* PkgVersion.pm (enable_bootstrap, disable_bootstrap): fixed for splitoffs
	(thanks to Sylvain Cuaz for this patch).

2002-05-04  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_tarball): Replaced prdownloads URL with mirror 'sourceforge'.

2002-05-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm (resolve_depends): Fixed bug that made building splitoffs that 
	depend on their master impossible (affects kdebase package).

2002-05-01  Max Horn  <max@quendi.de>

	* PkgVersion.pm (get_description): Don't display DescPort and DescPackaging,
	they are unimportant for the avarage user and developers must look at the
	.info file anyway.

2002-04-25  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed bug #546315

2002-04-19  Max Horn  <max@quendi.de>

	* Bootstrap.pm, Engine.pm, SelfUpdate.pm: Made storable-pm an "important"
	package like apt, i.e it will be installed during bootstrap and updated on
	on selfupdate.

2002-04-15  Max Horn  <max@quendi.de>

	* all: updated copyright notice.

2002-03-31  Max Horn  <max@quendi.de>

	* Package.pm: Now works again if the Storable perl module is not installed.

2002-03-31  Finlay Dobbie <finlayd@users.sourceforge.net>

	* Package.pm: Added support for caching of info files.
	
	* Engine.pm: Added an index command to update the cache.
	
	* SelfUpdate.pm (do_finish): added hook to update package cache.
	
2002-03-26  Justin F. Hallett <thesin@southofheaven.net>

	* PkgVersion.pm: Fixed Type: perl to install the execs into
	the proper dir and not directly into BASEPATH.

2002-03-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm: added get_tree function
	
	* NetAccess.pm (download_cmd): Added another download method, "axel"
	(thanks to Alexander Strange)

2002-03-19  Max Horn  <max@quendi.de>

	* Config.pm (initialize): No macosx pseudo package if we are not on
	Mac OS X!

	* Status.pm (initialize): Fixed macosx version detection on Darwin
	(obviously there is no Mac OS X version on a pure Darwin system)

2002-03-16  Max Horn  <max@quendi.de>
	
	* PkgVersion.pm (resolve_depends): Yet another attempt to fix splitoff
	build dependencies, hopefully more succesful this time.

2002-03-16 Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm: Added "SplitOff" to the list of known fields, and 
	parsing for SplitOff2-SplitOff9

	* Engine.pm: When fink prompts users for a decision about a
	dependency, it now displays the Descriptions of the packages involved
	in the decision.

2002-03-16  Max Horn  <max@quendi.de>
	
	* Validation.pm: Added "BuildDependsOnly" to the list of known fields
	
	* PkgVersion.pm (resolve_depends): Fixed this so that splitoffs and
	splitoff masters always return the same (correct) build dependencies.
	
	* PkgVersion.pm (add_splitoff): Removed annoying debug output ("Found a
	splitoff")

	* Services.pm (read_properties_lines): Handle nested heredocs
	correctly, and if errors are encountered, once more output the
	affected filename.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm (do_real_list): Don't read package info first, wait and
	see if it is needed. Fixed a mistake in the help text.

2002-03-13  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_build): Fix so that root-dirs of splitoffs are
	properly removed again.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm: Support for options in apropos and list commands.

	* Services.pm: Added a get_term_width function.

2002-03-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_apropos): Fixed apropos commands for strings like "gtk+"

2002-03-07  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fix to make rebuilding splitoffs and splitoff
	master packages work correctly.

	* PkgVersion.pm (initialize): Expand percents in even more fields now:
	Suggests, Enhances, Recommends and Pre-Depends.
	(expand_percent_if_available): First converts field parameter to lower case.
	(phase_install): Fixed some issues with the Files field, and changed the
	order in which it is processed (now comes before DocFiles, not after)

2002-03-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Multitude of changes, implementing initial splitoff 
	support. Percent expansion is now done in all dependency related fields.

	* Package.pm (inject_description): Return the created PkgVersion object
	to the called. Used by splitoff code

	* Services.pm (read_properties): Split this function, creating two new
	called read_properties_var and read_properties_lines, which take a text
	variable / a list of strings, instead of a file. Used by splitoff code.

2002-02-23  Max Horn  <max@quendi.de>

	* NetAccess.pm (fetch_url_to_file, download_cmd): Allow the user to
	resume partial downloads.
	
	* NetAccess.pm (download_cmd): Added 'DownloadMethod' field to fink.conf
	(thanks to Christian Swinehart).

	* NetAccess.pm (download_cmd): If we use curl, make sure it treats 
	error 404 properly, i.e. fail instead of downloading the error page
	(thanks to Joseph Bauer).

	* Engine.pm (, cmd_fetch_allcmd_fetch_all_missing): keep going even if a
	single file could not be downloaded. (thanks to Randal L. Schwartz). 

2002-02-01  Max Horn  <max@quendi.de>

	* Validation.pm: deb file validator now warns if files are installed
	outside of /sw.

2002-01-27  Max Horn  <max@quendi.de>

	* Validation.pm: Warn on unknown licenses.

2002-01-26  Max Horn  <max@quendi.de>

	* Validation.pm: Many more problems are detected now

	* Engine.pm (restart_as_root): Pass on more options to new instance

	* *.pm: Changed to use new is_verbose() function to determine verbosity
	
	* Config.pm (is_verbose): New function, returns true if verbose mode is on

	* Validation.pm: Only be verbose in verbose mode

	* Validation.pm: Warn on missing license field

2002-01-11  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: If /sw/fink/VERSION is missing, now tries to look
	at the old /sw/etc/fink-release file instead.

2002-01-10  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: moved fink-release from /sw/etc to /sw/fink and
	renamed it to VERSION to match with other modules

	* SelfUpdate.pm: fixed selfupdate, it would hang when trying to
	uncompress the package tar ball.

2002-01-05  Max Horn  <max@quendi.de>

	* Validation.pm: fixed stupid mistake

	* Validation.pm: Added /sw/lib/locale to list of deprecated directories;
	added some new fields to list of allowed fields (not yet used)

2001-12-28  Matthias Neeracher <neeracher@mac.com>

	* Package.pm: Added %package_hash which speeds up some operations
	enormously.

2001-12-27  Max Horn  <max@quendi.de>

	* Config.pm: Added $darwin_version and $macosx_version, reflecting
	the kernel/system versions.

	* Status.pm (initialize): Added pseudo packages 'darwin' and 'macosx'
	which can be used for dependencies on specific kernel/system versions.

2001-12-23  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_install): Fixed bug occuring when removing the
	last 'perl' type package using UpdatePOD.

2001-12-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Package.pm: Allow '+' in package names.

2001-12-20  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_direct_cvs): Fixed CVS updating for core developers
	(CVS_RSH now always is set to 'ssh').

2001-12-12  Justin F. Hallett  <thesin@southofheaven.net>

	* PkgVersion.pm: Added UpdatePOD field, and added value "Perl" for
	the "type" field to better support perl packages

2001-12-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_remove): All packages to be removed are now passed
	at once to dpkg, thus taking advantage of the advanced dependency
	resolving mechanism of dpkg.

2001-12-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added percent expansion for SourceRename fields

2001-11-06  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (process): Get rid of the funky "Done." message.

2001-11-04  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (setup_direct_cvs): Made the File::Find routine
	more robust. Should be able to handle exotic file names now.

2001-11-02  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: Major rewrite. Now gives the user the choice
	between tracking point releases (the usual packages-#.#.#.tar.gz
	procedure) and setting up direct CVS updating.
	* Engine.pm: Added a selfupdate-cvs command.

2001-11-01  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm (new_from_field): Disabled the case for leaving out
	the key in custom mirror lists; it doesn't work anyway because the
	URLs themselves also contain colons. We'll need another separator.

2001-10-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Make "package not found"
	non-fatal if there are alternatives.

2001-10-20  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Let the user pick one alternative when
	resolving dependencies with virtual packages.

2001-10-18  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (restart_as_root): Propagate the "--yes" option when
	restarting as root.

	* Services.pm (prompt, prompt_boolean, prompt_selection): Check
	the "dontask" a.k.a. "--yes" option and use the default value
	instead of prompting the user when set.

	* Config.pm: Added infrastructure to propagate command line
	options: set_options() and get_option().

	* Engine.pm (process): Be more helpful when the user entered an
	unknown command (contributed by Justin Hallett).

2001-10-17  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm: New class that handles both named and package-local
	mirror site lists. Retrying is handled more intelligently.
	* NetAccess.pm: Another major overhaul. Handling of mirrors has
	been moved to the new Mirror class. That greatly simplified the
	fetch_url_to_file routine.
	* PkgVersion.pm: Use the new Mirror class to handle package-local
	mirrors. The mirror list is parsed on the fly when it is needed.

	* Engine.pm (process): Added a "this command needs root
	privileges" flag. Minor restructuring.
	(restart_as_root): New function which re-executes fink as root,
	passing the current command. Now knows about su if configured.

	* FinkVersion.pm.in: Made independent of Fink::Config. The
	installation path is now hardcoded during installation, like with
	fink.in.

2001-10-14  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (version_cmp): Hopefully get it right this
	time. dpkg implicitly separates version and revision before
	comparing them. As a result the change to fink's comparison
	function that should fix openssh's version ordering broke
	openssl's ordering.

2001-10-13  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (filename): More general solution to handle mirror:
	URLs that don't contain a slash.

2001-10-10  Max Horn  <max@quendi.de>

	* Service.pm (filename): Handle fileanames with the mirror: syntax
	correctly (was broken).

	* PkgVersion.pm (initialize): Parse the new CustomMirror field
	(fetch_source): pass the custom mirror list to fetch_url_to_file

	* NetAccess.pm: converted tabs to spaces
	(fetch_url_to_file): some  clean up, now handles "custom" mirrors,
	code that determines the download cmd moved to a separate function
	so that it will be easier to enhance this.

2001-10-09  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm.in (pkginfo_version): New function to evaluate
	the stamp files for package descriptions.
	* SelfUpdate.pm (check): Use the new pkginfo_version() instead of
	distribution_version(). Stop dead when CVS updating is
	detected. Minor text and code fixes.

	* Services.pm (version_cmp): Changed the version comparison to
	match that of dpkg exactly.

	* SelfUpdate.pm (check): Suppress inject.pl's user info message.

2001-10-07  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_tarball): Handle the new SourceRename and
	Source#Rename fields.
	(fetch_source): Use get_tarball and fetch_url_to_file to handle
	on-the-fly renaming. Disabled verbose error messages, failures are
	handled by fetch_url_to_file. Added tries parameter (passed on to
	fetch_url_to_file).
	(phase_unpack): Offer re-downloading when unpacking fails. Let tar
	handle gzip-compressed files to catch more errors (the shell pipe
	apparently only returns the last command's error code).

2001-10-05  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm: Major overhaul. New function fetch_url_to_file
	allows a target file name to be specified. fetch_url calls through
	to the new function. mirror: URL's are handled
	transparently. After obvious failures fetch_url_to_file offers the
	user to retry the same server or a randomly chosen mirror.
	* Services.pm (expand_url): Removed mirror expansion code.
	* PkgVersion.pm (fetch_source): Don't use expand_url, this is now
	handled transparently by fetch_url.

2001-10-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Make sure the directory we're
	scanning does exist.

2001-09-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): New fields UpdateConfigGuessInDirs
	and UpdateLibtoolInDirs to copy the replacement files directly
	into a list of subdirectories.

2001-09-21  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Create a small README for bundle
	packages - dpkg doesn't like empty packages.

2001-09-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: More protection against unexpected white space.

	* Services.pm (collapse_space): New function to collapse all white
	space in a string into a single space. Useful to eliminate
	newlines in fields that shouldn't have any.

2001-09-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_binary_depends): Convert newlines to spaces.

2001-09-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Include build-time dependencies
	when requested (new field BuildDepends).
	* Engine.pm (real_install): Check build-time dependencies if the
	package is going to be built.

2001-09-12  Max Horn  <max@quendi.de>

	* Engine.pm: Added 'apropos' command analog to the Unix 'apropos'
	
2001-09-11  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (check): Adapted to the new structure, check
	against the distribution version.

	* FinkVersion.pm.in: Added functions to retreive package manager
	and distribution versions.

	* Services.pm: Resolved circular dependency between Services and
	Config.

2001-09-09  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (read): Make non-existence of the dpkg status file
	non-fatal.

	* Package.pm (get_matching_versions): Implemented the version
	comparisons supported by dpkg.
	* PkgVersion.pm (initialize): Removed special handling for the
	Depends field.
	(get_depends): Removed, not needed any more.
	(resolve_depends): Rewritten to allow versioned dependencies and
	alternatives.
	(get_binary_depends): New function to generate dependencies for
	the .deb.
	(phase_build): Use get_binary_depends for the Depends field. Added
	Recommends, Suggests, Enhances and Pre-Depends.

2001-09-07  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Create dpkg status area earlier.

2001-09-06  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (list): Added list() method to retreive the whole
	list, independent of installation status.
	* Package.pm (scan_all): Get list of known packages from dpkg and
	merge it into the info read from files.
	(inject_description): New function to centralize creation of
	version objects.
	* PkgVersion.pm: Added checks for dummy packages created from the
	dpkg status file.

2001-09-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Fixes to section and priority
	determination.

	* Config.pm (initialize): Bail out if Basepath is not set in the
	config file.

2001-09-03  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm: Removed obsolete FindBin import.

	* Package.pm: Enable on-demand loading of package descriptions
	through require_packages().
	* Engine.pm: Use require_packages() for on-demand loading of
	package descriptions. Fixed the flag for some commands. Adapted
	the rescan command.
	* Bootstrap.pm: Use require_packages() instead of cmd_rescan().
	* SelfUpdate.pm: Use require_packages() to reload package info
	after update.

	* Engine.pm: Load specialized modules on demand only.

2001-09-03  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Fixed bootstrap by forcing the package descriptions
	to be read in.

2001-08-31  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Let curl follow redirects.

2001-08-29  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Support curl as well as wget.

	* Configure.pm (configure): Passive FTP is now the default.

	* PkgVersion.pm (phase_install): Added DocFiles field to ease
	installation of README files.

2001-08-28  Max Horn  <max@quendi.de>

	* Validation.pm: made sure that validate also works when the
	specified filename contains a path; upped limit for Description
	field to 45 chars, seems to be sufficient for "fink list"

2001-08-26  Max Horn  <max@quendi.de>

	* Validation.pm: New Module. Contains the code for validation of
	both .info and .deb files.
	* Engine.pm: moved validation code to new module.

2001-08-26  Max Horn  <max@quendi.de>

	* Engine.pm: added new command "validate" (alias "check") which
	validates a given package .info file or .deb file. Not finished.

2001-08-24  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added the Maintainer field to
	'fink describe' output.

	* Bootstrap.pm (bootstrap): Added code to install some
	non-essential, but important packages at bootstrap time. Currently
	installs apt.

2001-08-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): Added support for
	UpdatePoMakefile. When set, copy the updated Makefile.in.in to the
	po subdirectory of the source tree.

2001-08-14  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: New module. Contains code to let Fink update
	itself from the Internet.
	* Engine.pm: Added self-update commands to the command list.
	* NetAccess.pm: New module. Encapsulates downloading files from
	the Internet (currently done via wget).
	* PkgVersion.pm (fetch_source): wget invocation code moved to the
	new NetAccess module.

2001-08-08  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm: New module. Parses the dpkg status file to find the
	installation status of packages.
	* PkgVersion.pm: Use Fink::Status to get the installed status of
	packages. Got rid of .../var/fink-stamp.

2001-08-06  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Fixed regular expressions to
	really remove trailing whitespace.
	(read_properties_multival): Likewise.

	* Engine.pm (real_install): Added check to catch endless loops
	caused by circular dependencies.

2001-07-30  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Provide the full path to the build directory in
	the expansion %b.

2001-07-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added new package type 'nosource'.

2001-07-21  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm (bootstrap): Create empty 'diversions' file for
	dpkg-divert during bootstrap.

	* Engine.pm: Added 'desc' and 'info' as aliases for the
	'description' command. Suggested by Max Horn.

2001-07-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added optional style
	parameter.

	* Package.pm: Make sure the PkgVersion.pm module is loaded.

	* PkgVersion.pm (phase_build): Added support to automatically
	install / remove Info documents.

2001-07-07  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Ignore trailing white space.
	(read_properties_multival): Likewise.

	* Engine.pm: Added commands for a human-readable (list) and a
	machine-readable (listpackages) package listing.

	* PkgVersion.pm: Added method get_shortdescription to get just the
	one line description.

2001-07-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Optionally print list of requested
	packages that will actually be installed/built/whatever.
	(cmd_update_all): Always show the list described above.

	* Configure.pm (configure): Added proxy and firewall
	settings. Cosmetic output formatting changes.
	(choose_mirrors): Remember continent and country in the config
	file. Offer the current settings as default values.
	* PkgVersion.pm (fetch_source): Support new proxy and firewall
	settings.

	* Config.pm (set_param): Handle empty values.
	(save): Remove keys that are set to empty values from the file.

2001-06-30  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm (scan): Don't try to scan non-existing directories.

2001-06-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for inline daemonic
	service description file.

2001-06-22  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Use the new dpkg-bootstrap package during
	bootstrap phase two.

	* Engine.pm (cmd_fetch_missing): Fix handling of partially fetched
	packages.

	* PkgVersion.pm: Provide full package name in all error messages.

2001-06-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Automatically create section name from
	path. Search parent directories for .deb files.
	* Engine.pm (cmd_scanpackages): Write section to override file.

	* Engine.pm (real_install): Added preliminary virtual package
	support.
	* Package.pm (scan): Add the right object to the provider list.
	* PkgVersion.pm (initialize): Removed special treatment for x11 in
	dependency list.

2001-06-16  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: New methods to retreive dependency and conflict
	lists. Cache result of is_installed.

2001-06-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Catch pure virtual packages in cmd_fetch_all and
	cmd_fetch_all_missing.

2001-06-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Removed get_onlyversion.

2001-06-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Make some 'rm -rf' failures non-fatal.

2001-06-06  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm: Virtual packages, step 1 - keeping track of the
	Provides in the data structures. Also, ignore files that start
	with a dot (.) or a hash (#).
	* PkgVersion.pm: Pass Provides, Replaces and Conflicts on to
	dpkg.

2001-06-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Make sure only missing tarballs are fetched, not
	whole packages at a time.
	* PkgVersion.pm (phase_fetch): Optionally fetch only missing
	individual tarballs, instead of whole-package or none.

2001-06-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Add symlink to built packages in
	<prefix>/fink/debs to make sure they can be found even after
	moving the descriptions around.

	* Engine.pm (cmd_description): Small formatting change.

2001-06-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Use get_description to get the
	package description for the dpkg control file.
	(get_description): Improved formatting and added new fields.
	* Engine.pm (cmd_description): Improved formatting.

2001-05-26  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Do percent expansion on SourceDirectory and
	Source#ExtractDir.

2001-05-24  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Generate and use an override
	file.

	* PkgVersion.pm (phase_build): Added conffiles handling.

2001-05-23  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: New command 'scanpackages' to generate Packages.gz
	files using dpkg-scanpackages.

	* PkgVersion.pm (phase_build): Apply percent expansions to package
	scripts.
	(match_package): Be more quiet if verbose output is not set.

2001-05-18  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for package scripts.

	* Services.pm (read_config): Removed dead code.
	(read_properties): Added here-document support.

	* Engine.pm (real_install): Fixed the don't-fetch-unless-needed
	check.

2001-05-11  Finlay Dobbie  <finlay.dobbie@btinternet.com>

	* PkgVersion.pm: get_description() implemented, for use in fink
	description <package>
	* Engine.pm: fink description implemented

2001-05-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (initialize): Dependencies must be separated by a
	comma now; a space is no longer sufficient. (Result of merging
	dpkg-branch and HEAD.)
	* Engine.pm (real_install): Added code to add all essential
	packages to the dependency list of non-essential packages. (Result
	of merging dpkg-branch and HEAD.)

2001-05-08  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (find_debfile): Also search <prefix>/fink/debs for
	.deb files.

	* Engine.pm (real_install): Only fetch when we need the tarballs
	later.

2001-05-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Detect dpkg malfunction
	(incomplete extraction) and offer to retry.

2001-05-02  Christoph Pfisterer  <cp@chrisp.de>

	* Base.pm (param_default): Fixed default handling.

2001-04-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Honor verbosity setting during fetch and
	unpack. Provide tips after download failures.
	* Configure.pm: Add interactive configuration for the verboseness
	setting.
	* Services.pm: New function print_breaking_twoprefix. Removed
	obsolete find_stow.

2001-04-24  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Fetch all packages at the beginning of the
	bootstrap.
	* Engine.pm: Renamed cmd_fetch_missing to
	cmd_fetch_all_missing. New routine cmd_fetch_missing that takes a
	package list.

2001-04-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle .zip files. Source files with an unknown
	extension are copied to the unpacking directory. Check build
	directory for existence.

2001-04-20  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Remove dir files in the info
	directories (was removed during the dpkg move).

2001-04-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Changed internals of real_install. The first
	parameter to real_install is now one of the defined constants
	designating an operation. New commands: rebuild, reinstall.

	* PkgVersion.pm: Create DEBIAN directory during install
	phase. Mark essential packages as essential in dpkg control file.

2001-04-12  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Don't deactivate older revisions of a
	package before installing the new revision. dpkg takes care of
	upgrading itself, and refuses to violate dependencies.

2001-04-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle duplicate package descriptions in
	different directories.
	* Package.pm (add_version): Merge info if version is already
	present.

2001-04-10  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Use the new scan_all method.
	* Package.pm: Added method scan_all to scan all trees listed in
	the config file.
	* Config.pm: Added method get_treelist.

2001-04-05  Christoph Pfisterer  <cp@chrisp.de>

	* Config.pm: New variable $libpath, pointing at the directory for
	support files.
	* Configure.pm: Removed umask code. Use $libpath. Fixed wrong
	method call.
	* Engine.pm: Removed umask code. Call Fink::Package->scan on the
	correct directory in the new layout (temporary, hardcoded
	solution).
	* Package.pm (scan): Use File::Find to recursively search
	directories. Read all files with the extension '.info'. Pass the
	filename to the PkgVersion object for processing.
	* PkgVersion.pm: Use $libpath. Use the description file path
	passed by Fink::Package::scan to generate paths to the patch and
	to the binary .deb. New accessors for the .deb path. Other small
	fixes.

	* Services.pm (prompt_boolean): Fixed regular expression
	recognizing 'yes' answers.

2001-04-03  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Removed sudo from dpkg
	invocation command line.

	* Bootstrap.pm: Refined bootstrap.
	* Package.pm: New function list_essential_packages.
	* Services.pm (execute): Added quiet flag.

2001-04-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added accessor for .deb name. Use accessors
	wherever possible instead of direct access. Use $debarch
	variable. Add a dummy Description to the control file.
	* Config.pm: Added $debarch variable.

2001-03-31  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Set version number to "pre-0.2.0".

	* PkgVersion.pm: Major changes to support dpkg and
	bootstrapping. Added qualifiers to import list.
	* Bootstrap.pm: Separated bootstrap from interactive
	configuration. Massive changes to bootstrap with dpkg.
	* Configure.pm: New module for interactive configuration. Only
	minor changes from the old Bootstrap.pm.
	* Engine.pm: Separated bootstrap from interactive
	configuration. Added call to phase_build().

2001-03-30  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.7.

2001-03-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Removes build dir after
	successful build unless KeepBuildDir is set in the configuration.
	* FinkVersion.pm: Set version number to "post-0.1.6".

2001-03-21  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Added check to catch unknown packages
	that are mentioned in a dependency list.

2001-03-08  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.6.

	* Bootstrap.pm (choose_mirrors): Read mirror list from a file
	instead of just using all files in the directory.

2001-03-05  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for bundle packages (no source,
	only dependecies).

2001-03-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added code to disable the defaults for
	environment variables (e.g. NoSetCPPFLAGS: true).

2001-03-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for multiple tarballs per package.

2001-02-24  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: new module for storing the version number.

2001-02-18  Christoph Pfisterer  <cp@chrisp.de>

	* Released version 0.1.5. Started using CVS and ChangeLogs.

