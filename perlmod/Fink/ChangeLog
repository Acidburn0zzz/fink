2001-09-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Fixes to section and priority
	determination.

	* Config.pm (initialize): Bail out if Basepath is not set in the
	config file.

2001-09-03  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm: Removed obsolete FindBin import.

	* Package.pm: Enable on-demand loading of package descriptions
	through require_packages().
	* Engine.pm: Use require_packages() for on-demand loading of
	package descriptions. Fixed the flag for some commands. Adapted
	the rescan command.
	* Bootstrap.pm: Use require_packages() instead of cmd_rescan().
	* SelfUpdate.pm: Use require_packages() to reload package info
	after update.

	* Engine.pm: Load specialized modules on demand only.

2001-09-03  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Fixed bootstrap by forcing the package descriptions
	to be read in.

2001-08-31  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Let curl follow redirects.

2001-08-29  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Support curl as well as wget.

	* Configure.pm (configure): Passive FTP is now the default.

	* PkgVersion.pm (phase_install): Added DocFiles field to ease
	installation of README files.

2001-08-28  Max Horn  <max@quendi.de>

	* Validation.pm: made sure that validate also works when the
	specified filename contains a path; upped limit for Description
	field to 45 chars, seems to be sufficient for "fink list"

2001-08-26  Max Horn  <max@quendi.de>

	* Validation.pm: New Module. Contains the code for validation of
	both .info and .deb files.
	* Engine.pm: moved validation code to new module.

2001-08-26  Max Horn  <max@quendi.de>

	* Engine.pm: added new command "validate" (alias "check") which
	validates a given package .info file or .deb file. Not finished.

2001-08-24  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added the Maintainer field to
	'fink describe' output.

	* Bootstrap.pm (bootstrap): Added code to install some
	non-essential, but important packages at bootstrap time. Currently
	installs apt.

2001-08-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): Added support for
	UpdatePoMakefile. When set, copy the updated Makefile.in.in to the
	po subdirectory of the source tree.

2001-08-14  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: New module. Contains code to let Fink update
	itself from the Internet.
	* Engine.pm: Added self-update commands to the command list.
	* NetAccess.pm: New module. Encapsulates downloading files from
	the Internet (currently done via wget).
	* PkgVersion.pm (fetch_source): wget invocation code moved to the
	new NetAccess module.

2001-08-08  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm: New module. Parses the dpkg status file to find the
	installation status of packages.
	* PkgVersion.pm: Use Fink::Status to get the installed status of
	packages. Got rid of .../var/fink-stamp.

2001-08-06  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Fixed regular expressions to
	really remove trailing whitespace.
	(read_properties_multival): Likewise.

	* Engine.pm (real_install): Added check to catch endless loops
	caused by circular dependencies.

2001-07-30  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Provide the full path to the build directory in
	the expansion %b.

2001-07-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added new package type 'nosource'.

2001-07-21  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm (bootstrap): Create empty 'diversions' file for
	dpkg-divert during bootstrap.

	* Engine.pm: Added 'desc' and 'info' as aliases for the
	'description' command. Suggested by Max Horn.

2001-07-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added optional style
	parameter.

	* Package.pm: Make sure the PkgVersion.pm module is loaded.

	* PkgVersion.pm (phase_build): Added support to automatically
	install / remove Info documents.

2001-07-07  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Ignore trailing white space.
	(read_properties_multival): Likewise.

	* Engine.pm: Added commands for a human-readable (list) and a
	machine-readable (listpackages) package listing.

	* PkgVersion.pm: Added method get_shortdescription to get just the
	one line description.

2001-07-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Optionally print list of requested
	packages that will actually be installed/built/whatever.
	(cmd_update_all): Always show the list described above.

	* Configure.pm (configure): Added proxy and firewall
	settings. Cosmetic output formatting changes.
	(choose_mirrors): Remember continent and country in the config
	file. Offer the current settings as default values.
	* PkgVersion.pm (fetch_source): Support new proxy and firewall
	settings.

	* Config.pm (set_param): Handle empty values.
	(save): Remove keys that are set to empty values from the file.

2001-06-30  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm (scan): Don't try to scan non-existing directories.

2001-06-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for inline daemonic
	service description file.

2001-06-22  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Use the new dpkg-bootstrap package during
	bootstrap phase two.

	* Engine.pm (cmd_fetch_missing): Fix handling of partially fetched
	packages.

	* PkgVersion.pm: Provide full package name in all error messages.

2001-06-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Automatically create section name from
	path. Search parent directories for .deb files.
	* Engine.pm (cmd_scanpackages): Write section to override file.

	* Engine.pm (real_install): Added preliminary virtual package
	support.
	* Package.pm (scan): Add the right object to the provider list.
	* PkgVersion.pm (initialize): Removed special treatment for x11 in
	dependency list.

2001-06-16  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: New methods to retreive dependency and conflict
	lists. Cache result of is_installed.

2001-06-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Catch pure virtual packages in cmd_fetch_all and
	cmd_fetch_all_missing.

2001-06-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Removed get_onlyversion.

2001-06-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Make some 'rm -rf' failures non-fatal.

2001-06-06  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm: Virtual packages, step 1 - keeping track of the
	Provides in the data structures. Also, ignore files that start
	with a dot (.) or a hash (#).
	* PkgVersion.pm: Pass Provides, Replaces and Conflicts on to
	dpkg.

2001-06-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Make sure only missing tarballs are fetched, not
	whole packages at a time.
	* PkgVersion.pm (phase_fetch): Optionally fetch only missing
	individual tarballs, instead of whole-package or none.

2001-06-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Add symlink to built packages in
	<prefix>/fink/debs to make sure they can be found even after
	moving the descriptions around.

	* Engine.pm (cmd_description): Small formatting change.

2001-06-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Use get_description to get the
	package description for the dpkg control file.
	(get_description): Improved formatting and added new fields.
	* Engine.pm (cmd_description): Improved formatting.

2001-05-26  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Do percent expansion on SourceDirectory and
	Source#ExtractDir.

2001-05-24  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Generate and use an override
	file.

	* PkgVersion.pm (phase_build): Added conffiles handling.

2001-05-23  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: New command 'scanpackages' to generate Packages.gz
	files using dpkg-scanpackages.

	* PkgVersion.pm (phase_build): Apply percent expansions to package
	scripts.
	(match_package): Be more quiet if verbose output is not set.

2001-05-18  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for package scripts.

	* Services.pm (read_config): Removed dead code.
	(read_properties): Added here-document support.

	* Engine.pm (real_install): Fixed the don't-fetch-unless-needed
	check.

2001-05-11  Finlay Dobbie  <finlay.dobbie@btinternet.com>

	* PkgVersion.pm: get_description() implemented, for use in fink
	description <package>
	* Engine.pm: fink description implemented

2001-05-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (initialize): Dependencies must be separated by a
	comma now; a space is no longer sufficient. (Result of merging
	dpkg-branch and HEAD.)
	* Engine.pm (real_install): Added code to add all essential
	packages to the dependency list of non-essential packages. (Result
	of merging dpkg-branch and HEAD.)

2001-05-08  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (find_debfile): Also search <prefix>/fink/debs for
	.deb files.

	* Engine.pm (real_install): Only fetch when we need the tarballs
	later.

2001-05-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Detect dpkg malfunction
	(incomplete extraction) and offer to retry.

2001-05-02  Christoph Pfisterer  <cp@chrisp.de>

	* Base.pm (param_default): Fixed default handling.

2001-04-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Honor verbosity setting during fetch and
	unpack. Provide tips after download failures.
	* Configure.pm: Add interactive configuration for the verboseness
	setting.
	* Services.pm: New function print_breaking_twoprefix. Removed
	obsolete find_stow.

2001-04-24  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Fetch all packages at the beginning of the
	bootstrap.
	* Engine.pm: Renamed cmd_fetch_missing to
	cmd_fetch_all_missing. New routine cmd_fetch_missing that takes a
	package list.

2001-04-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle .zip files. Source files with an unknown
	extension are copied to the unpacking directory. Check build
	directory for existence.

2001-04-20  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Remove dir files in the info
	directories (was removed during the dpkg move).

2001-04-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Changed internals of real_install. The first
	parameter to real_install is now one of the defined constants
	designating an operation. New commands: rebuild, reinstall.

	* PkgVersion.pm: Create DEBIAN directory during install
	phase. Mark essential packages as essential in dpkg control file.

2001-04-12  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Don't deactivate older revisions of a
	package before installing the new revision. dpkg takes care of
	upgrading itself, and refuses to violate dependencies.

2001-04-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle duplicate package descriptions in
	different directories.
	* Package.pm (add_version): Merge info if version is already
	present.

2001-04-10  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Use the new scan_all method.
	* Package.pm: Added method scan_all to scan all trees listed in
	the config file.
	* Config.pm: Added method get_treelist.

2001-04-05  Christoph Pfisterer  <cp@chrisp.de>

	* Config.pm: New variable $libpath, pointing at the directory for
	support files.
	* Configure.pm: Removed umask code. Use $libpath. Fixed wrong
	method call.
	* Engine.pm: Removed umask code. Call Fink::Package->scan on the
	correct directory in the new layout (temporary, hardcoded
	solution).
	* Package.pm (scan): Use File::Find to recursively search
	directories. Read all files with the extension '.info'. Pass the
	filename to the PkgVersion object for processing.
	* PkgVersion.pm: Use $libpath. Use the description file path
	passed by Fink::Package::scan to generate paths to the patch and
	to the binary .deb. New accessors for the .deb path. Other small
	fixes.

	* Services.pm (prompt_boolean): Fixed regular expression
	recognizing 'yes' answers.

2001-04-03  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Removed sudo from dpkg
	invocation command line.

	* Bootstrap.pm: Refined bootstrap.
	* Package.pm: New function list_essential_packages.
	* Services.pm (execute): Added quiet flag.

2001-04-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added accessor for .deb name. Use accessors
	wherever possible instead of direct access. Use $debarch
	variable. Add a dummy Description to the control file.
	* Config.pm: Added $debarch variable.

2001-03-31  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Set version number to "pre-0.2.0".

	* PkgVersion.pm: Major changes to support dpkg and
	bootstrapping. Added qualifiers to import list.
	* Bootstrap.pm: Separated bootstrap from interactive
	configuration. Massive changes to bootstrap with dpkg.
	* Configure.pm: New module for interactive configuration. Only
	minor changes from the old Bootstrap.pm.
	* Engine.pm: Separated bootstrap from interactive
	configuration. Added call to phase_build().

2001-03-30  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.7.

2001-03-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Removes build dir after
	successful build unless KeepBuildDir is set in the configuration.
	* FinkVersion.pm: Set version number to "post-0.1.6".

2001-03-21  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Added check to catch unknown packages
	that are mentioned in a dependency list.

2001-03-08  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.6.

	* Bootstrap.pm (choose_mirrors): Read mirror list from a file
	instead of just using all files in the directory.

2001-03-05  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for bundle packages (no source,
	only dependecies).

2001-03-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added code to disable the defaults for
	environment variables (e.g. NoSetCPPFLAGS: true).

2001-03-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for multiple tarballs per package.

2001-02-24  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: new module for storing the version number.

2001-02-18  Christoph Pfisterer  <cp@chrisp.de>

	* Released version 0.1.5. Started using CVS and ChangeLogs.

